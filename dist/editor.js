!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Mosaico=e()}}(function(){return function r(a,l,s){function d(n,e){if(!l[n]){if(!a[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(u)return u(n,!0);var o=new Error("Cannot find module '"+n+"'");throw o.code="MODULE_NOT_FOUND",o}var i=l[n]={exports:{}};a[n][0].call(i.exports,function(e){var t=a[n][1][e];return d(t||e)},i,i.exports,r,a,l,s)}return l[n].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)d(s[e]);return d}({1:[function(e,t,n){var o=e("../src/js/bindings/choose-template.js");document.addEventListener("DOMContentLoaded",function(e){o.addTemplate("array","\x3c!-- ko foreach: $data --\x3e\x3c!-- ko block: $data --\x3e\x3c!-- /ko --\x3e\x3c!-- /ko --\x3e"),o.addTemplate("block-show","\x3c!-- ko block: $data, scrollIntoView: $root.selectedBlock() === $data --\x3e\x3c!-- /ko --\x3e"),o.addTemplate("block-wysiwyg",'<div class="editable block" data-drop-content="Drop here" data-bind="attr: { \'data-drop-content\': $root.t(\'Drop here\') }, click: function(obj, evt) { $root.selectBlock(obj); return true }, clickBubble: false, css: { selected: $root.selectedBlock() === $data }, scrollIntoView: $root.selectedBlock() === $data">  <div class="mo-blockselectionhelper"></div>  <div class="tools" data-bind="tooltips: {}">    \x3c!-- ko if: typeof $index != \'undefined\' --\x3e    <div title="Drag this handle to move the block" data-bind="attr: { title: $root.t(\'Drag this handle to move the block\') }"      class="tool handle"><i class="fas fa-sort"></i></div>    \x3c!-- ko if: $index() > 0 --\x3e    <div title="Move this block upside" data-bind="attr: { title: $root.t(\'Move this block upside\') }" class="tool moveup"><i        class="fas fa-sort-up" data-bind=\'click: $root.moveBlock.bind($element, $index, $parent, true)\'></i></div>    \x3c!-- /ko --\x3e    \x3c!-- ko if: $index() < $parent.blocks().length -1 --\x3e    <div title="Move this block downside" data-bind="attr: { title: $root.t(\'Move this block downside\') }" class="tool movedown"><i        class="fas fa-sort-down" data-bind=\'click: $root.moveBlock.bind($element, $index, $parent, false)\'></i></div>    \x3c!-- /ko --\x3e    <div title="Delete block" class="tool delete" data-bind="attr: { title: $root.t(\'Delete block\') }, click: $root.removeBlock.bind($element, $rawData, $parent)"><i        class="fas fa-trash"></i></div>    <div title="Duplicate block" class="tool clone" data-bind="attr: { title: $root.t(\'Duplicate block\') }, click: $root.duplicateBlock.bind($element, $index, $parent)"><i        class="fas fa-copy"></i></div>    \x3c!-- /ko --\x3e    \x3c!-- ko if: typeof $data._nextVariant != \'undefined\' --\x3e    <div title="Switch block variant" class="tool variant" data-bind="attr: { title: $root.t(\'Switch block variant\') }, click: $data._nextVariant"><i        class="fa fa-fw fa-magic"></i></div>\x3c!-- /ko --\x3e  </div>  \x3c!-- ko block: $data --\x3e  \x3c!-- /ko --\x3e</div>'),o.addTemplate("blocks-show","\x3c!-- ko template: { name: 'block-show', foreach: blocks } --\x3e\x3c!-- /ko --\x3e"),o.addTemplate("blocks-wysiwyg","<div class=\"sortable-blocks-edit\" data-drop-content=\"Drop here\" data-empty-content=\"Drop here blocks from the Blocks tab\" data-bind=\"attr: { 'data-drop-content': $root.t('Drop here'), 'data-empty-content': $root.t('Drop here blocks from the &quot;Blocks&quot; tab') }, css: { 'empty': ko.utils.unwrapObservable(blocks).length == 0 }, extsortable: { connectClass: 'sortable-blocks-edit', template: 'block-wysiwyg', data: blocks, dragging: $root.dragging, beforeMove: $root.startMultiple, afterMove: $root.stopMultiple, options: { handle: '.handle', placeholder: $root.placeholderHelper } }\"></div>"),o.addTemplate("customstyle",'<div class="customStyleHelp" data-bind="html: $root.t(\'Customized block.<ul><li>In this status changes to properties will be specific to the current block (instead of being global to all blocks in the same section)</li><li>A <span class=&quot;customStyled&quot;><span>&quot;small cube&quot; </span></span> icon beside the property will mark the customization. By clicking this icon the property value will be reverted to the value defined for the section.</li></ul>\')">Customized block.<ul><li>In this status changes to properties will be specific to the current block (instead of being global to all blocks in the same section)</li><li>A <span class="customStyled"><span>"small cube" </span></span> icon beside the property will mark the customization. By clicking this icon the property value will be reverted to the value defined for the section.</li></ul></div>'),o.addTemplate("empty",""),o.addTemplate("error",'[<div style="background-color: #fff0f0" data-bind="text: ko.toJS($data)"></div>]'),o.addTemplate("img-wysiwyg",'<table tabfocus="0" cellspacing="0" cellpadding="0" data-drop-content="Drop here" data-bind="style: _stylebind, click: function(obj, evt) { $root.selectItem(_item, _data); return true; }, clickBubble: false, fudroppable: { activeClass: \'ui-state-highlight\', hoverClass: \'ui-state-draghover\' }, extdroppable: { options: { accept: \'.image\', activeClass: \'ui-state-highlight\', hoverClass: \'ui-state-draghover\' }, data: _src, dragged: $root.fileToImage }, css: { selecteditem: $root.isSelectedItem(_item) }, scrollIntoView: $root.isSelectedItem(_item), attr: { \'data-drop-content\': $root.t(\'Drop here\'), width: _width, height: _height, align: _align }"  class="img-wysiwyg selectable-img" style="display: table;">  <tr>    <td class="uploadzone">      <div class="mo-imgselectionhelper"></div>      <div class="mo-uploadzone"></div>      <div class="img-size" data-bind="text: _size">size</div>      <div class="midtools" data-bind="tooltips: {}">        \x3c!-- ko if: _src() != \'\' --\x3e        <div title="Remove image" class="tool delete" data-bind="attr: { title: $root.t(\'Remove image\') }, click: _src.bind(_src, \'\'), clickBubble: false"><i            class="fa fa-fw fa-trash-o"></i></div>        \x3c!-- ko if: typeof $root.editImage !== \'undefined\' --\x3e        <div title="Open the image editing tool" class="tool edit" data-bind="attr: { title: $root.t(\'Open the image editing tool\') }, click: $root.editImage.bind($element, _src), clickBubble: false"><i            class="fa fa-fw fa-pencil"></i></div>        \x3c!-- /ko --\x3e        \x3c!-- /ko --\x3e        \x3c!-- ko if: _src() == \'\' --\x3e        <div title="Upload a new image" data-bind="attr: { title: $root.t(\'Upload a new image\') }" class="tool upload" style="position: relative; overflow: hidden;"><i            class="fas fa-upload"></i>          <input class="fileupload nofile" type="file" name="files[]" data-bind="fileupload: { data: _src, onerror: $root.notifier.error, onfile: $root.loadMailingImage, canvasPreview: true }"            style="z-index: 20; position: absolute; top: 0; left: 0; right: 0; bottom: 0; min-width: 100%; min-height: 100%; font-size: 999px; text-align: right; filter: alpha(opacity=0); opacity: 0; outline: none; cursor: inherit; display: block">        </div>        \x3c!-- ko if: typeof $root.selectImage !== \'undefined\' --\x3e        <div title="Select from gallery" class="tool gallery" data-bind="attr: { title: $root.t(\'Select from gallery\') }, click: $root.selectImage.bind($element, _src), clickBubble: true"><i            class="fas fa-image"></i></div>        \x3c!-- /ko --\x3e        \x3c!-- /ko --\x3e      </div>      \x3c!-- ko template: _template --\x3e      \x3c!-- /ko --\x3e      \x3c!-- ko if: _src() == \'\' --\x3e      \x3c!--    <img style="display: block;" class="imgplaceholder" width="200" src="" alt="Insert an image here" data-bind="wysiwygSrc: { src: _src.preloaded, placeholder: _placeholdersrc, width: _width, height: _height, method: _method }" />    --\x3e      <span class="fileuploadtext" style="text-align: center; display: -ms-flexbox; display: flex; align-items: center; flex-align: center; justify-content: center; padding: 1em; position: absolute; top: 0; left: 0; right: 0; bottom: 0;"><span          class="textMiddle" style=" text-shadow: 1px 1px 0 #FFFFFF, 0 0 10px #FFFFFF; font-weight: bold;" data-bind="text: $root.t(\'Drop an image here\')">Drop          an image here</span></span>      \x3c!-- /ko --\x3e      \x3c!-- ko if: _src() != \'\' --\x3e      \x3c!--    <img style="display: block;" width="200" src="" data-bind="preloader: _src, wysiwygSrc: { src: _src.preloaded, placeholder: _placeholdersrc, width: _width, height: _height, method: _method }" />    --\x3e      \x3c!-- /ko --\x3e      \x3c!-- pulsante per la cancellazione --\x3e      <div title="Drop an image here or click the upload button" data-bind="attr: { title: $root.t(\'Drop an image here or click the upload button\') }, tooltips: {}"        class="workzone" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; overflow: hidden;">        \x3c!-- ko if: _src.preloaded && _src() != _src.preloaded() --\x3ePRELOADING....        \x3c!-- /ko --\x3e        \x3c!-- ko if: _src() != \'\' --\x3e        <input class="fileupload withfile" type="file" name="files[]" data-bind="fileupload: { data: _src, onerror: $root.notifier.error, onfile: $root.mailingGallery.unshift.bind($root.mailingGallery), canvasPreview: true }"          style="z-index: -20; position: absolute; top: 0; left: 0; right: 0; bottom: 0; min-width: 100%; min-height: 100%; font-zie: 999px; text-align: right; filter: alpha(opacity=0); opacity: 0; outline: none; cursor: inherit; display: block">        \x3c!-- /ko --\x3e        <div class="progress" style="opacity: .5; width: 80%; margin-left: 10%; position: absolute; bottom: 30%; height: 20px; border: 2px solid black;">          <div class="progress-bar progress-bar-success" style="height: 20px; background-color: black; "></div>        </div>      </div></table>'),o.addTemplate("main",'<div id="page" style="display: none;" data-bind="visible: true, css: { withToolbox: $root.showToolbox, withPreviewFrame: showPreviewFrame }">  <div id="main-edit-area" data-bind="click: function(obj, evt) { $root.selectBlock(null); return true; }, clickBubble: false">    \x3c!-- ko withProperties: { templateMode: \'wysiwyg\', templateModeFallback: \'show\' } --\x3e    <div id="main-wysiwyg-area" data-bind="wysiwygScrollfix: true, scrollable: true, fudroppable: { active: draggingImage }, css: { isdragging: dragging, isdraggingimg: draggingImage }, block: content"></div>    \x3c!-- /ko --\x3e  </div>  <div id="toolbar" class="mo" data-bind="tooltips: {}">    \x3c!-- ko if: typeof $root.undo != \'undefined\' --\x3e    <span data-bind="buttonset: { }" class="leftButtons">      <a class="toolbar__button toolbar__button--undo" title="Undo last operation" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Undo last operation\') }, click: $root.undo.execute, clickBubble: false, button: { disabled: !$root.undo.enabled(), icons: { primary: \'fas fa-reply\' }, label: $root.undo.name, text: true }">UNDO</a>      <a class="toolbar__button toolbar__button--redo" title="Redo last operation" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Redo last operation\') }, click: $root.redo.execute, clickBubble: false, button: { disabled: !$root.redo.enabled(), icons: { primary: \'fas fa-share\' }, label: $root.redo.name, text: true }">REDO</a>    </span>    \x3c!-- ko if: $root.debug --\x3e    <a href="javascript:void(0)" data-bind="click: $root.undoReset, clickBubble: false, button: { disabled: !$root.undo.enabled() && !$root.redo.enabled(), label: \'reset\', text: true }">RESET</a>    \x3c!-- /ko --\x3e    \x3c!-- /ko --\x3e    <span>      <input id="showGallery" type="checkbox" data-bind="checked: $root.showGallery, button: { refreshOn: $root.showGallery,    icons: { primary: \'fas fa-image\', secondary: null }, text: true, label: $root.t(\'Gallery\') }"><label title="Show image gallery"        for="showGallery" data-bind="attr: { title: $root.t(\'Show image gallery\') }">show gallery</label></input>    </span>    \x3c!-- ko template: {name: \'edit-name\' } --\x3e# mailing name #    \x3c!-- /ko --\x3e    <input id="previewFrameToggle" type="checkbox" data-bind="checked: $root.showPreviewFrame, button: { refreshOn: $root.showPreviewFrame, icons: { primary: null , secondary: null }, text: false, label: $root.t(\'Preview\') }"    />    <label for="previewFrameToggle" title="Show live preview" data-bind="attr: { title: $root.t(\'Show live preview\') }">      PREVIEW    </label>    \x3c!-- ko if: $root.debug --\x3e    <a href="javascript:void(0)" data-bind="click: $root.export, clickBubble: false, button: { label: \'export\', text: true }">EXPORT</a>    <input type="checkbox" data-bind="checked: $root.debug" /> debug    <a href="javascript:void(0)" data-bind="click: $root.loadDefaultBlocks, clickBubble: false, button: { icons: { primary: \'fas fa-upload\' }, label: \'Default\', text: true }">LOAD      BLOCKS    </a>    [<a id="subscriptionsCount" href="javascript:viewModel.loopSubscriptionsCount()">subs</a>]    \x3c!-- /ko --\x3e    <span data-bind="visible: false">      <input type="checkbox" data-bind="checked: $root.showToolbox" /> toolbox    </span>    <div class="rightButtons">      \x3c!-- ko if: typeof $root.save !== \'undefined\' --\x3e      <a class="toolbar__button toolbar__button--save" title="Save template" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Save template\') }, click: $root.save.execute, clickBubble: false, button: { disabled: !$root.save.enabled(), icons: { primary: \'fas fa-save\' }, label: $root.t($root.save.name), text: true }">SALVA</a>      \x3c!-- /ko --\x3e      \x3c!-- ko if: typeof $root.test !== \'undefined\' --\x3e      <a class="toolbar__button" title="Show preview and send test" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Show preview and send test\') }, click: $root.test.execute, clickBubble: false, button: { disabled: !$root.test.enabled(), icons: { primary: \'fas fa-paper-plane\' }, label: $root.t($root.test.name), text: true }">TEST</a>      \x3c!-- /ko --\x3e      \x3c!-- ko template: {name: \'download-button\' } --\x3e# download button #      \x3c!-- /ko --\x3e    </div>  </div>  \x3c!-- ko template: {name: \'dialog-select-image\' } --\x3e# dialog image selection #  \x3c!-- /ko --\x3e  \x3c!-- ko if: $root.showToolbox --\x3e  <div id="main-toolbox" class="mo" data-bind="scrollable: true, withProperties: { templateMode: \'edit\' }">    <div data-bind="template: { name: \'toolbox\' }"></div>  </div>  \x3c!-- /ko --\x3e  <div id="main-preview" class="mo" data-bind="scrollable: true, if: $root.showPreviewFrame">    <div id="preview-toolbar">      <div data-bind="visible: $root.showPreviewFrame, buttonset: { }" style="display: inline-block">        <input id="previewLarge" type="radio" name="previewMode" value="large" data-bind="checked: $root.previewMode, button: { text: false, label: \'large\', icons: { primary: \'fas fa-desktop\' } }"        />        <label for="previewLarge" title="Large screen" data-bind="attr: { title: $root.t(\'Large screen\') }">Large screen</label>        <input id="previewDesktop" type="radio" name="previewMode" value="desktop" data-bind="checked: $root.previewMode, button: { text: false, label: \'desktop\', icons: { primary: \'fas fa-tablet-alt\' } }"        />        <label for="previewDesktop" title="Tablet" data-bind="attr: { title: $root.t(\'Tablet\') }">Tablet</label>        <input id="previewMobile" type="radio" name="previewMode" value="mobile" data-bind="checked: $root.previewMode, button: { text: false, label: \'mobile\', icons: { primary: \'fas fa-mobile-alt\' } }"        />        <label for="previewMobile" title="Smartphone" data-bind="attr: { title: $root.t(\'Smartphone\') }">Smartphone</label>      </div>    </div>    <div id="frame-container" data-bind="css: { desktop: $root.previewMode() == \'desktop\', mobile: $root.previewMode() == \'mobile\', large: $root.previewMode() == \'large\' }">      <iframe data-bind="bindIframe: $data"></iframe>    </div>  </div>  <div class="mo" id="mo-body"></div>  <div id="incompatible-template" title="Saved model is obsolete" style="display: none" data-bind="attr: { title: $root.t(\'Saved model is obsolete\') }, html: $root.t(\'<p>The saved model has been created with a previous, non completely compatible version, of the template</p><p>Some content or style in the model <b>COULD BE LOST</b> if you will <b>save</b></p><p>Contact us for more informations!</p>\')">    Incompatible template  </div>  <div id="fake-image-editor" title="Fake image editor" style="display: none" data-bind="attr: { title: $root.t(\'Fake image editor\') }, html: $root.t(\'<p>Fake image editor</p>\')">    <p>Fake image editor</p>  </div></div>\x3c!-- ko if: $root.logoPath --\x3e<div id="loading" class="loading" style="display: block; width: 300px; text-align: center; height: 32px; position: absolute; top:0; bottom: 0; left: 0; right: 0;  margin: auto;"  data-bind="attr: { style: \'position: absolute; top: 5px; left: 6px; z-index: 150;\'}, css: { loading: false }">  <a href="/" data-bind="attr: { href: $root.logoUrl, alt: $root.logoAlt }"><img data-bind="attr: { src: $root.logoPath }"      width="32" height="32" alt="mosaico" border="0" /></a>  <div style="opacity: 0" data-bind="visible: false">Oppps... !!</div></div>\x3c!-- /ko --\x3e\x3c!-- ko template: {name: \'home-icon\' } --\x3e# home-icon #\x3c!-- /ko --\x3e'),o.addTemplate("toolbox",'<div id="tooltabs" class="tabs_horizontal button_color" data-bind="tabs: { active: $root.selectedTool }">  <ul>    <li data-bind="tooltips: {}"><a title="Blocks ready to be added to the template" data-local="true" href="#toolblocks"        data-bind="attr: { title: $root.t(\'Blocks ready to be added to the template\') }"><i class="fas fa-cubes"></i>        <span data-bind="html: $root.t(\'Blocks\')">Blocks</span></a></li>    <li data-bind="tooltips: {}"><a title="Edit content options" href="#toolcontents" data-local="true" data-bind="attr: { title: $root.t(\'Edit content options\') }"><i          class="fas fa-pencil-alt"></i> <span data-bind="html: $root.t(\'Content\')">Content</span></a></li>    <li data-bind="tooltips: {}"><a title="Edit style options" href="#toolstyles" data-local="true" data-bind="attr: { title: $root.t(\'Edit style options\') }"><i          class="fas fa-paint-brush"></i> <span data-bind="html: $root.t(\'Style\')">Style</span></a></li>  </ul>  <div id="toolblocks" data-bind="scrollable: true">    <div class="block-list" data-bind="foreach: blockDefs" style="text-align: center">      <div class="draggable-item" data-bind="withProperties: { templateMode: \'show\' }">        <div class="block" data-bind="extdraggable: { connectClass: \'sortable-blocks-edit\', data: $data, dropContainer: \'#main-wysiwyg-area\', dragging: $root.dragging, \'options\': { handle: \'.handle\', distance: 10, \'appendTo\': \'#page\' } }, click: $root.addBlock"          style="position: relative;">          <div title="Click or drag to add this block to the template" class="handle" data-bind="attr: { title: $root.t(\'Click or drag to add this block to the template\') }, tooltips: {}"></div>          <img data-bind="attr: { alt: $root.t(\'Block __name__\', { name: ko.utils.unwrapObservable(type) }), src: $root.templatePath(\'edres/\'+ko.utils.unwrapObservable(type)+\'.png\') }"            alt="Block __name__" />        </div>        <a href="javascript:void(0)" class="addblockbutton" data-bind="click: $root.addBlock, button: { label: $root.t(\'Add\') }">Add</a>      </div>    </div>  </div>  <div id="toolcontents" data-bind="scrollable: true">    \x3c!-- ko if: $root.selectedBlock() !== null --\x3e    <div data-bind="block: $root.selectedBlock"></div>    \x3c!-- /ko --\x3e    \x3c!-- ko if: $root.selectedBlock() == null --\x3e    <div class="noSelectedBlock" data-bind="text: $root.t(\'By clicking on message parts you will select a block and content options, if any, will show here\')">By      clicking on message parts you will select a block and content options, if any, will show here</div>    \x3c!-- /ko --\x3e    \x3c!-- ko block: content --\x3e    \x3c!-- /ko --\x3e  </div>  <div id="toolstyles" data-bind="scrollable: true, withProperties: { templateMode: \'styler\' }">    \x3c!-- ko if: typeof $root.content().theme === \'undefined\' || typeof $root.content().theme().scheme === \'undefined\' || $root.content().theme().scheme() === \'custom\' --\x3e    \x3c!-- ko if: $root.selectedBlock() !== null --\x3e    <div data-bind="block: $root.selectedBlock, css: { workLocal: $root.selectedBlock().customStyle, workGlobal: typeof $root.selectedBlock().customStyle === \'undefined\' || !$root.selectedBlock().customStyle() }"></div>    \x3c!-- /ko --\x3e    \x3c!-- ko if: $root.selectedBlock() == null --\x3e    <div class="noSelectedBlock" data-bind="text: $root.t(\'By clicking on message parts you will select a block and style options, if available, will show here\')">By      clicking on message parts you will select a block and style options, if available, will show here</div>    \x3c!-- /ko --\x3e    <div class="workGlobalContent">      \x3c!-- ko block: content --\x3e      \x3c!-- /ko --\x3e    </div>    \x3c!-- /ko --\x3e  </div></div><div id="toolimages" class="slidebar" data-bind="scrollable: true, css: { hidden: $root.showGallery() === false }">  <div class="close" data-bind="click: $root.showGallery.bind($element, false);">X</div>  <span class="pane-title" data-bind="text: $root.t(\'gallery-title\')">Galleries:</span>  \x3c!-- ko if: $root.showGallery() --\x3e  <div id="toolimagestab" class="tabs_horizontal" data-bind="tabs: { active: $root.selectedImageTab }">    <ul>      <li data-bind="tooltips: {}"><a title="gallery-mailing" data-local="true" href="#toolimagesgallery" data-bind="attr: { title: $root.t(\'gallery-mailing\') }, text: $root.t(\'gallery-mailing\')">gallery-mailing</a></li>      <li data-bind="tooltips: {}"><a title="gallery-template" data-local="true" href="#toolimagesgallerytemplate" data-bind="attr: { title: $root.t(\'gallery-template\') }, text: $root.t(\'gallery-template\')">gallery-template</a></li>    </ul>    <div id="toolimagesgallery" class="gallery-panel">      \x3c!-- ko template: {name: \'gallery-upload\', data: { type: \'mailing\' } } --\x3e# mailing gallery fileupload #      \x3c!-- /ko --\x3e      \x3c!-- ko if: $root.mailingGalleryStatus() === false --\x3e<a class="loadbutton" title="Show images from the gallery" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Show images from the gallery\') }, click: $root.loadMailingGallery, button: { disabled: $root.mailingGalleryStatus, icons: { primary: \'fas fa-image\' }, label: $root.mailingGalleryStatus() == \'loading\' ? $root.t(\'Loading...\') : $root.t(\'Load gallery\'), text: true }">#        load gallery #</a>\x3c!-- /ko --\x3e      \x3c!-- ko if: $root.mailingGalleryStatus() === \'loading\' --\x3e      <div class="galleryEmpty" data-bind="text: $root.t(\'gallery-mailing-loading\')">Loading mailing gallery…</div>\x3c!-- /ko --\x3e      \x3c!-- ko if: $root.mailingGalleryStatus() === 0 --\x3e      <div class="galleryEmpty" data-bind="text: $root.t(\'gallery-mailing-empty\')">The mailing gallery is empty</div>\x3c!-- /ko --\x3e      \x3c!-- ko template: {name: \'gallery-images\', data: { items: mailingGallery, type: \'mailing\' } } --\x3e# mailing gallery #      \x3c!-- /ko --\x3e    </div>    <div id="toolimagesgallerytemplate" class="gallery-panel">      \x3c!-- ko template: {name: \'gallery-upload\', data: { type: \'template\' } } --\x3e# mailing template fileupload #      \x3c!-- /ko --\x3e      \x3c!-- ko if: $root.templateGalleryStatus() === false --\x3e<a class="loadbutton" title="Show images from the gallery" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Show images from the gallery\') }, click: $root.loadTemplateGallery, button: { disabled: $root.templateGalleryStatus, icons: { primary: \'fas fa-image\' }, label: $root.templateGalleryStatus() == \'loading\' ? $root.t(\'Loading...\') : $root.t(\'Load gallery\'), text: true }">#        load gallery #</a>\x3c!-- /ko --\x3e      \x3c!-- ko if: $root.templateGalleryStatus() === \'loading\' --\x3e      <div class="galleryEmpty" data-bind="text: $root.t(\'gallery-mailing-loading\')">Loading template gallery...</div>\x3c!-- /ko --\x3e      \x3c!-- ko if: $root.templateGalleryStatus() === 0 --\x3e      <div class="galleryEmpty" data-bind="text: $root.t(\'gallery-mailing-empty\')">The template gallery is empty</div>\x3c!-- /ko --\x3e      \x3c!-- ko template: {name: \'gallery-images\', data: { items: templateGallery, type: \'template\' } } --\x3e# template gallery #      \x3c!-- /ko --\x3e    </div>  </div>  \x3c!-- /ko --\x3e</div><div id="tooldebug" class="slidebar" data-bind="css: { hidden: $root.debug() === false }">  <div class="close" data-bind="click: $root.debug.bind($element, false);">X</div>  \x3c!-- ko if: $root.debug --\x3e  Content:  <pre data-bind=\'text: ko.toJSON(content, null, 2)\' style="overflow: auto; height: 20%"></pre> BlockDefs:  <pre data-bind=\'text: ko.toJSON(blockDefs, null, 2)\' style="overflow: auto; height: 20%"></pre>  \x3c!-- /ko --\x3e  <a href="javascript:void(0)" data-bind="click: $root.exportHTMLtoTextarea.bind($element, \'#outputhtml\'); clickBubble: false, button: { text: true, label:\'Generate\' }">Output</a>  <a href="javascript:void(0)" data-bind="click: $root.exportJSONtoTextarea.bind($element, \'#outputhtml\'); clickBubble: false, button: { text: true, label:\'Export\' }">Export</a>  <a href="javascript:void(0)" data-bind="click: $root.importJSONfromTextarea.bind($element, \'#outputhtml\'); clickBubble: false, button: { text: true, label:\'Import\' }">Import</a>  <textarea id="outputhtml" rows="10" style="width: 100%;"></textarea></div><div id="tooltheme" class="ui-widget slidebar" data-bind="css: { hidden: $root.showTheme() === false }">  <div class="close" data-bind="click: $root.showTheme.bind($element, false);">X</div>  \x3c!-- ko withProperties: { templateMode: \'styler\' } --\x3e  \x3c!-- ko if: $root.showTheme --\x3e  \x3c!-- ko block: $root.content().theme --\x3e  \x3c!-- /ko --\x3e  \x3c!-- /ko --\x3e  \x3c!-- /ko --\x3e</div>'),o.addTemplate("dialog-select-image",'\x3c!-- ko if: $root.showDialogGallery() --\x3e\x3c!-- should use ui-dialog --\x3e<aside id="dialogGallery" class="mo">  <div class="tabs_horizontal" data-bind="tabs: { active: $root.selectedImageTab }">    <div class="close" data-bind="click: $root.closeDialogGallery;">X</div>    <ul>      <li data-bind="tooltips: {}"><a title="gallery-mailing" data-local="true" href="#dialoggallerymailing" data-bind="attr: { title: $root.t(\'gallery-mailing\') }, text: $root.t(\'gallery-mailing\')">gallery-mailing</a></li>      <li data-bind="tooltips: {}"><a title="gallery-template" data-local="true" href="#dialoggallerytemplate" data-bind="attr: { title: $root.t(\'gallery-template\') }, text: $root.t(\'gallery-template\')">gallery-template</a></li>    </ul>    <div id="dialoggallerymailing" class="gallery-panel">      \x3c!-- ko template: {name: \'gallery-upload\', data: { type: \'mailing\' } } --\x3e# mailing gallery fileupload #      \x3c!-- /ko --\x3e      \x3c!-- ko if: $root.mailingGalleryStatus() === false --\x3e<a class="loadbutton" title="Show images from the gallery" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Show images from the gallery\') }, click: $root.loadMailingGallery, button: { disabled: $root.mailingGalleryStatus, icons: { primary: \'fas fa-image\' }, label: $root.mailingGalleryStatus() == \'loading\' ? $root.t(\'Loading...\') : $root.t(\'Load gallery\'), text: true }">#        load gallery #</a>\x3c!-- /ko --\x3e      \x3c!-- ko if: $root.mailingGalleryStatus() === \'loading\' --\x3e      <div class="galleryEmpty" data-bind="text: $root.t(\'gallery-mailing-loading\')">Loading mailing gallery…</div>      \x3c!-- /ko --\x3e      \x3c!-- ko if: $root.mailingGalleryStatus() === 0 --\x3e      <div class="galleryEmpty" data-bind="text: $root.t(\'gallery-mailing-empty\')">The mailing gallery is empty</div>      \x3c!-- /ko --\x3e      <div class="dialog-gallery-wrapper">        <ul data-bind="foreach: mailingGallery">          \x3c!-- ko if: typeof thumbnailUrl != \'undefined\' --\x3e          <li data-bind="click: $root.setBgImage.bind($element, name);">            <img style="display: block;" data-bind="attr: { src: thumbnailUrl }" />          </li>          \x3c!-- /ko --\x3e        </ul>      </div>    </div>    <div id="dialoggallerytemplate" class="gallery-panel">      \x3c!-- ko template: {name: \'gallery-upload\', data: { type: \'template\' } } --\x3e# mailing template fileupload #      \x3c!-- /ko --\x3e      \x3c!-- ko if: $root.templateGalleryStatus() === false --\x3e<a class="loadbutton" title="Show images from the gallery" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Show images from the gallery\') }, click: $root.loadTemplateGallery, button: { disabled: $root.templateGalleryStatus, icons: { primary: \'fas fa-image\' }, label: $root.templateGalleryStatus() == \'loading\' ? $root.t(\'Loading...\') : $root.t(\'Load gallery\'), text: true }">#        load gallery #</a>\x3c!-- /ko --\x3e      \x3c!-- ko if: $root.templateGalleryStatus() === \'loading\' --\x3e      <div class="galleryEmpty" data-bind="text: $root.t(\'gallery-mailing-loading\')">Loading template gallery...</div>      \x3c!-- /ko --\x3e      \x3c!-- ko if: $root.templateGalleryStatus() === 0 --\x3e      <div class="galleryEmpty" data-bind="text: $root.t(\'gallery-mailing-empty\')">The template gallery is empty</div>      \x3c!-- /ko --\x3e      <div class="dialog-gallery-wrapper">        <ul data-bind="foreach: templateGallery">          \x3c!-- ko if: typeof thumbnailUrl != \'undefined\' --\x3e          <li data-bind="click: $root.setBgImage.bind($element, name);">            <img style="display: block;" data-bind="attr: { src: thumbnailUrl }" />          </li>          \x3c!-- /ko --\x3e        </ul>      </div>    </div>  </div></aside>\x3c!-- /ko --\x3e'),o.addTemplate("download-button",'\x3c!-- ko if: typeof $root.download !== \'undefined\' --\x3e<form id="downloadForm" class="download" action="#" method="POST">  <input type="hidden" name="action" value="download" />  <input type="hidden" name="filename" value="email.html" id="downloadHtmlFilename" />  <input type="hidden" name="html" id="downloadHtmlTextarea" />  <button type="button" class="toolbar__button download__button" title="Download template" data-bind="attr: { title: $root.t(\'Download template\') }">    <i class="fas fa-file-archive" aria-hidden="true"></i>    <span data-bind="text: $root.t($root.download.name)">DOWNLOAD</span>  </button>  <div class="download__panel">    <a class="download__panel_action" href="javascript:void(0)" data-bind="click: $root.download.execute.bind($element, \'image\'), clickBubble: false, button: { disabled: !$root.download.enabled(), label: $root.t(\'download-with-images\'), text: true }">DOWNLOAD</a>    <a class="download__panel_action" href="javascript:void(0)" data-bind="click: $root.download.execute.bind($element, \'cdn\'), clickBubble: false, button: { disabled: !$root.download.enabled(), label: $root.t(\'download-cdn\'), text: true }">DOWNLOAD</a>  </div></form>\x3c!-- /ko --\x3e'),o.addTemplate("edit-name",'\x3c!-- ko if: $root.titleMode() == \'edit\' || $root.titleMode() == \'saving\' --\x3e<form class="mailing-name" data-bind="submit: saveEditMailingName, submitBubble: false">  <input type="text" data-bind="value: $root.metadata.name, disable: $root.titleMode() == \'saving\', hasFocus: $root.titleMode() == \'edit\'"/>  <button type="button" data-bind="click: cancelEditMailingName, clickBubble: false, disable: $root.titleMode() == \'saving\',  button: { refreshOn: $root.showPreviewFrame, icons: { primary: \'fa fa-fw fa-times\', secondary: null }, text: false, label: $root.t(\'edit-title-cancel\') }">cancel</button>  <button type="submit" data-bind="disable: $root.titleMode() == \'saving\',    button: { refreshOn: $root.showPreviewFrame, icons: { primary: \'fa fa-fw fa-check-circle\', secondary: null }, text: false, label: $root.t(\'edit-title-save\') }">save</button></form>\x3c!-- /ko --\x3e\x3c!-- ko if: $root.titleMode() == \'show\' --\x3e<div class="mailing-name">  <p class="ui-button" data-bind="event: { dblclick: enableEditMailingName }, dblclickBubble: false,    attr: { title: $root.t(\'edit-title-double-click\') }">    <span class="ui-button-text" data-bind="text: $root.mailingName"></span>  </p></div>\x3c!-- /ko --\x3e'),o.addTemplate("gallery-images",'<aside class="gallery-thumbs gallery-thumbs--custom" data-bind="attr: {\'data-type\': type}">  <div data-bind="foreach: items">    <div class="draggable-item" data-bind="if: typeof thumbnailUrl != \'undefined\'">      <button class="gallery-thumbs__remove" data-bind="click: $root.removeImage.bind($data, $data, $parent.type)">        <i class="fa fa-times"></i>      </button>      <div class="draggable image" data-bind="click: $root.addImage, extdraggable: { data: $data, dropContainer: \'#main-wysiwyg-area\', dragging: $root.draggingImage, \'options\': { \'appendTo\': \'#page\' } }, style: { backgroundImage: \'url(\\\'\' + thumbnailUrl + \'\\\')\' }">        <img title="Drag this image and drop it on any template image placeholder" style="display: block;" data-bind="tooltips: {}, attr: { src: thumbnailUrl, \'title\': $root.t(\'Drag this image and drop it on any template image placeholder\') }"/>      </div>    </div>  </div></aside>'),o.addTemplate("gallery-upload",'<div data-drop-content="Drop here" class="img-dropzone pane uploadzone" data-bind="attr: { \'data-drop-content\': $root.t(\'Drop here\') }, fudroppable: { activeClass: \'ui-state-highlight\', hoverClass: \'ui-state-draghover\' }">  <div class="mo-uploadzone">    \x3c!-- ko if: type === \'mailing\' --\x3e      <input class="fileupload" type="file" multiple name="files[]" data-bind="fileupload: { onerror: $root.notifier.error, onfile: $root.loadMailingImage }">    \x3c!-- /ko --\x3e    \x3c!-- ko if: type === \'template\' --\x3e      <input class="fileupload" type="file" multiple name="files[]" data-bind="fileupload: { onerror: $root.notifier.error, onfile: $root.loadTemplateImage, uploadToTemplate: true }">    \x3c!-- /ko --\x3e    <span data-bind="text: $root.t(\'Click or drag files here\')">Click or drag files here</span>      <div class="workzone">        <div class="progress">          <div class="progress-bar progress-bar-success"></div>        </div>      </div>  </div></div>'),o.addTemplate("home-icon",'<div id="loading" class="loading" data-bind="css: { loading: false }">  <a href="/" id="home-button" alt="mosaic-backend" data-bind="attr: { alt: $root.brandName }">    <i class="fas fa-home fa-lg" aria-hidden="true"></i>  </a>  <div style="opacity: 0" data-bind="visible: false">Oppps... !!</div></div>')})},{"../src/js/bindings/choose-template.js":46}],2:[function(x,k,e){(function(t){"use strict";function r(e,t){if(e===t)return 0;for(var n=e.length,o=t.length,i=0,r=Math.min(n,o);i<r;++i)if(e[i]!==t[i]){n=e[i],o=t[i];break}return n<o?-1:o<n?1:0}function a(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var u=x("util/"),o=Object.prototype.hasOwnProperty,c=Array.prototype.slice,n="foo"===function(){}.name;function l(e){return Object.prototype.toString.call(e)}function s(e){return!a(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var d=k.exports=e,i=/\s*function\s+([^\(\s]*)\s*/;function f(e){if(u.isFunction(e)){if(n)return e.name;var t=e.toString().match(i);return t&&t[1]}}function p(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function h(e){if(n||!u.isFunction(e))return u.inspect(e);var t=f(e);return"[Function"+(t?": "+t:"")+"]"}function b(e,t,n,o,i){throw new d.AssertionError({message:n,actual:e,expected:t,operator:o,stackStartFunction:i})}function e(e,t){e||b(e,!0,t,"==",d.ok)}function v(e,t,n,o){if(e===t)return!0;if(a(e)&&a(t))return 0===r(e,t);if(u.isDate(e)&&u.isDate(t))return e.getTime()===t.getTime();if(u.isRegExp(e)&&u.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(s(e)&&s(t)&&l(e)===l(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(a(e)!==a(t))return!1;var i=(o=o||{actual:[],expected:[]}).actual.indexOf(e);return-1!==i&&i===o.expected.indexOf(t)||(o.actual.push(e),o.expected.push(t),function(e,t,n,o){if(null==e||null==t)return!1;if(u.isPrimitive(e)||u.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=g(e),r=g(t);if(i&&!r||!i&&r)return!1;if(i)return e=c.call(e),t=c.call(t),v(e,t,n);var a,l,s=w(e),d=w(t);if(s.length!==d.length)return!1;for(s.sort(),d.sort(),l=s.length-1;0<=l;l--)if(s[l]!==d[l])return!1;for(l=s.length-1;0<=l;l--)if(a=s[l],!v(e[a],t[a],n,o))return!1;return!0}(e,t,n,o))}return n?e===t:e==t}function g(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function m(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function y(e,t,n,o){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(o=n,n=null),i=function(e){var t;try{e()}catch(e){t=e}return t}(t),o=(n&&n.name?" ("+n.name+").":".")+(o?" "+o:"."),e&&!i&&b(i,n,"Missing expected exception"+o);var r="string"==typeof o,a=!e&&i&&!n;if((!e&&u.isError(i)&&r&&m(i,n)||a)&&b(i,n,"Got unwanted exception"+o),e&&i&&n&&!m(i,n)||!e&&i)throw i}d.AssertionError=function(e){var t;this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=p(h((t=this).actual),128)+" "+t.operator+" "+p(h(t.expected),128),this.generatedMessage=!0);var n=e.stackStartFunction||b;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var o=new Error;if(o.stack){var i=o.stack,r=f(n),a=i.indexOf("\n"+r);if(0<=a){var l=i.indexOf("\n",a+1);i=i.substring(l+1)}this.stack=i}}},u.inherits(d.AssertionError,Error),d.fail=b,d.ok=e,d.equal=function(e,t,n){e!=t&&b(e,t,n,"==",d.equal)},d.notEqual=function(e,t,n){e==t&&b(e,t,n,"!=",d.notEqual)},d.deepEqual=function(e,t,n){v(e,t,!1)||b(e,t,n,"deepEqual",d.deepEqual)},d.deepStrictEqual=function(e,t,n){v(e,t,!0)||b(e,t,n,"deepStrictEqual",d.deepStrictEqual)},d.notDeepEqual=function(e,t,n){v(e,t,!1)&&b(e,t,n,"notDeepEqual",d.notDeepEqual)},d.notDeepStrictEqual=function e(t,n,o){v(t,n,!0)&&b(t,n,o,"notDeepStrictEqual",e)},d.strictEqual=function(e,t,n){e!==t&&b(e,t,n,"===",d.strictEqual)},d.notStrictEqual=function(e,t,n){e===t&&b(e,t,n,"!==",d.notStrictEqual)},d.throws=function(e,t,n){y(!0,e,t,n)},d.doesNotThrow=function(e,t,n){y(!1,e,t,n)},d.ifError=function(e){if(e)throw e};var w=Object.keys||function(e){var t=[];for(var n in e)o.call(e,n)&&t.push(n);return t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"util/":35}],3:[function(f,p,e){(function(e){var t,n=f("util"),o=f("assert"),i=f("date-now"),r=Array.prototype.slice,a={};t=void 0!==e&&e.console?e.console:"undefined"!=typeof window&&window.console?window.console:{};for(var l=[[function(){},"log"],[function(){t.log.apply(t,arguments)},"info"],[function(){t.log.apply(t,arguments)},"warn"],[function(){t.warn.apply(t,arguments)},"error"],[function(e){a[e]=i()},"time"],[function(e){var t=a[e];if(!t)throw new Error("No such label: "+e);i()},"timeEnd"],[function(){var e=new Error;e.name="Trace",e.message=n.format.apply(null,arguments)},"trace"],[function(e){},"dir"],[function(e){if(!e){var t=r.call(arguments,1);o.ok(!1,n.format.apply(null,t))}},"assert"]],s=0;s<l.length;s++){var d=l[s],u=d[0],c=d[1];t[c]||(t[c]=u)}p.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{assert:2,"date-now":4,util:35}],4:[function(e,t,n){t.exports=function(){return(new Date).getTime()}},{}],5:[function(e,t,n){var d,u,o,c,f,p,h,s,b,v,g,m,i,r,y,a;d=jQuery,u=0,o=window.navigator.userAgent,c=0<o.indexOf("MSIE "),f=c?"-ie":"",p=!c&&(/mozilla/.test(o.toLowerCase())&&!/webkit/.test(o.toLowerCase())),h=[],s=["ffffff","000000","eeece1","1f497d","4f81bd","c0504d","9bbb59","8064a2","4bacc6","f79646"],b=["f2f2f2","7f7f7f","ddd9c3","c6d9f0","dbe5f1","f2dcdb","ebf1dd","e5e0ec","dbeef3","fdeada","d8d8d8","595959","c4bd97","8db3e2","b8cce4","e5b9b7","d7e3bc","ccc1d9","b7dde8","fbd5b5","bfbfbf","3f3f3f","938953","548dd4","95b3d7","d99694","c3d69b","b2a2c7","92cddc","fac08f","a5a5a5","262626","494429","17365d","366092","953734","76923c","5f497a","31859b","e36c09","7f7f7f","0c0c0c","1d1b10","0f243e","244061","632423","4f6128","3f3151","205867","974806"],v=["c00000","ff0000","ffc000","ffff00","92d050","00b050","00b0f0","0070c0","002060","7030a0"],g=[["003366","336699","3366cc","003399","000099","0000cc","000066"],["006666","006699","0099cc","0066cc","0033cc","0000ff","3333ff","333399"],["669999","009999","33cccc","00ccff","0099ff","0066ff","3366ff","3333cc","666699"],["339966","00cc99","00ffcc","00ffff","33ccff","3399ff","6699ff","6666ff","6600ff","6600cc"],["339933","00cc66","00ff99","66ffcc","66ffff","66ccff","99ccff","9999ff","9966ff","9933ff","9900ff"],["006600","00cc00","00ff00","66ff99","99ffcc","ccffff","ccccff","cc99ff","cc66ff","cc33ff","cc00ff","9900cc"],["003300","009933","33cc33","66ff66","99ff99","ccffcc","ffffff","ffccff","ff99ff","ff66ff","ff00ff","cc00cc","660066"],["333300","009900","66ff33","99ff66","ccff99","ffffcc","ffcccc","ff99cc","ff66cc","ff33cc","cc0099","993399"],["336600","669900","99ff33","ccff66","ffff99","ffcc99","ff9999","ff6699","ff3399","cc3399","990099"],["666633","99cc00","ccff33","ffff66","ffcc66","ff9966","ff6666","ff0066","d60094","993366"],["a58800","cccc00","ffff00","ffcc00","ff9933","ff6600","ff0033","cc0066","660033"],["996633","cc9900","ff9900","cc6600","ff3300","ff0000","cc0000","990033"],["663300","996600","cc3300","993300","990000","800000","993333"]],m="#0000ffff",i=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},r=function(e){return i(Number(e))},y=function(e){var t=i(e);return t+t+t},a=function(e){if(10<e.length){var t=1+e.indexOf("("),n=e.indexOf(")"),o=e.substring(t,n).split(",");return["#",r(o[0]),r(o[1]),r(o[2])].join("")}return e},d.widget("evol.colorpicker",{version:"3.3.1",options:{color:null,customTheme:null,showOn:"both",hideButton:!1,displayIndicator:!0,transparentColor:!1,history:!0,defaultPalette:"theme",strings:"Theme Colors,Standard Colors,Web Colors,Theme Colors,Back to Palette,History,No history yet."},_active:!1,_create:function(){var n=this;switch(this._paletteIdx="theme"==this.options.defaultPalette?1:2,this._id="evo-cp"+u++,this._enabled=!0,this.options.showOn=this.options.hideButton?"focus":this.options.showOn,this.element.get(0).tagName){case"INPUT":var e=this.options.color,t=this.element,o=("focus"===this.options.showOn?"":"evo-pointer ")+"evo-colorind"+(p?"-ff":f)+(this.options.hideButton?" evo-hidden-button":""),i="";this._isPopup=!0,this._palette=null;var r=t.val();null!==e?e!=r&&t.val(e).change():""!==r&&(e=this.options.color=r),e===m?o+=" evo-transparent":i=null!==e?"background-color:"+e:"",t.addClass("colorPicker "+this._id).wrap('<div style="width:'+(this.options.hideButton?this.element.width():this.element.width()+32)+"px;"+(c?"margin-bottom:-21px;":"")+(p?"padding:1px 0;":"")+'" class="evo-cp-wrap"></div>').after('<div class="'+o+'" style="'+i+'"></div>').on("keyup onpaste",function(e){var t=d(this).val();t!=n.options.color&&n._setValue(t,!0)});var a=this.options.showOn;"both"!==a&&"focus"!==a||t.on("focus",function(){n.showPalette()}),"both"!==a&&"button"!==a||t.next().on("click",function(e){return e.stopPropagation(),n.showPalette(),!1});break;default:this._isPopup=!1,this._palette=this.element.html(this._paletteHTML()).attr("aria-haspopup","true"),this._bindColors()}if(this.options.history&&(e&&this._add2History(e),this.options.initialHistory)){var l=this.options.initialHistory;for(var s in l)this._add2History(l[s])}},_paletteHTML:function(){var e=this._paletteIdx=Math.abs(this._paletteIdx),t=this.options,n=t.strings.split(","),o='<div class="evo-pop'+f+' ui-widget ui-widget-content ui-corner-all"'+(this._isPopup?' style="position:absolute"':"")+"><span>"+this["_paletteHTML"+e]()+'</span><div class="evo-more"><a href="javascript:void(0)">'+n[1+e]+"</a>";return t.history&&(o+='<a href="javascript:void(0)" class="evo-hist">'+n[5]+"</a>"),o+="</div>",t.displayIndicator&&(o+=this._colorIndHTML(this.options.color)+this._colorIndHTML("")),o+="</div>"},_colorIndHTML:function(e){var t=c?"evo-colorbox-ie ":"",n="";return e?e===m?t+="evo-transparent":n="background-color:"+e:n="display:none",'<div class="evo-color" style="float:left"><div style="'+n+'" class="'+t+'"></div><span>'+(e||"")+"</span></div>"},_paletteHTML1:function(){var e,t=this.options,n=t.strings.split(","),o='<td style="background-color:',i=c?'"><div style="width:2px;"></div></td>':'"><span/></td>',r='<tr><th colspan="10" class="ui-widget-content">',a='<table class="evo-palette'+f+'">'+r+n[0]+"</th></tr><tr>";if(t.customTheme)for(e=0,ml=t.customTheme.length;e<ml;e++)a+=o+t.customTheme[e]+i;else{for(o+="#",e=0;e<10;e++)a+=o+s[e]+i;for(a+="</tr>",c||(a+='<tr><th colspan="10"></th></tr>'),a+='<tr class="top">',e=0;e<10;e++)a+=o+b[e]+i;for(var l=1;l<4;l++)for(a+='</tr><tr class="in">',e=0;e<10;e++)a+=o+b[10*l+e]+i;for(a+='</tr><tr class="bottom">',e=40;e<50;e++)a+=o+b[e]+i;for(a+="</tr>"+r,t.transparentColor&&(a+='<div class="evo-transparent evo-tr-box"></div>'),a+=n[1]+"</th></tr><tr>",e=0;e<10;e++)a+=o+v[e]+i}return a+="</tr></table>"},_paletteHTML2:function(){for(var e,t,n='<td style="background-color:#',o=c?'"><div style="width:5px;"></div></td>':'"><span/></td>',i='<table class="evo-palette2'+f+'"><tr>',r="</tr></table>",a='<div class="evo-palcenter">',l=0,s=g.length;l<s;l++){a+=i;var d=g[l];for(e=0,t=d.length;e<t;e++)a+=n+d[e]+o;a+=r}a+='<div class="evo-sep"/>';var u="";for(a+=i,e=255;10<e;e-=10)a+=n+y(e)+o,u+=n+y(e-=10)+o;return a+=r+i+u+r+"</div>"},_switchPalette:function(e){if(this._enabled){var t,n,o,i=this.options,r=i.strings.split(",");if(d(e).hasClass("evo-hist")){var a='<table class="evo-palette"><tr><th class="ui-widget-content">'+r[5]+'</th></tr></tr></table><div class="evo-cHist">';if(0===h.length)a+="<p>&nbsp;"+r[6]+"</p>";else for(var l=h.length-1;-1<l;l--)9===h[l].length?i.transparentColor&&(a+='<div class="evo-transparent"></div>'):a+='<div style="background-color:'+h[l]+'"></div>';a+="</div>",t=-this._paletteIdx,n=a,o=r[4]}else this._paletteIdx<0?(t=-this._paletteIdx,this._palette.find(".evo-hist").show()):t=2==this._paletteIdx?1:2,n=this["_paletteHTML"+t](),o=r[t+1],this._paletteIdx=t;this._paletteIdx=t;var s=this._palette.find(".evo-more").prev().html(n).end().children().eq(0).html(o);t<0&&s.next().hide()}},_downOrUpPositioning:function(){for(var e=this.element,t=0;null!==e&&t<100;){if("visible"!=e.css("overflow")){var n=this._palette.offset().top+this._palette.height(),o=e.offset().top+e.height(),i=this._palette.offset().top-this._palette.height()-this.element.outerHeight(),r=e.offset().top;o<n&&r<i?this._palette.css({bottom:this.element.outerHeight()+"px"}):this._palette.css({bottom:"auto"});break}if("HTML"==e[0].tagName)break;e=e.offsetParent(),t++}},showPalette:function(){if(this._enabled&&(this._active=!0,d(".colorPicker").not("."+this._id).colorpicker("hidePalette"),null===this._palette)){this._palette=this.element.next().after(this._paletteHTML()).next().on("click",function(e){return e.stopPropagation(),!1}),this._bindColors();var t=this;this._isPopup&&(this._downOrUpPositioning(),d(document.body).on("click."+t._id,function(e){e.target!=t.element.get(0)&&t.hidePalette()}).on("keyup."+t._id,function(e){27===e.keyCode&&t.hidePalette()}))}return this},hidePalette:function(){if(this._isPopup&&this._palette){d(document.body).off("click."+this._id);var e=this;this._palette.off("mouseover click","td,.evo-transparent").fadeOut(function(){e._palette.remove(),e._palette=e._cTxt=null}).find(".evo-more a").off("click")}return this},_bindColors:function(){var o=this,e=this.options,t=this._palette.find("div.evo-color"),n=e.history?"td,.evo-cHist>div":"td";e.transparentColor&&(n+=",.evo-transparent"),this._cTxt1=t.eq(0).children().eq(0),this._cTxt2=t.eq(1).children().eq(0),this._palette.on("click",n,function(e){if(o._enabled){var t=d(this);o._setValue(t.hasClass("evo-transparent")?m:a(t.attr("style").substring(17))),o._active=!1}}).on("mouseover",n,function(e){if(o._enabled){var t=d(this),n=t.hasClass("evo-transparent")?m:a(t.attr("style").substring(17));o.options.displayIndicator&&o._setColorInd(n,2),o._active&&o.element.trigger("mouseover.color",n)}}).find(".evo-more a").on("click",function(){o._switchPalette(this)})},val:function(e){return void 0===e?this.options.color:(this._setValue(e),this)},_setValue:function(e,t){e=e.replace(/ /g,""),this.options.color=e,this._isPopup?(t||this.hidePalette(),this._setBoxColor(this.element.val(e).change().next(),e)):this._setColorInd(e,1),this.options.history&&0<this._paletteIdx&&this._add2History(e),this.element.trigger("change.color",e)},_setColorInd:function(e,t){var n=this["_cTxt"+t];this._setBoxColor(n,e),n.next().html(e)},_setBoxColor:function(e,t){t===m?e.addClass("evo-transparent").removeAttr("style"):e.removeClass("evo-transparent").attr("style","background-color:"+t)},_setOption:function(e,t){"color"==e?this._setValue(t,!0):this.options[e]=t},_add2History:function(e){for(var t=h.length,n=0;n<t;n++)if(e==h[n])return;27<t&&h.shift(),h.push(e)},clear:function(){this.hidePalette().val("")},enable:function(){var e=this.element;return this._isPopup?e.removeAttr("disabled"):e.css({opacity:"1","pointer-events":"auto"}),"focus"!==this.options.showOn&&this.element.next().addClass("evo-pointer"),e.removeAttr("aria-disabled"),this._enabled=!0,this},disable:function(){var e=this.element;return this._isPopup?e.attr("disabled","disabled"):(this.hidePalette(),e.css({opacity:"0.3","pointer-events":"none"})),"focus"!==this.options.showOn&&this.element.next().removeClass("evo-pointer"),e.attr("aria-disabled","true"),this._enabled=!1,this},isDisabled:function(){return!this._enabled},destroy:function(){d(document.body).off("click."+this._id),this._palette&&(this._palette.off("mouseover click","td,.evo-cHist>div,.evo-transparent").find(".evo-more a").off("click"),this._isPopup&&this._palette.remove(),this._palette=this._cTxt=null),this._isPopup&&this.element.next().off("click").remove().end().off("focus").unwrap(),this.element.removeClass("colorPicker "+this.id).empty(),d.Widget.prototype.destroy.call(this)}})},{}],6:[function(e,i,r){!function(e){"use strict";var k="Compound",_="MemberExpression",j="Literal",O=function(e,t){var n=new Error(e+" at character "+t);throw n.index=t,n.description=e,n},S={"-":!0,"!":!0,"~":!0,"+":!0},A={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},t=function(e){var t,n=0;for(var o in e)(t=o.length)>n&&e.hasOwnProperty(o)&&(n=t);return n},$=t(S),C=t(A),E={true:!0,false:!1,null:null},T=function(e){return A[e]||0},M=function(e,t,n){return{type:"||"===e||"&&"===e?"LogicalExpression":"BinaryExpression",operator:e,left:t,right:n}},I=function(e){return 48<=e&&e<=57},H=function(e){return 36===e||95===e||65<=e&&e<=90||97<=e&&e<=122||128<=e&&!A[String.fromCharCode(e)]},B=function(e){return 36===e||95===e||65<=e&&e<=90||97<=e&&e<=122||48<=e&&e<=57||128<=e&&!A[String.fromCharCode(e)]},n=function(o){for(var e,t,s=0,n=o.charAt,i=o.charCodeAt,r=function(e){return n.call(o,e)},a=function(e){return i.call(o,e)},l=o.length,d=function(){for(var e=a(s);32===e||9===e||10===e||13===e;)e=a(++s)},u=function(){var e,t,n=f();return d(),63!==a(s)?n:(s++,(e=u())||O("Expected expression",s),d(),58===a(s)?(s++,(t=u())||O("Expected expression",s),{type:"ConditionalExpression",test:n,consequent:e,alternate:t}):void O("Expected :",s))},c=function(){d();for(var e=o.substr(s,C),t=e.length;0<t;){if(A.hasOwnProperty(e)&&(!H(a(s))||s+e.length<o.length&&!B(a(s+e.length))))return s+=t,e;e=e.substr(0,--t)}return!1},f=function(){var e,t,n,o,i,r,a,l;if(r=p(),!(t=c()))return r;for(i={value:t,prec:T(t)},(a=p())||O("Expected expression after "+t,s),o=[r,i,a];(t=c())&&0!==(n=T(t));){for(i={value:t,prec:n};2<o.length&&n<=o[o.length-2].prec;)a=o.pop(),t=o.pop().value,r=o.pop(),e=M(t,r,a),o.push(e);(e=p())||O("Expected expression after "+t,s),o.push(i,e)}for(e=o[l=o.length-1];1<l;)e=M(o[l-1].value,o[l-2],e),l-=2;return e},p=function(){var e,t,n;if(d(),e=a(s),I(e)||46===e)return h();if(39===e||34===e)return b();if(91===e)return w();for(n=(t=o.substr(s,$)).length;0<n;){if(S.hasOwnProperty(t)&&(!H(a(s))||s+t.length<o.length&&!B(a(s+t.length))))return s+=n,{type:"UnaryExpression",operator:t,argument:p(),prefix:!0};t=t.substr(0,--n)}return!(!H(e)&&40!==e)&&m()},h=function(){for(var e,t,n="";I(a(s));)n+=r(s++);if(46===a(s))for(n+=r(s++);I(a(s));)n+=r(s++);if("e"===(e=r(s))||"E"===e){for(n+=r(s++),"+"!==(e=r(s))&&"-"!==e||(n+=r(s++));I(a(s));)n+=r(s++);I(a(s-1))||O("Expected exponent ("+n+r(s)+")",s)}return t=a(s),H(t)?O("Variable names cannot start with a number ("+n+r(s)+")",s):46===t&&O("Unexpected period",s),{type:j,value:parseFloat(n),raw:n}},b=function(){for(var e,t="",n=r(s++),o=!1;s<l;){if((e=r(s++))===n){o=!0;break}if("\\"===e)switch(e=r(s++)){case"n":t+="\n";break;case"r":t+="\r";break;case"t":t+="\t";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:t+=e}else t+=e}return o||O('Unclosed quote after "'+t+'"',s),{type:j,value:t,raw:n+t+n}},v=function(){var e,t=a(s),n=s;for(H(t)?s++:O("Unexpected "+r(s),s);s<l&&(t=a(s),B(t));)s++;return e=o.slice(n,s),E.hasOwnProperty(e)?{type:j,value:E[e],raw:e}:"this"===e?{type:"ThisExpression"}:{type:"Identifier",name:e}},g=function(e){for(var t,n,o=[],i=!1;s<l;){if(d(),(t=a(s))===e){i=!0,s++;break}44===t?s++:((n=u())&&n.type!==k||O("Expected comma",s),o.push(n))}return i||O("Expected "+String.fromCharCode(e),s),o},m=function(){var e,t;for(t=40===(e=a(s))?y():v(),d(),e=a(s);46===e||91===e||40===e;)s++,46===e?(d(),t={type:_,computed:!1,object:t,property:v()}):91===e?(t={type:_,computed:!0,object:t,property:u()},d(),93!==(e=a(s))&&O("Unclosed [",s),s++):40===e&&(t={type:"CallExpression",arguments:g(41),callee:t}),d(),e=a(s);return t},y=function(){s++;var e=u();if(d(),41===a(s))return s++,e;O("Unclosed (",s)},w=function(){return s++,{type:"ArrayExpression",elements:g(93)}},x=[];s<l;)59===(e=a(s))||44===e?s++:(t=u())?x.push(t):s<l&&O('Unexpected "'+r(s)+'"',s);return 1===x.length?x[0]:{type:k,body:x}};if(n.version="0.3.4",n.toString=function(){return"JavaScript Expression Parser (JSEP) v"+n.version},n.addUnaryOp=function(e){return $=Math.max(e.length,$),S[e]=!0,this},n.addBinaryOp=function(e,t){return C=Math.max(e.length,C),A[e]=t,this},n.addLiteral=function(e,t){return E[e]=t,this},n.removeUnaryOp=function(e){return delete S[e],e.length===$&&($=t(S)),this},n.removeAllUnaryOps=function(){return S={},$=0,this},n.removeBinaryOp=function(e){return delete A[e],e.length===C&&(C=t(A)),this},n.removeAllBinaryOps=function(){return A={},C=0,this},n.removeLiteral=function(e){return delete E[e],this},n.removeAllLiterals=function(){return E={},this},void 0===r){var o=e.jsep;(e.jsep=n).noConflict=function(){return e.jsep===n&&(e.jsep=o),n}}else void 0!==i&&i.exports?r=i.exports=n:r.parse=n}(this)},{}],7:[function(e,t,n){"use strict";var y=e("./utils");t.exports=function(g){function c(p,e,h){h=h||{};var t=y.parseCSS(e),b=[],v="style";if(h.styleAttributeName&&(v=h.styleAttributeName),t.forEach(function(e){for(var t,n=e[0],i=e[1],r=new y.Selector(n),o=r.parsed(),a=function(e){if(0===e.length)return;var t=e[e.length-1].pseudos;if(!t)return;for(var n=0;n<t.length;n++)if(m(t[n]))return t[n].name}(o),l=0;l<o.length;++l){var s=o[l];if(s.pseudos)for(var d=0;d<s.pseudos.length;++d){var u=s.pseudos[d];if(0<=g.ignoredPseudos.indexOf(u.name))return}}if(a){var c=o[o.length-1],f=c.pseudos;c.pseudos=c.pseudos.filter(function(e){return!m(e)}),n=o.toString(),c.pseudos=f}try{t=p(n)}catch(e){return}t.each(function(){var u=this;if(!(u.name&&0<=g.nonVisualElements.indexOf(u.name.toUpperCase()))){if(a){var e="pseudo"+a,t=u[e];t||((t=u[e]=p("<span />").get(0)).pseudoElementType=a,(t.pseudoElementParent=u)[e]=t),u=t}if(!u.styleProps){if(u.styleProps={},p(u).attr(v)){var n="* { "+p(u).attr(v)+" } ";o(y.parseCSS(n)[0][1],new y.Selector("<style>",!0))}b.push(u)}o(i,r)}function o(e,t){for(var n=0,o=e.length;n<o;n++)if("property"==e[n].type){var i=e[n].name,r=e[n].value,a=null!==e[n].value.match(/!important$/);a&&!h.preserveImportant&&(r=r.replace(/\s*!important$/,""));var l=[e[n].position.start.line,e[n].position.start.col],s=new y.Property(i,r,t,a?2:0,l),d=u.styleProps[i];g.excludedProperties.indexOf(i)<0&&(d&&d.compare(s)===s||!d)&&(d&&d.selector!==t?delete u.styleProps[i]:d&&(s.nextProp=d),u.styleProps[i]=s)}}})}),b.forEach(function(n){Object.keys(n.styleProps).length;var o=[];Object.keys(n.styleProps).forEach(function(e){for(var t=n.styleProps[e];void 0!==t;)o.push(t),t=t.nextProp}),o.sort(function(e,t){return e.compareFunc(t)});var e=o.filter(function(e){return"content"!==e.prop}).map(function(e){return e.prop+": "+e.value.replace(/["]/g,"'")+";"}).join(" ");e&&p(n).attr(v,e)}),h.inlinePseudoElements&&b.forEach(function(e){if(e.pseudoElementType&&e.styleProps.content){var t=function(e){if("none"===e||"normal"===e)return"";var t=e.match(/^\s*url\s*\(\s*(.*?)\s*\)\s*$/i);if(t){var n=t[1].replace(/^['"]|['"]$/g,"");return{img:n}}return e=(e=e.slice(1,e.length-1)).replace(/\\/g,"")}(e.styleProps.content.value);t.img?(e.name="img",p(e).attr("src",t.img)):p(e).text(t);var n=e.pseudoElementParent;"before"===e.pseudoElementType?p(n).prepend(e):p(n).append(e)}}),h.applyWidthAttributes&&b.forEach(function(e){i(e,"width")}),h.applyHeightAttributes&&b.forEach(function(e){i(e,"height")}),h.applyAttributesTableElements&&b.forEach(function(e){if(!e.name)return;var t=e.name.toUpperCase(),n=Object.keys(g.styleToAttribute);if(-1<g.tableElements.indexOf(t))for(var o in e.styleProps)if(-1<n.indexOf(e.styleProps[o].prop)){var i=g.styleToAttribute[e.styleProps[o].prop],r=e.styleProps[o].value;"background"===i&&(r=0!==(a=r).indexOf("url(")?a:a.replace(/^url\((["'])?([^"']+)\1\)$/,"$2")),p(e).attr(i,r)}var a}),h.insertPreservedExtraCss&&h.extraCss){var n=y.getPreservedText(h.extraCss,{mediaQueries:h.preserveMediaQueries,fontFaces:h.preserveFontFaces,keyFrames:h.preserveKeyFrames});if(n){var o=null;!0!==h.insertPreservedExtraCss?o=p(h.insertPreservedExtraCss):((o=p("head")).length||(o=p("body")),o.length||(o=p.root())),o.first().append("<style>"+n+"</style>")}}function i(e,t){if(e.name){var n=e.name.toUpperCase();if(-1<g[t+"Elements"].indexOf(n))for(var o in e.styleProps)if(e.styleProps[o].prop===t){if(e.styleProps[o].value.match(/px/)){var i=e.styleProps[o].value.replace("px","");return void p(e).attr(t,i)}if(-1<g.tableElements.indexOf(n)&&e.styleProps[o].value.match(/\%/))return void p(e).attr(t,e.styleProps[o].value)}}}}function m(e){return"before"===e.name||"after"===e.name}return g.ignoredPseudos=["hover","active","focus","visited","link"],g.widthElements=["TABLE","TD","IMG"],g.heightElements=["TABLE","TD","IMG"],g.tableElements=["TABLE","TD","TH","TR","TD","CAPTION","COLGROUP","COL","THEAD","TBODY","TFOOT"],g.nonVisualElements=["HEAD","TITLE","BASE","LINK","STYLE","META","SCRIPT","NOSCRIPT"],g.styleToAttribute={"background-color":"bgcolor","background-image":"background","text-align":"align","vertical-align":"valign"},g.excludedProperties=[],g.juiceDocument=function(e,t){t=y.getDefaultOptions(t);var n=(o=e,i=t,(r=o,a=i,u=[],r("style").each(function(){if(1===(l=(d=this).childNodes).length){if(s=l[0].data,a.applyStyleTags&&void 0===r(d).attr("data-embed")&&u.push(s),a.removeStyleTags&&void 0===r(d).attr("data-embed")){var e=y.getPreservedText(d.childNodes[0].nodeValue,{mediaQueries:a.preserveMediaQueries,fontFaces:a.preserveFontFaces,keyFrames:a.preserveKeyFrames});e?d.childNodes[0].nodeValue=e:r(d).remove()}r(d).removeAttr("data-embed")}}),u).join("\n"));var o,i,r,a,l,s,d,u;return n+="\n"+t.extraCss,c(e,n,t),e},g.inlineDocument=c,g}},{"./utils":10}],8:[function(e,t,n){"use strict";t.exports=i;var o=e("./utils");function i(e,t,n,o,i){this.prop=e,this.value=t,this.selector=n,this.priority=o||0,this.additionalPriority=i||[]}i.prototype.compareFunc=function(e){var t=[];t.push.apply(t,this.selector.specificity()),t.push.apply(t,this.additionalPriority),t[0]+=this.priority;var n=[];return n.push.apply(n,e.selector.specificity()),n.push.apply(n,e.additionalPriority),n[0]+=e.priority,o.compareFunc(t,n)},i.prototype.compare=function(e){return 1===this.compareFunc(e)?this:e},i.prototype.toString=function(){return this.prop+": "+this.value.replace(/['"]+/g,"")+";"}},{"./utils":10}],9:[function(e,t,n){"use strict";var o=e("slick/parser");function i(e,t){this.text=e,this.spec=void 0,this.styleAttribute=t||!1}function h(e){try{return o(e)[0]}catch(e){return[]}}t.exports=i,i.prototype.parsed=function(){return this.tokens||(this.tokens=h(this.text)),this.tokens},i.prototype.specificity=function(){var p=this.styleAttribute;return this.spec||(this.spec=function e(t,n){var o=n||h(t);var i=[p?1:0,0,0,0];var r=[];for(var a=0;a<o.length;a++){var l=o[a],s=l.pseudos;if(l.id&&i[1]++,l.attributes&&(i[2]+=l.attributes.length),l.classList&&(i[2]+=l.classList.length),l.tag&&"*"!==l.tag&&i[3]++,s){i[3]+=s.length;for(var d=0;d<s.length;d++)"not"===s[d].name&&(r.push(s[d].value),i[3]--)}}for(var u=r.length;u--;)for(var c=e(r[u]),f=4;f--;)i[f]+=c[f];return i}(this.text,this.parsed())),this.spec}},{"slick/parser":26}],10:[function(e,t,n){"use strict";var u=e("mensch"),o={}.hasOwnProperty,i=e("./selector"),r=e("./property");n.Selector=i,n.Property=r,n.extract=function(e){for(var t=0,n=[],o="",i=0,r=e.length;i<r;i++){var a=e.charAt(i);t?("]"!==a&&")"!==a||t--,o+=a):","===a?(n.push(o),o=""):("["!==a&&"("!==a||t++,(o.length||","!==a&&"\n"!==a&&" "!==a)&&(o+=a))}return o.length&&n.push(o),n},n.parseCSS=function(e){for(var t=u.parse(e,{position:!0,comments:!0}),n=void 0!==t.stylesheet&&t.stylesheet.rules?t.stylesheet.rules:[],o=[],i=0,r=n.length;i<r;i++)if("rule"==n[i].type)for(var a=n[i],l=a.selectors,s=0,d=l.length;s<d;s++)o.push([l[s],a.declarations]);return o},n.getPreservedText=function(e,t){for(var n=u.parse(e,{position:!0,comments:!0}),o=void 0!==n.stylesheet&&n.stylesheet.rules?n.stylesheet.rules:[],i=[],r=o.length-1;0<=r;r--)(t.fontFaces&&"font-face"===o[r].type||t.mediaQueries&&"media"===o[r].type||t.keyFrames&&"keyframes"===o[r].type)&&i.unshift(u.stringify({stylesheet:{rules:[o[r]]}},{comments:!1,indentation:"  "})),o[r].position.start;return 0!==i.length&&"\n"+i.join("\n")+"\n"},n.normalizeLineEndings=function(e){return e.replace(/\r\n/g,"\n").replace(/\n/g,"\r\n")},n.compareFunc=function(e,t){for(var n=Math.min(e.length,t.length),o=0;o<n;o++)if(e[o]!==t[o])return e[o]>t[o]?1:-1;return e.length-t.length},n.compare=function(e,t){return 1==n.compareFunc(e,t)?e:t},n.extend=function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);return e},n.getDefaultOptions=function(e){var t=n.extend({extraCss:"",insertPreservedExtraCss:!0,applyStyleTags:!0,removeStyleTags:!0,preserveMediaQueries:!0,preserveFontFaces:!0,preserveKeyFrames:!0,applyWidthAttributes:!0,applyHeightAttributes:!0,applyAttributesTableElements:!0,url:""},e);return t.webResources=t.webResources||{},t}},{"./property":8,"./selector":9,mensch:16}],11:[function(i,r,a){(function(o){!function(e){if("function"==typeof i&&"object"==typeof a&&"object"==typeof r){var t="undefined"!=typeof window?window.ko:void 0!==o?o.ko:null,n="undefined"!=typeof window?window.jQuery:void 0!==o?o.jQuery:null;"undefined"!=typeof window?window.jQuery.ui.sortable:void 0!==o&&o.jQuery.ui.sortable,"undefined"!=typeof window?window.jQuery.ui.draggable:void 0!==o&&o.jQuery.ui.draggable,"undefined"!=typeof window?window.jQuery.ui.droppable:void 0!==o&&o.jQuery.ui.droppable,e(t,n)}else e(window.ko,window.jQuery)}(function(v,g){var m="ko_sortItem",y="ko_sourceIndex",w="ko_sortList",x="ko_parentList",k="ko_dragItem",_=v.utils.unwrapObservable,j=v.utils.domData.get,O=v.utils.domData.set,e=g.ui&&g.ui.version,S=e&&e.indexOf("1.6.")&&e.indexOf("1.7.")&&(e.indexOf("1.8.")||"1.8.24"===e),r=function(e,t){v.utils.arrayForEach(e,function(e){1===e.nodeType&&(O(e,m,t),O(e,x,j(e.parentNode,w)))})},A=function(e,t){var n,o={},i=_(e())||{};return i.data?(o[t]=i.data,o.name=i.template):o[t]=e(),v.utils.arrayForEach(["afterAdd","afterRender","as","beforeRemove","includeDestroyed","templateEngine","templateOptions","nodes"],function(e){i.hasOwnProperty(e)?o[e]=i[e]:v.bindingHandlers.sortable.hasOwnProperty(e)&&(o[e]=v.bindingHandlers.sortable[e])}),"foreach"===t&&(o.afterRender?(n=o.afterRender,o.afterRender=function(e,t){r.call(t,e,t),n.call(t,e,t)}):o.afterRender=r),o},$=function(e,t){var n=_(t);if(n)for(var o=0;o<e;o++)n[o]&&_(n[o]._destroy)&&e++;return e};v.bindingHandlers.sortable={init:function(o,e,t,n,i){var r,f,a,l,s,d,u=g(o),c=_(e())||{},p=A(e,"foreach"),h={};a=o,(l=p.name)?(d=document.getElementById(l))&&(s=new v.templateSources.domElement(d)).text(g.trim(s.text())):g(a).contents().each(function(){this&&1!==this.nodeType&&a.removeChild(this)}),g.extend(!0,h,v.bindingHandlers.sortable),c.options&&h.options&&(v.utils.extend(h.options,c.options),delete c.options),v.utils.extend(h,c),h.connectClass&&(v.isObservable(h.allowDrop)||"function"==typeof h.allowDrop)?v.computed({read:function(){var e=_(h.allowDrop),t="function"==typeof e?e.call(this,p.foreach):e;v.utils.toggleDomNodeCssClass(o,h.connectClass,t)},disposeWhenNodeIsRemoved:o},this):v.utils.toggleDomNodeCssClass(o,h.connectClass,h.allowDrop),v.bindingHandlers.template.init(o,function(){return p},t,n,i),r=h.options.start,f=h.options.update,h.options.helper||(h.options.helper=function(e,t){return t.is("tr")&&t.children().each(function(){g(this).width(g(this).width())}),t});var b=setTimeout(function(){var c,n=h.options.receive;u.sortable(v.utils.extend(h.options,{start:function(e,t){var n=t.item[0];O(n,y,v.utils.arrayIndexOf(t.item.parent().children(),n)),t.item.find("input:focus").change(),r&&r.apply(this,arguments)},receive:function(e,t){"function"==typeof n&&n.call(this,e,t),(c=j(t.item[0],k))&&(c.clone&&(c=c.clone()),h.dragged&&(c=h.dragged.call(this,c,e,t)||c))},update:function(e,t){var n,o,i,r,a,l=t.item[0],s=t.item.parent()[0],d=j(l,m)||c;if(d||g(l).remove(),c=null,d&&this===s||!S&&g.contains(this,s)){if(n=j(l,x),i=j(l,y),o=j(l.parentNode,w),r=v.utils.arrayIndexOf(t.item.parent().children(),l),p.includeDestroyed||(i=$(i,n),r=$(r,o)),(h.beforeMove||h.afterMove)&&(a={item:d,sourceParent:n,sourceParentNode:n&&t.sender||l.parentNode,sourceIndex:i,targetParent:o,targetIndex:r,cancelDrop:!1},h.beforeMove&&h.beforeMove.call(this,a,e,t)),n?g(n===o?this:t.sender||this).sortable("cancel"):g(l).remove(),a&&a.cancelDrop)return;if(h.hasOwnProperty("strategyMove")&&!1!==h.strategyMove){if(0<=r)if(n)if(n!==o)n.splice(i,1),o.splice(r,0,d),O(l,m,null),t.item.remove();else{var u=_(n);n.valueWillMutate&&n.valueWillMutate(),u.splice(i,1),u.splice(r,0,d),n.valueHasMutated&&n.valueHasMutated()}else o.splice(r,0,d),O(l,m,null),t.item.remove()}else 0<=r&&(n&&(n.splice(i,1),v.processAllDeferredBindingUpdates&&v.processAllDeferredBindingUpdates(),v.options&&v.options.deferUpdates&&v.tasks.runEarly()),o.splice(r,0,d)),O(l,m,null);v.processAllDeferredBindingUpdates&&v.processAllDeferredBindingUpdates(),h.afterMove&&h.afterMove.call(this,a,e,t)}f&&f.apply(this,arguments)},connectWith:!!h.connectClass&&"."+h.connectClass})),void 0!==h.isEnabled&&v.computed({read:function(){u.sortable(_(h.isEnabled)?"enable":"disable")},disposeWhenNodeIsRemoved:o})},0);return v.utils.domNodeDisposal.addDisposeCallback(o,function(){(u.data("ui-sortable")||u.data("sortable"))&&u.sortable("destroy"),v.utils.toggleDomNodeCssClass(o,h.connectClass,!1),clearTimeout(b)}),{controlsDescendantBindings:!0}},update:function(e,t,n,o,i){var r=A(t,"foreach");O(e,w,r.foreach),v.bindingHandlers.template.update(e,function(){return r},n,o,i)},connectClass:"ko_container",allowDrop:!0,afterMove:null,beforeMove:null,options:{}},v.bindingHandlers.draggable={init:function(e,t,n,o,i){var r=_(t())||{},a=r.options||{},l=v.utils.extend({},v.bindingHandlers.draggable.options),s=A(t,"data"),d=r.connectClass||v.bindingHandlers.draggable.connectClass,u=void 0!==r.isEnabled?r.isEnabled:v.bindingHandlers.draggable.isEnabled;return r="data"in r?r.data:r,O(e,k,r),v.utils.extend(l,a),l.connectToSortable=!!d&&"."+d,g(e).draggable(l),void 0!==u&&v.computed({read:function(){g(e).draggable(_(u)?"enable":"disable")},disposeWhenNodeIsRemoved:e}),v.utils.domNodeDisposal.addDisposeCallback(e,function(){g(e).draggable("destroy")}),v.bindingHandlers.template.init(e,function(){return s},n,o,i)},update:function(e,t,n,o,i){var r=A(t,"data");return v.bindingHandlers.template.update(e,function(){return r},n,o,i)},connectClass:v.bindingHandlers.sortable.connectClass,options:{helper:"clone"}},v.bindingHandlers.droppable={init:function(e,t,n,o,i){var r=_(t())||{},a=r.options||{},l=v.utils.extend({},v.bindingHandlers.droppable.options),s=void 0!==r.isEnabled?r.isEnabled:v.bindingHandlers.droppable.isEnabled;v.utils.extend(l,a),r="data"in r?r.data:t(),l.drop=function(e,t){var n=j(t.draggable[0],k)||j(t.draggable[0],m);r(n)},g(e).droppable(l),void 0!==s&&v.computed({read:function(){g(e).droppable(_(s)?"enable":"disable")},disposeWhenNodeIsRemoved:e}),v.utils.domNodeDisposal.addDisposeCallback(e,function(){g(e).droppable("destroy")})},options:{accept:"*"}}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(t,n,o){(function(e){(function(y){y.subscribable.fn.watch=function(e,t,n,o){var i=typeof e;return"boolean"===i||"undefined"===i?y.watch(this,{enabled:!1!==e}):"function"!==i||y.isSubscribable(e)?y.watch(e,t,n,o||this):y.watch(this,t||{},e,o||this),this},y.watch=function(p,h,b,v){function g(i,e,t,r,a,n){if(i&&0!==h.depth&&(-1===h.depth||t.length<(h.depth||1))){if(h.watchedOnly&&!i.watchable&&i!=p)return;if(!1!==h.enabled&&!0!==h.enabled||(i.watchable=h.enabled),!1===i.watchable)return;!0===h.seal&&(i.watchable=!1);var o=typeof i;if("object"===o||"function"===o){if(i._watcher===v)return;if(h.hide&&-1<y.utils.arrayIndexOf(h.hide,i))return;var l=[].concat(t,e&&e!==p?e:[]);if("function"!==o){if("[object Object]"===Object.prototype.toString.call(i))y.utils.objectForEach(i,function(e,t){if(t=h.getter?h.getter.call(v,l,i,e):t){if(h.wrap){var n=Object.prototype.toString.call(t);"[object Function]"!==n&&"[object Object]"!==n&&(h.beforeWrap&&!1===h.beforeWrap.call(v,l,i,t)||(t=i[e]="[object Array]"===n?y.observableArray(t):y.observable(t)))}h.unloop&&(t._watcher=r?void 0:v);var o=g(t,a?null:i,l,r,null,e);h.tagFields&&void 0===t._fieldName&&(o||"parentsOnly"!==h.tagFields&&"function"==typeof t||"object"==typeof t)&&(t._fieldName=e)}});else if(!0!==h.hideArrays)for(var s=0;s<i.length;s++)g(i[s],a?null:i,l,r);return!0}if("function"==typeof i.notifySubscribers&&b){if(!0===h.enabled&&!1===i.watchable)return;if(r||!h.beforeWatch||!1!==h.beforeWatch.call(v,l,i,n)){var d="function"==typeof i.pop;if(r?function(e){var t=e[m];if(!t)throw"Subscriptions field (."+m+") not defined for observable child "+(e._fieldName||"");if(t.change)for(n=t.change.length-1;0<=n;n--)t.change[n]._watcher===v&&t.change[n].dispose();if(t.beforeChange&&(h.mutable||0<h.oldValues))for(n=t.beforeChange.length-1;0<=n;n--)t.beforeChange[n]._watcher===v&&t.beforeChange[n].dispose();if(t.arrayChange)for(var n=t.arrayChange.length-1;0<=n;n--)t.arrayChange[n]._watcher===v&&t.arrayChange[n].dispose()}(i):(u=i,c=l,f=a,d?u.subscribe(function(e){var t;!1===h.splitArrayChanges&&void 0!==(t=b.call(v,c,u,e))&&v(t),y.utils.arrayForEach(e,function(e){if(!1!==h.splitArrayChanges){var t=b.call(v,c,u,e);void 0!==t&&v(t)}e.moved||(!1===h.async?g(e.value,f?null:u,c,"deleted"===e.status):setTimeout(function(){g(e.value,f?null:u,c,"deleted"===e.status)}))})},void 0,"arrayChange")._watcher=v:(u.subscribe(function(){if(!1!==u.watchable){var e=b.call(v,c,u);void 0!==e&&v(e),h.mutable&&"object"==typeof u()&&(!1===h.async?g(u(),f?null:u,c,!1,!0):setTimeout(function(){g(u(),f?null:u,c,!1,!0)}))}},null,"change")._watcher=v,(0<h.oldValues||h.mutable)&&(u.subscribe(function(e){if(0<h.oldValues){var t=u.oldValues?u.oldValues:u.oldValues=[];for(t.unshift(e);t.length>h.oldValues;)t.pop()}h.mutable&&"object"==typeof e&&g(e,f?null:u,c,!0,!0)},null,"beforeChange")._watcher=v))),d)return g(i(),a?null:i,l,r,!0),!0;if(!0!==h.hideWrappedValues)return g(i(),a?null:i,l,r,!0)}}}}var u,c,f}var m;switch("function"==typeof h&&(v=v||b,b=h,h={}),v=v||this,"function"==typeof y.subscription||y.version){case!0:m="_subscriptions";break;case"3.0.0":m="F";break;case"3.1.0":m="H";break;case"3.2.0":m="M";break;case"3.3.0":m="G";break;case"3.4.0":case"3.4.1":m="K";break;case"3.4.2":m="F";break;case"3.5.0-beta":m="S";break;default:throw"Unsupported Knockout version. Only v3.0.0 to v3.5.0-beta are supported when minified. Current version is "+y.version}return"function"!=typeof p||y.isSubscribable(p)?(g(p,null,[]),{dispose:function(){g(p,null,[],!0)}}):y.computed(p,b,h)}})("function"==typeof t&&"object"==typeof o&&"object"==typeof n?"undefined"!=typeof window?window.ko:void 0!==e?e.ko:null:window.ko),window.foo="1.4.0"}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(e,i,t){(function(e){var r=NaN,a="[object Symbol]",l=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt,t="object"==typeof e&&e&&e.Object===Object&&e,n="object"==typeof self&&self&&self.Object===Object&&self,o=t||n||Function("return this")(),f=Object.prototype.toString,m=Math.max,y=Math.min,w=function(){return o.Date.now()};function x(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function k(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||(n=t)&&"object"==typeof n&&f.call(t)==a)return r;var t,n;if(x(e)){var o="function"==typeof e.valueOf?e.valueOf():e;e=x(o)?o+"":o}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(l,"");var i=d.test(e);return i||u.test(e)?c(e.slice(2),i?2:8):s.test(e)?r:+e}i.exports=function(o,i,e){var r,a,l,s,d,u,c=0,f=!1,p=!1,t=!0;if("function"!=typeof o)throw new TypeError("Expected a function");function h(e){var t=r,n=a;return r=a=void 0,c=e,s=o.apply(n,t)}function b(e){var t=e-u;return void 0===u||i<=t||t<0||p&&l<=e-c}function v(){var e,t,n=w();if(b(n))return g(n);d=setTimeout(v,(t=i-((e=n)-u),p?y(t,l-(e-c)):t))}function g(e){return d=void 0,t&&r?h(e):(r=a=void 0,s)}function n(){var e,t=w(),n=b(t);if(r=arguments,a=this,u=t,n){if(void 0===d)return c=e=u,d=setTimeout(v,i),f?h(e):s;if(p)return d=setTimeout(v,i),h(u)}return void 0===d&&(d=setTimeout(v,i)),s}return i=k(i)||0,x(e)&&(f=!!e.leading,l=(p="maxWait"in e)?m(k(e.maxWait)||0,i):l,t="trailing"in e?!!e.trailing:t),n.cancel=function(){void 0!==d&&clearTimeout(d),r=u=a=d=void(c=0)},n.flush=function(){return void 0===d?s:g(w())},n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(e,gt,mt){(function(e){var t="Expected a function",o="__lodash_hash_undefined__",g=1,w=2,l=1/0,n=9007199254740991,s=17976931348623157e292,d=NaN,m="[object Arguments]",y="[object Array]",x="[object Boolean]",k="[object Date]",_="[object Error]",i="[object Function]",r="[object GeneratorFunction]",j="[object Map]",O="[object Number]",S="[object Object]",a="[object Promise]",A="[object RegExp]",$="[object Set]",C="[object String]",E="[object Symbol]",u="[object WeakMap]",T="[object ArrayBuffer]",M="[object DataView]",c=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f=/^\w*$/,p=/^\./,h=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,b=/^\s+|\s+$/g,v=/\\(\\)?/g,I=/^[-+]0x[0-9a-f]+$/i,H=/^0b[01]+$/i,B=/^\[object .+?Constructor\]$/,D=/^0o[0-7]+$/i,P=/^(?:0|[1-9]\d*)$/,F={};F["[object Float32Array]"]=F["[object Float64Array]"]=F["[object Int8Array]"]=F["[object Int16Array]"]=F["[object Int32Array]"]=F["[object Uint8Array]"]=F["[object Uint8ClampedArray]"]=F["[object Uint16Array]"]=F["[object Uint32Array]"]=!0,F[m]=F[y]=F[T]=F[x]=F[M]=F[k]=F[_]=F[i]=F[j]=F[O]=F[S]=F[A]=F[$]=F[C]=F[u]=!1;var N=parseInt,z="object"==typeof e&&e&&e.Object===Object&&e,R="object"==typeof self&&self&&self.Object===Object&&self,L=z||R||Function("return this")(),U="object"==typeof mt&&mt&&!mt.nodeType&&mt,q=U&&"object"==typeof gt&&gt&&!gt.nodeType&&gt,G=q&&q.exports===U&&z.process,V=function(){try{return G&&G.binding("util")}catch(e){}}(),Q=V&&V.isTypedArray;function W(e,t){for(var n=-1,o=e?e.length:0;++n<o;)if(t(e[n],n,e))return!0;return!1}function J(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function Z(e){var n=-1,o=Array(e.size);return e.forEach(function(e,t){o[++n]=[t,e]}),o}function Y(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var K,X,ee,te=Array.prototype,ne=Function.prototype,oe=Object.prototype,ie=L["__core-js_shared__"],re=(K=/[^.]+$/.exec(ie&&ie.keys&&ie.keys.IE_PROTO||""))?"Symbol(src)_1."+K:"",ae=ne.toString,le=oe.hasOwnProperty,se=oe.toString,de=RegExp("^"+ae.call(le).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ue=L.Symbol,ce=L.Uint8Array,fe=oe.propertyIsEnumerable,pe=te.splice,he=(X=Object.keys,ee=Object,function(e){return X(ee(e))}),be=Math.max,ve=Ve(L,"DataView"),ge=Ve(L,"Map"),me=Ve(L,"Promise"),ye=Ve(L,"Set"),we=Ve(L,"WeakMap"),xe=Ve(Object,"create"),ke=et(ve),_e=et(ge),je=et(me),Oe=et(ye),Se=et(we),Ae=ue?ue.prototype:void 0,$e=Ae?Ae.valueOf:void 0,Ce=Ae?Ae.toString:void 0;function Ee(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function Te(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function Me(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function Ie(e){var t=-1,n=e?e.length:0;for(this.__data__=new Me;++t<n;)this.add(e[t])}function He(e){this.__data__=new Te(e)}function Be(e,t){var n=at(e)||rt(e)?function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}(e.length,String):[],o=n.length,i=!!o;for(var r in e)!t&&!le.call(e,r)||i&&("length"==r||We(r,o))||n.push(r);return n}function De(e,t){for(var n=e.length;n--;)if(it(e[n][0],t))return n;return-1}function Pe(e,t){for(var n=0,o=(t=Je(t,e)?[t]:Ue(t)).length;null!=e&&n<o;)e=e[Xe(t[n++])];return n&&n==o?e:void 0}function Fe(e,t){return null!=e&&t in Object(e)}function Ne(e,t,n,o,i){return e===t||(null==e||null==t||!ut(e)&&!ct(t)?e!=e&&t!=t:function(e,t,n,o,i,r){var a=at(e),l=at(t),s=y,d=y;a||(s=(s=Qe(e))==m?S:s);l||(d=(d=Qe(t))==m?S:d);var u=s==S&&!J(e),c=d==S&&!J(t),f=s==d;if(f&&!u)return r||(r=new He),a||ht(e)?qe(e,t,n,o,i,r):function(e,t,n,o,i,r,a){switch(n){case M:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case T:return!(e.byteLength!=t.byteLength||!o(new ce(e),new ce(t)));case x:case k:case O:return it(+e,+t);case _:return e.name==t.name&&e.message==t.message;case A:case C:return e==t+"";case j:var l=Z;case $:var s=r&w;if(l||(l=Y),e.size!=t.size&&!s)return!1;var d=a.get(e);if(d)return d==t;r|=g,a.set(e,t);var u=qe(l(e),l(t),o,i,r,a);return a.delete(e),u;case E:if($e)return $e.call(e)==$e.call(t)}return!1}(e,t,s,n,o,i,r);if(!(i&w)){var p=u&&le.call(e,"__wrapped__"),h=c&&le.call(t,"__wrapped__");if(p||h){var b=p?e.value():e,v=h?t.value():t;return r||(r=new He),n(b,v,o,i,r)}}if(!f)return!1;return r||(r=new He),function(e,t,n,o,i,r){var a=i&w,l=bt(e),s=l.length,d=bt(t).length;if(s!=d&&!a)return!1;for(var u=s;u--;){var c=l[u];if(!(a?c in t:le.call(t,c)))return!1}var f=r.get(e);if(f&&r.get(t))return f==t;var p=!0;r.set(e,t),r.set(t,e);for(var h=a;++u<s;){c=l[u];var b=e[c],v=t[c];if(o)var g=a?o(v,b,c,t,e,r):o(b,v,c,e,t,r);if(!(void 0===g?b===v||n(b,v,o,i,r):g)){p=!1;break}h||(h="constructor"==c)}if(p&&!h){var m=e.constructor,y=t.constructor;m!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y)&&(p=!1)}return r.delete(e),r.delete(t),p}(e,t,n,o,i,r)}(e,t,Ne,n,o,i))}function ze(e){return!(!ut(e)||(t=e,re&&re in t))&&(st(e)||J(e)?de:B).test(et(e));var t}function Re(e){return"function"==typeof e?e:null==e?vt:"object"==typeof e?at(e)?function(s,d){if(Je(s)&&Ze(d))return Ye(Xe(s),d);return function(e){var t,n,o,i,r,a,l=(n=s,void 0===(i=null==(t=e)?void 0:Pe(t,n))?o:i);return void 0===l&&l===d?(a=s,null!=(r=e)&&function(e,t,n){t=Je(t,e)?[t]:Ue(t);for(var o,i=-1,r=t.length;++i<r;){var a=Xe(t[i]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||!!(r=e?e.length:0)&&dt(r)&&We(a,r)&&(at(e)||rt(e))}(r,a,Fe)):Ne(d,l,void 0,g|w)}}(e[0],e[1]):function(t){var n=function(e){var t=bt(e),n=t.length;for(;n--;){var o=t[n],i=e[o];t[n]=[o,i,Ze(i)]}return t}(t);if(1==n.length&&n[0][2])return Ye(n[0][0],n[0][1]);return function(e){return e===t||function(e,t,n,o){var i=n.length,r=i,a=!o;if(null==e)return!r;for(e=Object(e);i--;){var l=n[i];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<r;){var s=(l=n[i])[0],d=e[s],u=l[1];if(a&&l[2]){if(void 0===d&&!(s in e))return!1}else{var c=new He;if(o)var f=o(d,u,s,e,t,c);if(!(void 0===f?Ne(u,d,o,g|w,c):f))return!1}}return!0}(e,t,n)}}(e):Je(t=e)?(o=Xe(t),function(e){return null==e?void 0:e[o]}):(n=t,function(e){return Pe(e,n)});var t,n,o}function Le(e){if(n=(t=e)&&t.constructor,o="function"==typeof n&&n.prototype||oe,t!==o)return he(e);var t,n,o,i=[];for(var r in Object(e))le.call(e,r)&&"constructor"!=r&&i.push(r);return i}function Ue(e){return at(e)?e:Ke(e)}function qe(e,t,n,o,i,r){var a=i&w,l=e.length,s=t.length;if(l!=s&&!(a&&l<s))return!1;var d=r.get(e);if(d&&r.get(t))return d==t;var u=-1,c=!0,f=i&g?new Ie:void 0;for(r.set(e,t),r.set(t,e);++u<l;){var p=e[u],h=t[u];if(o)var b=a?o(h,p,u,t,e,r):o(p,h,u,e,t,r);if(void 0!==b){if(b)continue;c=!1;break}if(f){if(!W(t,function(e,t){if(!f.has(t)&&(p===e||n(p,e,o,i,r)))return f.add(t)})){c=!1;break}}else if(p!==h&&!n(p,h,o,i,r)){c=!1;break}}return r.delete(e),r.delete(t),c}function Ge(e,t){var n,o,i=e.__data__;return("string"==(o=typeof(n=t))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Ve(e,t){var n,o,i=(o=t,null==(n=e)?void 0:n[o]);return ze(i)?i:void 0}Ee.prototype.clear=function(){this.__data__=xe?xe(null):{}},Ee.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Ee.prototype.get=function(e){var t=this.__data__;if(xe){var n=t[e];return n===o?void 0:n}return le.call(t,e)?t[e]:void 0},Ee.prototype.has=function(e){var t=this.__data__;return xe?void 0!==t[e]:le.call(t,e)},Ee.prototype.set=function(e,t){return this.__data__[e]=xe&&void 0===t?o:t,this},Te.prototype.clear=function(){this.__data__=[]},Te.prototype.delete=function(e){var t=this.__data__,n=De(t,e);return!(n<0||(n==t.length-1?t.pop():pe.call(t,n,1),0))},Te.prototype.get=function(e){var t=this.__data__,n=De(t,e);return n<0?void 0:t[n][1]},Te.prototype.has=function(e){return-1<De(this.__data__,e)},Te.prototype.set=function(e,t){var n=this.__data__,o=De(n,e);return o<0?n.push([e,t]):n[o][1]=t,this},Me.prototype.clear=function(){this.__data__={hash:new Ee,map:new(ge||Te),string:new Ee}},Me.prototype.delete=function(e){return Ge(this,e).delete(e)},Me.prototype.get=function(e){return Ge(this,e).get(e)},Me.prototype.has=function(e){return Ge(this,e).has(e)},Me.prototype.set=function(e,t){return Ge(this,e).set(e,t),this},Ie.prototype.add=Ie.prototype.push=function(e){return this.__data__.set(e,o),this},Ie.prototype.has=function(e){return this.__data__.has(e)},He.prototype.clear=function(){this.__data__=new Te},He.prototype.delete=function(e){return this.__data__.delete(e)},He.prototype.get=function(e){return this.__data__.get(e)},He.prototype.has=function(e){return this.__data__.has(e)},He.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Te){var o=n.__data__;if(!ge||o.length<199)return o.push([e,t]),this;n=this.__data__=new Me(o)}return n.set(e,t),this};var Qe=function(e){return se.call(e)};function We(e,t){return!!(t=null==t?n:t)&&("number"==typeof e||P.test(e))&&-1<e&&e%1==0&&e<t}function Je(e,t){if(at(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ft(e))||(f.test(e)||!c.test(e)||null!=t&&e in Object(t))}function Ze(e){return e==e&&!ut(e)}function Ye(t,n){return function(e){return null!=e&&(e[t]===n&&(void 0!==n||t in Object(e)))}}(ve&&Qe(new ve(new ArrayBuffer(1)))!=M||ge&&Qe(new ge)!=j||me&&Qe(me.resolve())!=a||ye&&Qe(new ye)!=$||we&&Qe(new we)!=u)&&(Qe=function(e){var t=se.call(e),n=t==S?e.constructor:void 0,o=n?et(n):void 0;if(o)switch(o){case ke:return M;case _e:return j;case je:return a;case Oe:return $;case Se:return u}return t});var Ke=ot(function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(ft(e))return Ce?Ce.call(e):"";var t=e+"";return"0"==t&&1/e==-l?"-0":t}(t);var i=[];return p.test(e)&&i.push(""),e.replace(h,function(e,t,n,o){i.push(n?o.replace(v,"$1"):t||e)}),i});function Xe(e){if("string"==typeof e||ft(e))return e;var t=e+"";return"0"==t&&1/e==-l?"-0":t}function et(e){if(null!=e){try{return ae.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var tt,nt=(tt=function(e,t,n){var o=e?e.length:0;if(!o)return-1;var i,r,a=null==n?0:(i=function(e){if(!e)return 0===e?e:0;if((e=function(e){if("number"==typeof e)return e;if(ft(e))return d;if(ut(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ut(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(b,"");var n=H.test(e);return n||D.test(e)?N(e.slice(2),n?2:8):I.test(e)?d:+e}(e))===l||e===-l){var t=e<0?-1:1;return t*s}return e==e?e:0}(n),r=i%1,i==i?r?i-r:i:0);return a<0&&(a=be(o+a,0)),function(e,t,n,o){for(var i=e.length,r=n+(o?1:-1);o?r--:++r<i;)if(t(e[r],r,e))return r;return-1}(e,Re(t),a)},function(e,t,n){var o=Object(e);if(!lt(e)){var i=Re(t);e=bt(e),t=function(e){return i(o[e],e,o)}}var r=tt(e,t,n);return-1<r?o[i?e[r]:r]:void 0});function ot(i,r){if("function"!=typeof i||r&&"function"!=typeof r)throw new TypeError(t);var a=function(){var e=arguments,t=r?r.apply(this,e):e[0],n=a.cache;if(n.has(t))return n.get(t);var o=i.apply(this,e);return a.cache=n.set(t,o),o};return a.cache=new(ot.Cache||Me),a}function it(e,t){return e===t||e!=e&&t!=t}function rt(e){return ct(t=e)&&lt(t)&&le.call(e,"callee")&&(!fe.call(e,"callee")||se.call(e)==m);var t}ot.Cache=Me;var at=Array.isArray;function lt(e){return null!=e&&dt(e.length)&&!st(e)}function st(e){var t=ut(e)?se.call(e):"";return t==i||t==r}function dt(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=n}function ut(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function ct(e){return!!e&&"object"==typeof e}function ft(e){return"symbol"==typeof e||ct(e)&&se.call(e)==E}var pt,ht=Q?(pt=Q,function(e){return pt(e)}):function(e){return ct(e)&&dt(e.length)&&!!F[se.call(e)]};function bt(e){return lt(e)?Be(e):Le(e)}function vt(e){return e}gt.exports=nt}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(e,ce,t){(function(e){var o="__lodash_hash_undefined__",n=9007199254740991,i="[object Arguments]",r="[object Function]",a="[object GeneratorFunction]",l="[object Symbol]",s=/^\[object .+?Constructor\]$/,d=/^(?:0|[1-9]\d*)$/,t="object"==typeof e&&e&&e.Object===Object&&e,u="object"==typeof self&&self&&self.Object===Object&&self,c=t||u||Function("return this")();function h(e,t){return!!(e?e.length:0)&&-1<function(e,t,n){if(t!=t)return function(e,t,n,o){var i=e.length,r=n+(o?1:-1);for(;o?r--:++r<i;)if(t(e[r],r,e))return r;return-1}(e,p,n);var o=n-1,i=e.length;for(;++o<i;)if(e[o]===t)return o;return-1}(e,t,0)}function b(e,t,n){for(var o=-1,i=e?e.length:0;++o<i;)if(n(t,e[o]))return!0;return!1}function v(e,t){for(var n=-1,o=e?e.length:0,i=Array(o);++n<o;)i[n]=t(e[n],n,e);return i}function f(e,t){for(var n=-1,o=t.length,i=e.length;++n<o;)e[i+n]=t[n];return e}function p(e){return e!=e}function g(e,t){return e.has(t)}function m(t,n){return function(e){return t(n(e))}}var y,w=Array.prototype,x=Function.prototype,k=Object.prototype,_=c["__core-js_shared__"],j=(y=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||""))?"Symbol(src)_1."+y:"",O=x.toString,S=k.hasOwnProperty,A=k.toString,$=RegExp("^"+O.call(S).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),C=c.Symbol,E=m(Object.getPrototypeOf,Object),T=k.propertyIsEnumerable,M=w.splice,I=C?C.isConcatSpreadable:void 0,H=Object.getOwnPropertySymbols,B=Math.max,D=W(c,"Map"),P=W(Object,"create");function F(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function N(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function z(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function R(e){var t=-1,n=e?e.length:0;for(this.__data__=new z;++t<n;)this.add(e[t])}function L(e,t){var n=te(e)||ee(e)?function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}(e.length,String):[],o=n.length,i=!!o;for(var r in e)!t&&!S.call(e,r)||i&&("length"==r||K(r,o))||n.push(r);return n}function U(e,t){for(var n,o,i=e.length;i--;)if((n=e[i][0])===(o=t)||n!=n&&o!=o)return i;return-1}function q(e){return!(!ie(e)||(t=e,j&&j in t))&&(oe(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?$:s).test(function(e){if(null!=e){try{return O.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function G(e){if(!ie(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t,n,o,i=(n=(t=e)&&t.constructor,o="function"==typeof n&&n.prototype||k,t===o),r=[];for(var a in e)("constructor"!=a||!i&&S.call(e,a))&&r.push(a);return r}function V(e){return n=Z,o=ae(t=e),te(t)?o:f(o,n(t));var t,n,o}function Q(e,t){var n,o,i=e.__data__;return("string"==(o=typeof(n=t))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function W(e,t){var n,o,i=(o=t,null==(n=e)?void 0:n[o]);return q(i)?i:void 0}F.prototype.clear=function(){this.__data__=P?P(null):{}},F.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},F.prototype.get=function(e){var t=this.__data__;if(P){var n=t[e];return n===o?void 0:n}return S.call(t,e)?t[e]:void 0},F.prototype.has=function(e){var t=this.__data__;return P?void 0!==t[e]:S.call(t,e)},F.prototype.set=function(e,t){return this.__data__[e]=P&&void 0===t?o:t,this},N.prototype.clear=function(){this.__data__=[]},N.prototype.delete=function(e){var t=this.__data__,n=U(t,e);return!(n<0||(n==t.length-1?t.pop():M.call(t,n,1),0))},N.prototype.get=function(e){var t=this.__data__,n=U(t,e);return n<0?void 0:t[n][1]},N.prototype.has=function(e){return-1<U(this.__data__,e)},N.prototype.set=function(e,t){var n=this.__data__,o=U(n,e);return o<0?n.push([e,t]):n[o][1]=t,this},z.prototype.clear=function(){this.__data__={hash:new F,map:new(D||N),string:new F}},z.prototype.delete=function(e){return Q(this,e).delete(e)},z.prototype.get=function(e){return Q(this,e).get(e)},z.prototype.has=function(e){return Q(this,e).has(e)},z.prototype.set=function(e,t){return Q(this,e).set(e,t),this},R.prototype.add=R.prototype.push=function(e){return this.__data__.set(e,o),this},R.prototype.has=function(e){return this.__data__.has(e)};var J=H?m(H,Object):ue,Z=H?function(e){for(var t=[];e;)f(t,J(e)),e=E(e);return t}:ue;function Y(e){return te(e)||ee(e)||!!(I&&e&&e[I])}function K(e,t){return!!(t=null==t?n:t)&&("number"==typeof e||d.test(e))&&-1<e&&e%1==0&&e<t}function X(e){if("string"==typeof e||("symbol"==typeof(t=e)||re(t)&&A.call(t)==l))return e;var t,n=e+"";return"0"==n&&1/e==-1/0?"-0":n}function ee(e){return re(t=e)&&ne(t)&&S.call(e,"callee")&&(!T.call(e,"callee")||A.call(e)==i);var t}var te=Array.isArray;function ne(e){return null!=e&&("number"==typeof(t=e.length)&&-1<t&&t%1==0&&t<=n)&&!oe(e);var t}function oe(e){var t=ie(e)?A.call(e):"";return t==r||t==a}function ie(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function re(e){return!!e&&"object"==typeof e}function ae(e){return ne(e)?L(e,!0):G(e)}var le,se,de=(le=function(e,t){return null==e?{}:(t=v(function e(t,n,o,i,r){var a=-1,l=t.length;for(o||(o=Y),r||(r=[]);++a<l;){var s=t[a];0<n&&o(s)?1<n?e(s,n-1,o,i,r):f(r,s):i||(r[r.length]=s)}return r}(t,1),X),o=function(e,t,n,o){var i,r=-1,a=h,l=!0,s=e.length,d=[],u=t.length;if(!s)return d;n&&(t=v(t,(i=n,function(e){return i(e)}))),o?(a=b,l=!1):200<=t.length&&(a=g,l=!1,t=new R(t));e:for(;++r<s;){var c=e[r],f=n?n(c):c;if(c=o||0!==c?c:0,l&&f==f){for(var p=u;p--;)if(t[p]===f)continue e;d.push(c)}else a(t,f,o)||d.push(c)}return d}(V(n=e),t),function(e,t,n){for(var o=-1,i=t.length,r={};++o<i;){var a=t[o],l=e[a];n(l,a)&&(r[a]=l)}return r}(n=Object(n),o,function(e,t){return t in n}));var n,o},se=B(void 0===se?le.length-1:se,0),function(){for(var e=arguments,t=-1,n=B(e.length-se,0),o=Array(n);++t<n;)o[t]=e[se+t];t=-1;for(var i=Array(se+1);++t<se;)i[t]=e[t];return i[se]=o,function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(le,this,i)});function ue(){return[]}ce.exports=de}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],16:[function(e,t,n){t.exports={lex:e("./lib/lexer"),parse:e("./lib/parser"),stringify:e("./lib/stringify")}},{"./lib/lexer":18,"./lib/parser":19,"./lib/stringify":20}],17:[function(e,t,n){(function(n){t.exports=function(e){return function(e){var t=[].slice.call(arguments,1);t.unshift("["+e+"]"),n.stderr.write(t.join(" ")+"\n")}.bind(null,e)}}).call(this,e("_process"))},{_process:21}],18:[function(e,t,n){e("./debug")("lex");t.exports=function(n){var e,t="",o=0,i=-1,r=0,a=1,l="before-selector",s=[l],d={},u=[],c=["media","keyframes",{name:"-webkit-keyframes",type:"keyframes",prefix:"-webkit-"},{name:"-moz-keyframes",type:"keyframes",prefix:"-moz-"},{name:"-ms-keyframes",type:"keyframes",prefix:"-ms-"},{name:"-o-keyframes",type:"keyframes",prefix:"-o-"},"font-face",{name:"import",state:"before-at-value"},{name:"charset",state:"before-at-value"},"supports","viewport",{name:"namespace",state:"before-at-value"},"document",{name:"-moz-document",type:"document",prefix:"-moz-"},"page"];function f(){return y(),n[i]}function p(e){return e?s[s.length-1-e]:l}function h(e){return e===b(1)}function b(e){return n[i+(e||1)]}function v(){var e=s.pop();return l=s[s.length-1],e}function g(e){return l=e,s.push(l),s.length}function m(e){var t=l;return s[s.length-1]=l=e,t}function y(e){if(1==(e||1))"\n"==n[i]?(a++,o=1):o++,i++;else{var t=n.slice(i,i+e).split("\n");1<t.length&&(a+=t.length-1,o=1),o+=t[t.length-1].length,i+=e}}function w(){d.end={line:a,col:o},u.push(d),t="",d={}}function x(e){d={type:e,start:{line:a,col:o}}}for(;e=f();)switch(e){case" ":switch(p()){case"selector":case"value":case"value-paren":case"at-group":case"at-value":case"comment":case"double-string":case"single-string":t+=e}break;case"\n":case"\t":case"\r":case"\f":switch(p()){case"value":case"value-paren":case"at-group":case"comment":case"single-string":case"double-string":case"selector":t+=e;break;case"at-value":"\n"===e&&(d.value=t.trim(),w(),v())}break;case":":switch(p()){case"name":d.name=t.trim(),t="",m("before-value");break;case"before-selector":t+=e,x("selector"),g("selector");break;case"before-value":m("value"),t+=e;break;default:t+=e}break;case";":switch(p()){case"name":case"before-value":case"value":0<t.trim().length&&(d.value=t.trim(),w()),m("before-name");break;case"value-paren":t+=e;break;case"at-value":d.value=t.trim(),w(),v();break;case"before-name":break;default:t+=e}break;case"{":switch(p()){case"selector":if("\\"===b(-1)){t+=e;break}d.text=t.trim(),w(),m("before-name"),r+=1;break;case"at-group":switch(d.name=t.trim(),d.type){case"font-face":case"viewport":case"page":g("before-name");break;default:g("before-selector")}w(),r+=1;break;case"name":case"at-rule":d.name=t.trim(),w(),g("before-name"),r+=1;break;case"comment":case"double-string":case"single-string":t+=e;break;case"before-value":m("value"),t+=e}break;case"}":switch(p()){case"before-name":case"name":case"before-value":case"value":t&&(d.value=t.trim()),d.name&&d.value&&w(),x("end"),w(),v(),"at-group"===p()&&(x("at-group-end"),w(),v()),0<r&&(r-=1);break;case"at-group":case"before-selector":case"selector":if("\\"===b(-1)){t+=e;break}0<r&&"at-group"===p(1)&&(x("at-group-end"),w()),1<r&&v(),0<r&&(r-=1);break;case"double-string":case"single-string":case"comment":t+=e}break;case'"':case"'":switch(p()){case"double-string":'"'===e&&"\\"!==b(-1)&&v();break;case"single-string":"'"===e&&"\\"!==b(-1)&&v();break;case"before-at-value":m("at-value"),g('"'===e?"double-string":"single-string");break;case"before-value":m("value"),g('"'===e?"double-string":"single-string");break;case"comment":break;default:"\\"!==b(-1)&&g('"'===e?"double-string":"single-string")}t+=e;break;case"/":switch(p()){case"comment":case"double-string":case"single-string":t+=e;break;case"before-value":case"selector":case"name":case"value":if(h("*")){var k=(E="*/",void 0,0<(T=n.slice(i).indexOf(E))&&T);k&&y(k+1)}else"before-value"==p()&&m("value"),t+=e;break;default:h("*")?(x("comment"),g("comment"),y()):t+=e}break;case"*":switch(p()){case"comment":h("/")?(d.text=t,y(),w(),v()):t+=e;break;case"before-selector":t+=e,x("selector"),g("selector");break;case"before-value":m("value"),t+=e;break;default:t+=e}break;case"@":switch(p()){case"comment":case"double-string":case"single-string":t+=e;break;case"before-value":m("value"),t+=e;break;default:for(var _,j,O=!1,S=0,A=c.length;!O&&S<A;++S)_=(j=c[S]).name||j,void 0,C=i+1,($=_)===n.slice(C,C+$.length)&&(O=!0,x(_),g(j.state||"at-group"),y(_.length),j.prefix&&(d.prefix=j.prefix),j.type&&(d.type=j.type));O||(t+=e)}break;case"(":switch(p()){case"value":g("value-paren");break;case"before-value":m("value")}t+=e;break;case")":switch(p()){case"value-paren":v();break;case"before-value":m("value")}t+=e;break;default:switch(p()){case"before-selector":x("selector"),g("selector");break;case"before-name":x("property"),m("name");break;case"before-value":m("value");break;case"before-at-value":m("at-value")}t+=e}var $,C;var E,T;return u}},{"./debug":17}],19:[function(e,t,n){var r,a,l,s,d=!1,u=e("./debug")("parse"),c=e("./lexer");function o(e,t){var n;t||(t={});for(var o=["type","name","value"],i={},r=0;r<o.length;++r)e[n=o[r]]&&(i[n]=t[n]||e[n]);for(o=Object.keys(t),r=0;r<o.length;++r)i[n=o[r]]||(i[n]=t[n]);return l&&(i.position={start:e.start,end:e.end}),d&&u("astNode:",JSON.stringify(i,null,2)),i}function f(){var e=s.shift();return d&&u("next:",JSON.stringify(e,null,2)),e}function i(e){a+=1;var t={};switch(e.type){case"font-face":case"viewport":t.declarations=b();break;case"page":t.prefix=e.prefix,t.declarations=b();break;default:t.prefix=e.prefix,t.rules=h(function(){return a})}return o(e,t)}function p(e){switch(e.type){case"property":return o(e);case"selector":return o(n=e,{type:"rule",selectors:n.text.split(",").map(function(e){return e.trim()}),declarations:b()});case"at-group-end":return void(a-=1);case"media":case"keyframes":return i(e);case"comment":if(r)return o(t=e,{text:t.text});break;case"charset":return o(e);case"import":return o(e);case"namespace":return o(e);case"font-face":case"supports":case"viewport":case"document":case"page":return i(e)}var t,n;d&&u("parseToken: unexpected token:",JSON.stringify(e))}function h(e){for(var t,n,o=[];(n=f())&&e&&e(n);)(t=p(n))&&o.push(t);return n&&"end"!==n.type&&s.unshift(n),o}function b(){return h(function(e){return"property"===e.type||"comment"===e.type})}t.exports=function(e,t){var n;t||(t={}),r=!!t.comments,l=!!t.position,a=0,s=Array.isArray(e)?e.slice():c(e);var o,i=[];for(;o=f();)(n=p(o))&&i.push(n);return{type:"stylesheet",stylesheet:{rules:i}}}},{"./debug":17,"./lexer":18}],20:[function(e,t,n){var o,i,r,a,l,s=!1,d=e("./debug")("stringify");function u(e){if(this.level||(this.level=1),!e)return i?"":Array(this.level).join(r||"");this.level+=e}function c(e){var t="",n=e.prefix||"";e.name&&(t=" "+e.name);var o="page"!==e.type;return"@"+n+e.type+t+l+b(e,o)+a}function f(e){return o?"/*"+(e.text||"")+"*/"+a:""}function p(e){var t;return e.selectors?t=e.selectors.join(","+a):(t="@"+e.type,t+=e.name?" "+e.name:""),u()+t+l+b(e)+a}function h(e,o){return e.reduce(function(e,t){var n="comment"===t.type?f(t):o(t);return n&&e.push(n),e},[])}function b(e,t){var n=e.declarations,o=v;return e.rules&&(n=e.rules,o=p),(n=function(e,t){if(!e)return"";u(1);var n=h(e,t);if(u(-1),!n.length)return"";return n.join(a)}(n,o))&&(n=a+n+(t?"":a)),"{"+n+u()+"}"}function v(e){if("property"===e.type)return n=(t=e).name?t.name+":"+l:"",u()+n+t.value+";";var t,n;s&&d("stringifyDeclaration: unexpected node:",JSON.stringify(e))}function g(e){switch(e.type){case"rule":return p(e);case"media":case"keyframes":return c(e);case"comment":return f(e);case"import":case"charset":case"namespace":return"@"+(t=e).type+" "+t.value+";"+a;case"font-face":case"supports":case"viewport":case"document":case"page":return c(e)}var t;s&&d("stringifyNode: unexpected node: "+JSON.stringify(e))}t.exports=function(e,t){t||(t={}),r=t.indentation||"",i=!!t.compress,o=!!t.comments,i?a=l="":(a="\n",l=" ");return h(e.stylesheet.rules,g).join("\n").trim()}},{"./debug":17}],21:[function(e,t,n){var o,i,r=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function s(t){if(o===setTimeout)return setTimeout(t,0);if((o===a||!o)&&setTimeout)return o=setTimeout,setTimeout(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:a}catch(e){o=a}try{i="function"==typeof clearTimeout?clearTimeout:l}catch(e){i=l}}();var d,u=[],c=!1,f=-1;function p(){c&&d&&(c=!1,d.length?u=d.concat(u):f=-1,u.length&&h())}function h(){if(!c){var e=s(p);c=!0;for(var t=u.length;t;){for(d=u,u=[];++f<t;)d&&d[f].run();f=-1,t=u.length}d=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===l||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function b(e,t){this.fun=e,this.array=t}function v(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new b(e,t)),1!==u.length||c||s(h)},b.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],22:[function(e,M,I){(function(T){!function(e){var t="object"==typeof I&&I&&!I.nodeType&&I,n="object"==typeof M&&M&&!M.nodeType&&M,o="object"==typeof T&&T;o.global!==o&&o.window!==o&&o.self!==o||(e=o);var i,r,g=2147483647,m=36,y=1,w=26,a=38,l=700,x=72,k=128,_="-",s=/^xn--/,d=/[^\x20-\x7E]/,u=/[\x2E\u3002\uFF0E\uFF61]/g,c={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=m-y,j=Math.floor,O=String.fromCharCode;function S(e){throw RangeError(c[e])}function p(e,t){for(var n=e.length,o=[];n--;)o[n]=t(e[n]);return o}function h(e,t){var n=e.split("@"),o="";return 1<n.length&&(o=n[0]+"@",e=n[1]),o+p((e=e.replace(u,".")).split("."),t).join(".")}function A(e){for(var t,n,o=[],i=0,r=e.length;i<r;)55296<=(t=e.charCodeAt(i++))&&t<=56319&&i<r?56320==(64512&(n=e.charCodeAt(i++)))?o.push(((1023&t)<<10)+(1023&n)+65536):(o.push(t),i--):o.push(t);return o}function $(e){return p(e,function(e){var t="";return 65535<e&&(t+=O((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=O(e)}).join("")}function C(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function E(e,t,n){var o=0;for(e=n?j(e/l):e>>1,e+=j(e/t);f*w>>1<e;o+=m)e=j(e/f);return j(o+(f+1)*e/(e+a))}function b(e){var t,n,o,i,r,a,l,s,d,u,c,f=[],p=e.length,h=0,b=k,v=x;for((n=e.lastIndexOf(_))<0&&(n=0),o=0;o<n;++o)128<=e.charCodeAt(o)&&S("not-basic"),f.push(e.charCodeAt(o));for(i=0<n?n+1:0;i<p;){for(r=h,a=1,l=m;p<=i&&S("invalid-input"),c=e.charCodeAt(i++),(m<=(s=c-48<10?c-22:c-65<26?c-65:c-97<26?c-97:m)||s>j((g-h)/a))&&S("overflow"),h+=s*a,!(s<(d=l<=v?y:v+w<=l?w:l-v));l+=m)a>j(g/(u=m-d))&&S("overflow"),a*=u;v=E(h-r,t=f.length+1,0==r),j(h/t)>g-b&&S("overflow"),b+=j(h/t),h%=t,f.splice(h++,0,b)}return $(f)}function v(e){var t,n,o,i,r,a,l,s,d,u,c,f,p,h,b,v=[];for(f=(e=A(e)).length,t=k,r=x,a=n=0;a<f;++a)(c=e[a])<128&&v.push(O(c));for(o=i=v.length,i&&v.push(_);o<f;){for(l=g,a=0;a<f;++a)t<=(c=e[a])&&c<l&&(l=c);for(l-t>j((g-n)/(p=o+1))&&S("overflow"),n+=(l-t)*p,t=l,a=0;a<f;++a)if((c=e[a])<t&&++n>g&&S("overflow"),c==t){for(s=n,d=m;!(s<(u=d<=r?y:r+w<=d?w:d-r));d+=m)b=s-u,h=m-u,v.push(O(C(u+b%h,0))),s=j(b/h);v.push(O(C(s,0))),r=E(n,p,o==i),n=0,++o}++n,++t}return v.join("")}if(i={version:"1.3.2",ucs2:{decode:A,encode:$},decode:b,encode:v,toASCII:function(e){return h(e,function(e){return d.test(e)?"xn--"+v(e):e})},toUnicode:function(e){return h(e,function(e){return s.test(e)?b(e.slice(4).toLowerCase()):e})}},t&&n)if(M.exports==t)n.exports=i;else for(r in i)i.hasOwnProperty(r)&&(t[r]=i[r]);else e.punycode=i}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],23:[function(e,t,n){"use strict";t.exports=function(e,t,n,o){t=t||"&",n=n||"=";var i={};if("string"!=typeof e||0===e.length)return i;var r=/\+/g;e=e.split(t);var a=1e3;o&&"number"==typeof o.maxKeys&&(a=o.maxKeys);var l,s,d=e.length;0<a&&a<d&&(d=a);for(var u=0;u<d;++u){var c,f,p,h,b=e[u].replace(r,"%20"),v=b.indexOf(n);0<=v?(c=b.substr(0,v),f=b.substr(v+1)):(c=b,f=""),p=decodeURIComponent(c),h=decodeURIComponent(f),l=i,s=p,Object.prototype.hasOwnProperty.call(l,s)?g(i[p])?i[p].push(h):i[p]=[i[p],h]:i[p]=h}return i};var g=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],24:[function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(n,o,i,e){return o=o||"&",i=i||"=",null===n&&(n=void 0),"object"==typeof n?l(s(n),function(e){var t=encodeURIComponent(r(e))+i;return a(n[e])?l(n[e],function(e){return t+encodeURIComponent(r(e))}).join(o):t+encodeURIComponent(r(n[e]))}).join(o):e?encodeURIComponent(r(e))+i+encodeURIComponent(r(n)):""};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function l(e,t){if(e.map)return e.map(t);for(var n=[],o=0;o<e.length;o++)n.push(t(e[o],o));return n}var s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],25:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":23,"./encode":24}],26:[function(e,t,n){"use strict";var o=/([-.*+?^${}()|[\]\/\\])/g,i=/\\/g,x=function(e){return(e+"").replace(o,"\\$1")},k=function(e){return(e+"").replace(i,"")},r=RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|(:+)(<unicode>+)(?:\\((?:(?:([\"'])([^\\13]*)\\13)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,"["+x(">+~`!@$%^&={}\\;</")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])")),_=function(e){this.combinator=e||" ",this.tag="*"};_.prototype.toString=function(){if(!this.raw){var e,t,n="";if(n+=this.tag||"*",this.id&&(n+="#"+this.id),this.classes&&(n+="."+this.classList.join(".")),this.attributes)for(e=0;t=this.attributes[e++];)n+="["+t.name+(t.operator?t.operator+'"'+t.value+'"':"")+"]";if(this.pseudos)for(e=0;t=this.pseudos[e++];)n+=":"+t.name,t.value&&(n+="("+t.value+")");this.raw=n}return this.raw};var j=function(){this.length=0};j.prototype.toString=function(){if(!this.raw){for(var e,t="",n=0;e=this[n++];)1!==n&&(t+=" ")," "!==e.combinator&&(t+=e.combinator+" "),t+=e;this.raw=t}return this.raw};var a=function(e,t,n,o,i,r,a,l,s,d,u,c,f,p,h,b){var v,g;if((t||!this.length)&&(v=this[this.length++]=new j,t))return"";if(v||(v=this[this.length-1]),(n||o||!v.length)&&(g=v[v.length++]=new _(n)),g||(g=v[v.length-1]),i)g.tag=k(i);else if(r)g.id=k(r);else if(a){var m=k(a),y=g.classes||(g.classes={});if(!y[m]){y[m]=x(a);var w=g.classList||(g.classList=[]);w.push(m),w.sort()}}else f?(b=b||h,(g.pseudos||(g.pseudos=[])).push({type:1==c.length?"class":"element",name:k(f),escapedName:x(f),value:b?k(b):null,escapedValue:b?x(b):null})):l&&(u=u?x(u):null,(g.attributes||(g.attributes=[])).push({operator:s,name:k(l),escapedName:x(l),value:u?k(u):null,escapedValue:u?x(u):null}));return""},l=function(e){this.length=0;for(var t,n=this,o=e;e;){if((t=e.replace(r,function(){return a.apply(n,arguments)}))===e)throw new Error(o+" is an invalid expression");e=t}};l.prototype.toString=function(){if(!this.raw){for(var e,t=[],n=0;e=this[n++];)t.push(e);this.raw=t.join(", ")}return this.raw};var s={};t.exports=function(e){return null==e?null:(e=(""+e).replace(/^\s+|\s+$/g,""),s[e]||(s[e]=new l(e)))}},{}],27:[function(e,t,n){t.exports=e("./lib/speakingurl")},{"./lib/speakingurl":28}],28:[function(e,o,t){!function(e){"use strict";var k={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"Ae","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"Oe","Ő":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"Ue","Ű":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"ae","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"oe","ő":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"ue","ű":"u","ý":"y","þ":"th","ÿ":"y","ẞ":"SS","ا":"a","أ":"a","إ":"i","آ":"aa","ؤ":"u","ئ":"e","ء":"a","ب":"b","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"dh","ط":"t","ظ":"z","ع":"a","غ":"gh","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ي":"y","ى":"a","ة":"h","ﻻ":"la","ﻷ":"laa","ﻹ":"lai","ﻵ":"laa","گ":"g","چ":"ch","پ":"p","ژ":"zh","ک":"k","ی":"y","َ":"a","ً":"an","ِ":"e","ٍ":"en","ُ":"u","ٌ":"on","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","က":"k","ခ":"kh","ဂ":"g","ဃ":"ga","င":"ng","စ":"s","ဆ":"sa","ဇ":"z","စျ":"za","ည":"ny","ဋ":"t","ဌ":"ta","ဍ":"d","ဎ":"da","ဏ":"na","တ":"t","ထ":"ta","ဒ":"d","ဓ":"da","န":"n","ပ":"p","ဖ":"pa","ဗ":"b","ဘ":"ba","မ":"m","ယ":"y","ရ":"ya","လ":"l","ဝ":"w","သ":"th","ဟ":"h","ဠ":"la","အ":"a","ြ":"y","ျ":"ya","ွ":"w","ြွ":"yw","ျွ":"ywa","ှ":"h","ဧ":"e","၏":"-e","ဣ":"i","ဤ":"-i","ဉ":"u","ဦ":"-u","ဩ":"aw","သြော":"aw","ဪ":"aw","၀":"0","၁":"1","၂":"2","၃":"3","၄":"4","၅":"5","၆":"6","၇":"7","၈":"8","၉":"9","္":"","့":"","း":"","č":"c","ď":"d","ě":"e","ň":"n","ř":"r","š":"s","ť":"t","ů":"u","ž":"z","Č":"C","Ď":"D","Ě":"E","Ň":"N","Ř":"R","Š":"S","Ť":"T","Ů":"U","Ž":"Z","ހ":"h","ށ":"sh","ނ":"n","ރ":"r","ބ":"b","ޅ":"lh","ކ":"k","އ":"a","ވ":"v","މ":"m","ފ":"f","ދ":"dh","ތ":"th","ލ":"l","ގ":"g","ޏ":"gn","ސ":"s","ޑ":"d","ޒ":"z","ޓ":"t","ޔ":"y","ޕ":"p","ޖ":"j","ޗ":"ch","ޘ":"tt","ޙ":"hh","ޚ":"kh","ޛ":"th","ޜ":"z","ޝ":"sh","ޞ":"s","ޟ":"d","ޠ":"t","ޡ":"z","ޢ":"a","ޣ":"gh","ޤ":"q","ޥ":"w","ަ":"a","ާ":"aa","ި":"i","ީ":"ee","ު":"u","ޫ":"oo","ެ":"e","ޭ":"ey","ޮ":"o","ޯ":"oa","ް":"","ა":"a","ბ":"b","გ":"g","დ":"d","ე":"e","ვ":"v","ზ":"z","თ":"t","ი":"i","კ":"k","ლ":"l","მ":"m","ნ":"n","ო":"o","პ":"p","ჟ":"zh","რ":"r","ს":"s","ტ":"t","უ":"u","ფ":"p","ქ":"k","ღ":"gh","ყ":"q","შ":"sh","ჩ":"ch","ც":"ts","ძ":"dz","წ":"ts","ჭ":"ch","ხ":"kh","ჯ":"j","ჰ":"h","α":"a","β":"v","γ":"g","δ":"d","ε":"e","ζ":"z","η":"i","θ":"th","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"ks","ο":"o","π":"p","ρ":"r","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"o","ά":"a","έ":"e","ί":"i","ό":"o","ύ":"y","ή":"i","ώ":"o","ς":"s","ϊ":"i","ΰ":"y","ϋ":"y","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"I","Θ":"TH","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"KS","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"O","Ά":"A","Έ":"E","Ί":"I","Ό":"O","Ύ":"Y","Ή":"I","Ώ":"O","Ϊ":"I","Ϋ":"Y","ā":"a","ē":"e","ģ":"g","ī":"i","ķ":"k","ļ":"l","ņ":"n","ū":"u","Ā":"A","Ē":"E","Ģ":"G","Ī":"I","Ķ":"k","Ļ":"L","Ņ":"N","Ū":"U","Ќ":"Kj","ќ":"kj","Љ":"Lj","љ":"lj","Њ":"Nj","њ":"nj","Тс":"Ts","тс":"ts","ą":"a","ć":"c","ę":"e","ł":"l","ń":"n","ś":"s","ź":"z","ż":"z","Ą":"A","Ć":"C","Ę":"E","Ł":"L","Ń":"N","Ś":"S","Ź":"Z","Ż":"Z","Є":"Ye","І":"I","Ї":"Yi","Ґ":"G","є":"ye","і":"i","ї":"yi","ґ":"g","ă":"a","Ă":"A","ș":"s","Ș":"S","ț":"t","Ț":"T","ţ":"t","Ţ":"T","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"yo","ж":"zh","з":"z","и":"i","й":"i","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"kh","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ё":"Yo","Ж":"Zh","З":"Z","И":"I","Й":"I","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"Kh","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","ђ":"dj","ј":"j","ћ":"c","џ":"dz","Ђ":"Dj","Ј":"j","Ћ":"C","Џ":"Dz","ľ":"l","ĺ":"l","ŕ":"r","Ľ":"L","Ĺ":"L","Ŕ":"R","ş":"s","Ş":"S","ı":"i","İ":"I","ğ":"g","Ğ":"G","ả":"a","Ả":"A","ẳ":"a","Ẳ":"A","ẩ":"a","Ẩ":"A","đ":"d","Đ":"D","ẹ":"e","Ẹ":"E","ẽ":"e","Ẽ":"E","ẻ":"e","Ẻ":"E","ế":"e","Ế":"E","ề":"e","Ề":"E","ệ":"e","Ệ":"E","ễ":"e","Ễ":"E","ể":"e","Ể":"E","ỏ":"o","ọ":"o","Ọ":"o","ố":"o","Ố":"O","ồ":"o","Ồ":"O","ổ":"o","Ổ":"O","ộ":"o","Ộ":"O","ỗ":"o","Ỗ":"O","ơ":"o","Ơ":"O","ớ":"o","Ớ":"O","ờ":"o","Ờ":"O","ợ":"o","Ợ":"O","ỡ":"o","Ỡ":"O","Ở":"o","ở":"o","ị":"i","Ị":"I","ĩ":"i","Ĩ":"I","ỉ":"i","Ỉ":"i","ủ":"u","Ủ":"U","ụ":"u","Ụ":"U","ũ":"u","Ũ":"U","ư":"u","Ư":"U","ứ":"u","Ứ":"U","ừ":"u","Ừ":"U","ự":"u","Ự":"U","ữ":"u","Ữ":"U","ử":"u","Ử":"ư","ỷ":"y","Ỷ":"y","ỳ":"y","Ỳ":"Y","ỵ":"y","Ỵ":"Y","ỹ":"y","Ỹ":"Y","ạ":"a","Ạ":"A","ấ":"a","Ấ":"A","ầ":"a","Ầ":"A","ậ":"a","Ậ":"A","ẫ":"a","Ẫ":"A","ắ":"a","Ắ":"A","ằ":"a","Ằ":"A","ặ":"a","Ặ":"A","ẵ":"a","Ẵ":"A","⓪":"0","①":"1","②":"2","③":"3","④":"4","⑤":"5","⑥":"6","⑦":"7","⑧":"8","⑨":"9","⑩":"10","⑪":"11","⑫":"12","⑬":"13","⑭":"14","⑮":"15","⑯":"16","⑰":"17","⑱":"18","⑲":"18","⑳":"18","⓵":"1","⓶":"2","⓷":"3","⓸":"4","⓹":"5","⓺":"6","⓻":"7","⓼":"8","⓽":"9","⓾":"10","⓿":"0","⓫":"11","⓬":"12","⓭":"13","⓮":"14","⓯":"15","⓰":"16","⓱":"17","⓲":"18","⓳":"19","⓴":"20","Ⓐ":"A","Ⓑ":"B","Ⓒ":"C","Ⓓ":"D","Ⓔ":"E","Ⓕ":"F","Ⓖ":"G","Ⓗ":"H","Ⓘ":"I","Ⓙ":"J","Ⓚ":"K","Ⓛ":"L","Ⓜ":"M","Ⓝ":"N","Ⓞ":"O","Ⓟ":"P","Ⓠ":"Q","Ⓡ":"R","Ⓢ":"S","Ⓣ":"T","Ⓤ":"U","Ⓥ":"V","Ⓦ":"W","Ⓧ":"X","Ⓨ":"Y","Ⓩ":"Z","ⓐ":"a","ⓑ":"b","ⓒ":"c","ⓓ":"d","ⓔ":"e","ⓕ":"f","ⓖ":"g","ⓗ":"h","ⓘ":"i","ⓙ":"j","ⓚ":"k","ⓛ":"l","ⓜ":"m","ⓝ":"n","ⓞ":"o","ⓟ":"p","ⓠ":"q","ⓡ":"r","ⓢ":"s","ⓣ":"t","ⓤ":"u","ⓦ":"v","ⓥ":"w","ⓧ":"x","ⓨ":"y","ⓩ":"z","“":'"',"”":'"',"‘":"'","’":"'","∂":"d","ƒ":"f","™":"(TM)","©":"(C)","œ":"oe","Œ":"OE","®":"(R)","†":"+","℠":"(SM)","…":"...","˚":"o","º":"o","ª":"a","•":"*","၊":",","။":".",$:"USD","€":"EUR","₢":"BRN","₣":"FRF","£":"GBP","₤":"ITL","₦":"NGN","₧":"ESP","₩":"KRW","₪":"ILS","₫":"VND","₭":"LAK","₮":"MNT","₯":"GRD","₱":"ARS","₲":"PYG","₳":"ARA","₴":"UAH","₵":"GHS","¢":"cent","¥":"CNY","元":"CNY","円":"YEN","﷼":"IRR","₠":"EWE","฿":"THB","₨":"INR","₹":"INR","₰":"PF","₺":"TRY","؋":"AFN","₼":"AZN","лв":"BGN","៛":"KHR","₡":"CRC","₸":"KZT","ден":"MKD","zł":"PLN","₽":"RUB","₾":"GEL"},_=["်","ް"],j={"ာ":"a","ါ":"a","ေ":"e","ဲ":"e","ိ":"i","ီ":"i","ို":"o","ု":"u","ူ":"u","ေါင်":"aung","ော":"aw","ော်":"aw","ေါ":"aw","ေါ်":"aw","်":"်","က်":"et","ိုက်":"aik","ောက်":"auk","င်":"in","ိုင်":"aing","ောင်":"aung","စ်":"it","ည်":"i","တ်":"at","ိတ်":"eik","ုတ်":"ok","ွတ်":"ut","ေတ်":"it","ဒ်":"d","ိုဒ်":"ok","ုဒ်":"ait","န်":"an","ာန်":"an","ိန်":"ein","ုန်":"on","ွန်":"un","ပ်":"at","ိပ်":"eik","ုပ်":"ok","ွပ်":"ut","န်ုပ်":"nub","မ်":"an","ိမ်":"ein","ုမ်":"on","ွမ်":"un","ယ်":"e","ိုလ်":"ol","ဉ်":"in","ံ":"an","ိံ":"ein","ုံ":"on","ައް":"ah","ަށް":"ah"},O={en:{},az:{"ç":"c","ə":"e","ğ":"g","ı":"i","ö":"o","ş":"s","ü":"u","Ç":"C","Ə":"E","Ğ":"G","İ":"I","Ö":"O","Ş":"S","Ü":"U"},cs:{"č":"c","ď":"d","ě":"e","ň":"n","ř":"r","š":"s","ť":"t","ů":"u","ž":"z","Č":"C","Ď":"D","Ě":"E","Ň":"N","Ř":"R","Š":"S","Ť":"T","Ů":"U","Ž":"Z"},fi:{"ä":"a","Ä":"A","ö":"o","Ö":"O"},hu:{"ä":"a","Ä":"A","ö":"o","Ö":"O","ü":"u","Ü":"U","ű":"u","Ű":"U"},lt:{"ą":"a","č":"c","ę":"e","ė":"e","į":"i","š":"s","ų":"u","ū":"u","ž":"z","Ą":"A","Č":"C","Ę":"E","Ė":"E","Į":"I","Š":"S","Ų":"U","Ū":"U"},lv:{"ā":"a","č":"c","ē":"e","ģ":"g","ī":"i","ķ":"k","ļ":"l","ņ":"n","š":"s","ū":"u","ž":"z","Ā":"A","Č":"C","Ē":"E","Ģ":"G","Ī":"i","Ķ":"k","Ļ":"L","Ņ":"N","Š":"S","Ū":"u","Ž":"Z"},pl:{"ą":"a","ć":"c","ę":"e","ł":"l","ń":"n","ó":"o","ś":"s","ź":"z","ż":"z","Ą":"A","Ć":"C","Ę":"e","Ł":"L","Ń":"N","Ó":"O","Ś":"S","Ź":"Z","Ż":"Z"},sv:{"ä":"a","Ä":"A","ö":"o","Ö":"O"},sk:{"ä":"a","Ä":"A"},sr:{"љ":"lj","њ":"nj","Љ":"Lj","Њ":"Nj","đ":"dj","Đ":"Dj"},tr:{"Ü":"U","Ö":"O","ü":"u","ö":"o"}},S={ar:{"∆":"delta","∞":"la-nihaya","♥":"hob","&":"wa","|":"aw","<":"aqal-men",">":"akbar-men","∑":"majmou","¤":"omla"},az:{},ca:{"∆":"delta","∞":"infinit","♥":"amor","&":"i","|":"o","<":"menys que",">":"mes que","∑":"suma dels","¤":"moneda"},cs:{"∆":"delta","∞":"nekonecno","♥":"laska","&":"a","|":"nebo","<":"mensi nez",">":"vetsi nez","∑":"soucet","¤":"mena"},de:{"∆":"delta","∞":"unendlich","♥":"Liebe","&":"und","|":"oder","<":"kleiner als",">":"groesser als","∑":"Summe von","¤":"Waehrung"},dv:{"∆":"delta","∞":"kolunulaa","♥":"loabi","&":"aai","|":"noonee","<":"ah vure kuda",">":"ah vure bodu","∑":"jumula","¤":"faisaa"},en:{"∆":"delta","∞":"infinity","♥":"love","&":"and","|":"or","<":"less than",">":"greater than","∑":"sum","¤":"currency"},es:{"∆":"delta","∞":"infinito","♥":"amor","&":"y","|":"u","<":"menos que",">":"mas que","∑":"suma de los","¤":"moneda"},fa:{"∆":"delta","∞":"bi-nahayat","♥":"eshgh","&":"va","|":"ya","<":"kamtar-az",">":"bishtar-az","∑":"majmooe","¤":"vahed"},fi:{"∆":"delta","∞":"aarettomyys","♥":"rakkaus","&":"ja","|":"tai","<":"pienempi kuin",">":"suurempi kuin","∑":"summa","¤":"valuutta"},fr:{"∆":"delta","∞":"infiniment","♥":"Amour","&":"et","|":"ou","<":"moins que",">":"superieure a","∑":"somme des","¤":"monnaie"},ge:{"∆":"delta","∞":"usasruloba","♥":"siqvaruli","&":"da","|":"an","<":"naklebi",">":"meti","∑":"jami","¤":"valuta"},gr:{},hu:{"∆":"delta","∞":"vegtelen","♥":"szerelem","&":"es","|":"vagy","<":"kisebb mint",">":"nagyobb mint","∑":"szumma","¤":"penznem"},it:{"∆":"delta","∞":"infinito","♥":"amore","&":"e","|":"o","<":"minore di",">":"maggiore di","∑":"somma","¤":"moneta"},lt:{"∆":"delta","∞":"begalybe","♥":"meile","&":"ir","|":"ar","<":"maziau nei",">":"daugiau nei","∑":"suma","¤":"valiuta"},lv:{"∆":"delta","∞":"bezgaliba","♥":"milestiba","&":"un","|":"vai","<":"mazak neka",">":"lielaks neka","∑":"summa","¤":"valuta"},my:{"∆":"kwahkhyaet","∞":"asaonasme","♥":"akhyait","&":"nhin","|":"tho","<":"ngethaw",">":"kyithaw","∑":"paungld","¤":"ngwekye"},mk:{},nl:{"∆":"delta","∞":"oneindig","♥":"liefde","&":"en","|":"of","<":"kleiner dan",">":"groter dan","∑":"som","¤":"valuta"},pl:{"∆":"delta","∞":"nieskonczonosc","♥":"milosc","&":"i","|":"lub","<":"mniejsze niz",">":"wieksze niz","∑":"suma","¤":"waluta"},pt:{"∆":"delta","∞":"infinito","♥":"amor","&":"e","|":"ou","<":"menor que",">":"maior que","∑":"soma","¤":"moeda"},ro:{"∆":"delta","∞":"infinit","♥":"dragoste","&":"si","|":"sau","<":"mai mic ca",">":"mai mare ca","∑":"suma","¤":"valuta"},ru:{"∆":"delta","∞":"beskonechno","♥":"lubov","&":"i","|":"ili","<":"menshe",">":"bolshe","∑":"summa","¤":"valjuta"},sk:{"∆":"delta","∞":"nekonecno","♥":"laska","&":"a","|":"alebo","<":"menej ako",">":"viac ako","∑":"sucet","¤":"mena"},sr:{},tr:{"∆":"delta","∞":"sonsuzluk","♥":"ask","&":"ve","|":"veya","<":"kucuktur",">":"buyuktur","∑":"toplam","¤":"para birimi"},uk:{"∆":"delta","∞":"bezkinechnist","♥":"lubov","&":"i","|":"abo","<":"menshe",">":"bilshe","∑":"suma","¤":"valjuta"},vn:{"∆":"delta","∞":"vo cuc","♥":"yeu","&":"va","|":"hoac","<":"nho hon",">":"lon hon","∑":"tong","¤":"tien te"}},A=[";","?",":","@","&","=","+","$",",","/"].join(""),$=[";","?",":","@","&","=","+","$",","].join(""),C=[".","!","~","*","'","(",")"].join(""),n=function(n,e){var t,o,i,r,a,l,s,d,u,c,f,p,h,b,v="-",g="",m="",y=!0,w={},x="";if("string"!=typeof n)return"";if("string"==typeof e&&(v=e),s=S.en,d=O.en,"object"==typeof e)for(f in t=e.maintainCase||!1,w=e.custom&&"object"==typeof e.custom?e.custom:w,i=1<+e.truncate&&e.truncate||!1,r=e.uric||!1,a=e.uricNoSlash||!1,l=e.mark||!1,y=!1!==e.symbols&&!1!==e.lang,v=e.separator||v,r&&(x+=A),a&&(x+=$),l&&(x+=C),s=e.lang&&S[e.lang]&&y?S[e.lang]:y?S.en:{},d=e.lang&&O[e.lang]?O[e.lang]:!1===e.lang||!0===e.lang?{}:O.en,e.titleCase&&"number"==typeof e.titleCase.length&&Array.prototype.toString.call(e.titleCase)?(e.titleCase.forEach(function(e){w[e+""]=e+""}),o=!0):o=!!e.titleCase,e.custom&&"number"==typeof e.custom.length&&Array.prototype.toString.call(e.custom)&&e.custom.forEach(function(e){w[e+""]=e+""}),Object.keys(w).forEach(function(e){var t;t=1<e.length?new RegExp("\\b"+E(e)+"\\b","gi"):new RegExp(E(e),"gi"),n=n.replace(t,w[e])}),w)x+=f;for(x=E(x+=v),b=h=!1,c=0,p=(n=n.replace(/(^\s+|\s+$)/g,"")).length;c<p;c++)f=n[c],T(f,w)?h=!1:d[f]?(f=h&&d[f].match(/[A-Za-z0-9]/)?" "+d[f]:d[f],h=!1):f in k?(c+1<p&&0<=_.indexOf(n[c+1])?(m+=f,f=""):!0===b?(f=j[m]+k[f],m=""):f=h&&k[f].match(/[A-Za-z0-9]/)?" "+k[f]:k[f],b=h=!1):f in j?(m+=f,f="",c===p-1&&(f=j[m]),b=!0):!s[f]||r&&-1!==A.indexOf(f)||a&&-1!==$.indexOf(f)?(!0===b?(f=j[m]+f,m="",b=!1):h&&(/[A-Za-z0-9]/.test(f)||g.substr(-1).match(/A-Za-z0-9]/))&&(f=" "+f),h=!1):(f=h||g.substr(-1).match(/[A-Za-z0-9]/)?v+s[f]:s[f],f+=void 0!==n[c+1]&&n[c+1].match(/[A-Za-z0-9]/)?v:"",h=!0),g+=f.replace(new RegExp("[^\\w\\s"+x+"_-]","g"),v);return o&&(g=g.replace(/(\w)(\S*)/g,function(e,t,n){var o=t.toUpperCase()+(null!==n?n:"");return Object.keys(w).indexOf(o.toLowerCase())<0?o:o.toLowerCase()})),g=g.replace(/\s+/g,v).replace(new RegExp("\\"+v+"+","g"),v).replace(new RegExp("(^\\"+v+"+|\\"+v+"+$)","g"),""),i&&g.length>i&&(u=g.charAt(i)===v,g=g.slice(0,i),u||(g=g.slice(0,g.lastIndexOf(v)))),t||o||(g=g.toLowerCase()),g},t=function(t){return function(e){return n(e,t)}},E=function(e){return e.replace(/[-\\^$*+?.()|[\]{}\/]/g,"\\$&")},T=function(e,t){for(var n in t)if(t[n]===e)return!0};if(void 0!==o&&o.exports)o.exports=n,o.exports.createSlug=t;else{try{if(e.getSlug||e.createSlug)throw"speakingurl: globals exists /(getSlug|createSlug)/";e.getSlug=n,e.createSlug=t}catch(e){}}}(this)},{}],29:[function(e,R,t){!function(c){var f=/^\s+/,p=/\s+$/,o=0,a=c.round,h=c.min,b=c.max,e=c.random;function u(e,t){if(t=t||{},(e=e||"")instanceof u)return e;if(!(this instanceof u))return new u(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,o=null,i=null,r=null,a=!1,l=!1;"string"==typeof e&&(e=function(e){e=e.replace(f,"").replace(p,"").toLowerCase();var t,n=!1;if(S[e])e=S[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=N.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=N.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=N.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=N.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=N.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=N.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=N.hex8.exec(e))return{r:T(t[1]),g:T(t[2]),b:T(t[3]),a:B(t[4]),format:n?"name":"hex8"};if(t=N.hex6.exec(e))return{r:T(t[1]),g:T(t[2]),b:T(t[3]),format:n?"name":"hex"};if(t=N.hex4.exec(e))return{r:T(t[1]+""+t[1]),g:T(t[2]+""+t[2]),b:T(t[3]+""+t[3]),a:B(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=N.hex3.exec(e))return{r:T(t[1]+""+t[1]),g:T(t[2]+""+t[2]),b:T(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==typeof e&&(z(e.r)&&z(e.g)&&z(e.b)?(s=e.r,d=e.g,u=e.b,t={r:255*C(s,255),g:255*C(d,255),b:255*C(u,255)},a=!0,l="%"===String(e.r).substr(-1)?"prgb":"rgb"):z(e.h)&&z(e.s)&&z(e.v)?(o=I(e.s),i=I(e.v),t=function(e,t,n){e=6*C(e,360),t=C(t,100),n=C(n,100);var o=c.floor(e),i=e-o,r=n*(1-t),a=n*(1-i*t),l=n*(1-(1-i)*t),s=o%6;return{r:255*[n,a,r,r,l,n][s],g:255*[l,n,n,a,r,r][s],b:255*[r,r,l,n,n,a][s]}}(e.h,o,i),a=!0,l="hsv"):z(e.h)&&z(e.s)&&z(e.l)&&(o=I(e.s),r=I(e.l),t=function(e,t,n){var o,i,r;function a(e,t,n){return n<0&&(n+=1),1<n&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=C(e,360),t=C(t,100),n=C(n,100),0===t)o=i=r=n;else{var l=n<.5?n*(1+t):n+t-n*t,s=2*n-l;o=a(s,l,e+1/3),i=a(s,l,e),r=a(s,l,e-1/3)}return{r:255*o,g:255*i,b:255*r}}(e.h,o,r),a=!0,l="hsl"),e.hasOwnProperty("a")&&(n=e.a));var s,d,u;return n=$(n),{ok:a,format:e.format||l,r:h(255,b(t.r,0)),g:h(255,b(t.g,0)),b:h(255,b(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=a(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=n.ok,this._tc_id=o++}function i(e,t,n){e=C(e,255),t=C(t,255),n=C(n,255);var o,i,r=b(e,t,n),a=h(e,t,n),l=(r+a)/2;if(r==a)o=i=0;else{var s=r-a;switch(i=.5<l?s/(2-r-a):s/(r+a),r){case e:o=(t-n)/s+(t<n?6:0);break;case t:o=(n-e)/s+2;break;case n:o=(e-t)/s+4}o/=6}return{h:o,s:i,l:l}}function r(e,t,n){e=C(e,255),t=C(t,255),n=C(n,255);var o,i,r=b(e,t,n),a=h(e,t,n),l=r,s=r-a;if(i=0===r?0:s/r,r==a)o=0;else{switch(r){case e:o=(t-n)/s+(t<n?6:0);break;case t:o=(n-e)/s+2;break;case n:o=(e-t)/s+4}o/=6}return{h:o,s:i,v:l}}function t(e,t,n,o){var i=[M(a(e).toString(16)),M(a(t).toString(16)),M(a(n).toString(16))];return o&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function l(e,t,n,o){return[M(H(o)),M(a(e).toString(16)),M(a(t).toString(16)),M(a(n).toString(16))].join("")}function n(e,t){t=0===t?0:t||10;var n=u(e).toHsl();return n.s-=t/100,n.s=E(n.s),u(n)}function s(e,t){t=0===t?0:t||10;var n=u(e).toHsl();return n.s+=t/100,n.s=E(n.s),u(n)}function d(e){return u(e).desaturate(100)}function v(e,t){t=0===t?0:t||10;var n=u(e).toHsl();return n.l+=t/100,n.l=E(n.l),u(n)}function g(e,t){t=0===t?0:t||10;var n=u(e).toRgb();return n.r=b(0,h(255,n.r-a(-t/100*255))),n.g=b(0,h(255,n.g-a(-t/100*255))),n.b=b(0,h(255,n.b-a(-t/100*255))),u(n)}function m(e,t){t=0===t?0:t||10;var n=u(e).toHsl();return n.l-=t/100,n.l=E(n.l),u(n)}function y(e,t){var n=u(e).toHsl(),o=(n.h+t)%360;return n.h=o<0?360+o:o,u(n)}function w(e){var t=u(e).toHsl();return t.h=(t.h+180)%360,u(t)}function x(e){var t=u(e).toHsl(),n=t.h;return[u(e),u({h:(n+120)%360,s:t.s,l:t.l}),u({h:(n+240)%360,s:t.s,l:t.l})]}function k(e){var t=u(e).toHsl(),n=t.h;return[u(e),u({h:(n+90)%360,s:t.s,l:t.l}),u({h:(n+180)%360,s:t.s,l:t.l}),u({h:(n+270)%360,s:t.s,l:t.l})]}function _(e){var t=u(e).toHsl(),n=t.h;return[u(e),u({h:(n+72)%360,s:t.s,l:t.l}),u({h:(n+216)%360,s:t.s,l:t.l})]}function j(e,t,n){t=t||6,n=n||30;var o=u(e).toHsl(),i=360/n,r=[u(e)];for(o.h=(o.h-(i*t>>1)+720)%360;--t;)o.h=(o.h+i)%360,r.push(u(o));return r}function O(e,t){t=t||6;for(var n=u(e).toHsv(),o=n.h,i=n.s,r=n.v,a=[],l=1/t;t--;)a.push(u({h:o,s:i,v:r})),r=(r+l)%1;return a}u.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,o=this.toRgb();return e=o.r/255,t=o.g/255,n=o.b/255,.2126*(e<=.03928?e/12.92:c.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:c.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:c.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=$(e),this._roundA=a(100*this._a)/100,this},toHsv:function(){var e=r(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=r(this._r,this._g,this._b),t=a(360*e.h),n=a(100*e.s),o=a(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+o+"%)":"hsva("+t+", "+n+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var e=i(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=i(this._r,this._g,this._b),t=a(360*e.h),n=a(100*e.s),o=a(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+o+"%)":"hsla("+t+", "+n+"%, "+o+"%, "+this._roundA+")"},toHex:function(e){return t(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,o,i){var r=[M(a(e).toString(16)),M(a(t).toString(16)),M(a(n).toString(16)),M(H(o))];if(i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)&&r[3].charAt(0)==r[3].charAt(1))return r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0);return r.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(100*C(this._r,255))+"%",g:a(100*C(this._g,255))+"%",b:a(100*C(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+a(100*C(this._r,255))+"%, "+a(100*C(this._g,255))+"%, "+a(100*C(this._b,255))+"%)":"rgba("+a(100*C(this._r,255))+"%, "+a(100*C(this._g,255))+"%, "+a(100*C(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(A[t(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+l(this._r,this._g,this._b,this._a),n=t,o=this._gradientType?"GradientType = 1, ":"";if(e){var i=u(e);n="#"+l(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,o=this._a<1&&0<=this._a;return t||!o||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return u(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(v,arguments)},brighten:function(){return this._applyModification(g,arguments)},darken:function(){return this._applyModification(m,arguments)},desaturate:function(){return this._applyModification(n,arguments)},saturate:function(){return this._applyModification(s,arguments)},greyscale:function(){return this._applyModification(d,arguments)},spin:function(){return this._applyModification(y,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(j,arguments)},complement:function(){return this._applyCombination(w,arguments)},monochromatic:function(){return this._applyCombination(O,arguments)},splitcomplement:function(){return this._applyCombination(_,arguments)},triad:function(){return this._applyCombination(x,arguments)},tetrad:function(){return this._applyCombination(k,arguments)}},u.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]="a"===o?e[o]:I(e[o]));e=n}return u(e,t)},u.equals=function(e,t){return!(!e||!t)&&u(e).toRgbString()==u(t).toRgbString()},u.random=function(){return u.fromRatio({r:e(),g:e(),b:e()})},u.mix=function(e,t,n){n=0===n?0:n||50;var o=u(e).toRgb(),i=u(t).toRgb(),r=n/100;return u({r:(i.r-o.r)*r+o.r,g:(i.g-o.g)*r+o.g,b:(i.b-o.b)*r+o.b,a:(i.a-o.a)*r+o.a})},u.readability=function(e,t){var n=u(e),o=u(t);return(c.max(n.getLuminance(),o.getLuminance())+.05)/(c.min(n.getLuminance(),o.getLuminance())+.05)},u.isReadable=function(e,t,n){var o,i,r=u.readability(e,t);switch(i=!1,(o=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+o.size){case"AAsmall":case"AAAlarge":i=4.5<=r;break;case"AAlarge":i=3<=r;break;case"AAAsmall":i=7<=r}return i},u.mostReadable=function(e,t,n){var o,i,r,a,l=null,s=0;i=(n=n||{}).includeFallbackColors,r=n.level,a=n.size;for(var d=0;d<t.length;d++)s<(o=u.readability(e,t[d]))&&(s=o,l=u(t[d]));return u.isReadable(e,l,{level:r,size:a})||!i?l:(n.includeFallbackColors=!1,u.mostReadable(e,["#fff","#000"],n))};var S=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},A=u.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(S);function $(e){return e=parseFloat(e),(isNaN(e)||e<0||1<e)&&(e=1),e}function C(e,t){var n;"string"==typeof(n=e)&&-1!=n.indexOf(".")&&1===parseFloat(n)&&(e="100%");var o,i="string"==typeof(o=e)&&-1!=o.indexOf("%");return e=h(t,b(0,parseFloat(e))),i&&(e=parseInt(e*t,10)/100),c.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function E(e){return h(1,b(0,e))}function T(e){return parseInt(e,16)}function M(e){return 1==e.length?"0"+e:""+e}function I(e){return e<=1&&(e=100*e+"%"),e}function H(e){return c.round(255*parseFloat(e)).toString(16)}function B(e){return T(e)/255}var D,P,F,N=(P="[\\s|\\(]+("+(D="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+D+")[,|\\s]+("+D+")\\s*\\)?",F="[\\s|\\(]+("+D+")[,|\\s]+("+D+")[,|\\s]+("+D+")[,|\\s]+("+D+")\\s*\\)?",{CSS_UNIT:new RegExp(D),rgb:new RegExp("rgb"+P),rgba:new RegExp("rgba"+F),hsl:new RegExp("hsl"+P),hsla:new RegExp("hsla"+F),hsv:new RegExp("hsv"+P),hsva:new RegExp("hsva"+F),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function z(e){return!!N.CSS_UNIT.exec(e)}void 0!==R&&R.exports?R.exports=u:window.tinycolor=u}(Math)},{}],30:[function(e,n,t){(function(e){var t;t=function(_){return function(){var v,t,g,m=0,o="error",i="info",r="success",a="warning",e={clear:function(e,t){var n=x();v||y(n),l(e,n,t)||function(e){for(var t=v.children(),n=t.length-1;0<=n;n--)l(_(t[n]),e)}(n)},remove:function(e){var t=x();v||y(t),e&&0===_(":focus",e).length?k(e):v.children().length&&v.remove()},error:function(e,t,n){return s({type:o,iconClass:x().iconClasses.error,message:e,optionsOverride:n,title:t})},getContainer:y,info:function(e,t,n){return s({type:i,iconClass:x().iconClasses.info,message:e,optionsOverride:n,title:t})},options:{},subscribe:function(e){t=e},success:function(e,t,n){return s({type:r,iconClass:x().iconClasses.success,message:e,optionsOverride:n,title:t})},version:"2.1.4",warning:function(e,t,n){return s({type:a,iconClass:x().iconClasses.warning,message:e,optionsOverride:n,title:t})}};return e;function y(e,t){return e||(e=x()),(v=_("#"+e.containerId)).length||t&&(n=e,(v=_("<div/>").attr("id",n.containerId).addClass(n.positionClass)).appendTo(_(n.target)),v=v),v;var n}function l(e,t,n){var o=!(!n||!n.force)&&n.force;return!(!e||!o&&0!==_(":focus",e).length||(e[t.hideMethod]({duration:t.hideDuration,easing:t.hideEasing,complete:function(){k(e)}}),0))}function w(e){t&&t(e)}function s(t){var i=x(),e=t.iconClass||i.iconClass;if(void 0!==t.optionsOverride&&(i=_.extend(i,t.optionsOverride),e=t.optionsOverride.iconClass||e),!function(e,t){if(e.preventDuplicates){if(t.message===g)return!0;g=t.message}return!1}(i,t)){m++,v=y(i,!0);var r=null,a=_("<div/>"),n=_("<div/>"),o=_("<div/>"),l=_("<div/>"),s=_(i.closeHtml),d={intervalId:null,hideEta:null,maxHideTime:null},u={toastId:m,state:"visible",startTime:new Date,options:i,map:t};return t.iconClass&&a.addClass(i.toastClass).addClass(e),function(){if(t.title){var e=t.title;i.escapeHtml&&(e=c(t.title)),n.append(e).addClass(i.titleClass),a.append(n)}}(),function(){if(t.message){var e=t.message;i.escapeHtml&&(e=c(t.message)),o.append(e).addClass(i.messageClass),a.append(o)}}(),i.closeButton&&(s.addClass(i.closeClass).attr("role","button"),a.prepend(s)),i.progressBar&&(l.addClass(i.progressClass),a.prepend(l)),i.rtl&&a.addClass("rtl"),i.newestOnTop?v.prepend(a):v.append(a),function(){var e="";switch(t.iconClass){case"toast-success":case"toast-info":e="polite";break;default:e="assertive"}a.attr("aria-live",e)}(),a.hide(),a[i.showMethod]({duration:i.showDuration,easing:i.showEasing,complete:i.onShown}),0<i.timeOut&&(r=setTimeout(f,i.timeOut),d.maxHideTime=parseFloat(i.timeOut),d.hideEta=(new Date).getTime()+d.maxHideTime,i.progressBar&&(d.intervalId=setInterval(b,10))),i.closeOnHover&&a.hover(h,p),!i.onclick&&i.tapToDismiss&&a.click(f),i.closeButton&&s&&s.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&!0!==e.cancelBubble&&(e.cancelBubble=!0),i.onCloseClick&&i.onCloseClick(e),f(!0)}),i.onclick&&a.click(function(e){i.onclick(e),f()}),w(u),i.debug&&console,a}function c(e){return null==e&&(e=""),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function f(e){var t=e&&!1!==i.closeMethod?i.closeMethod:i.hideMethod,n=e&&!1!==i.closeDuration?i.closeDuration:i.hideDuration,o=e&&!1!==i.closeEasing?i.closeEasing:i.hideEasing;if(!_(":focus",a).length||e)return clearTimeout(d.intervalId),a[t]({duration:n,easing:o,complete:function(){k(a),clearTimeout(r),i.onHidden&&"hidden"!==u.state&&i.onHidden(),u.state="hidden",u.endTime=new Date,w(u)}})}function p(){(0<i.timeOut||0<i.extendedTimeOut)&&(r=setTimeout(f,i.extendedTimeOut),d.maxHideTime=parseFloat(i.extendedTimeOut),d.hideEta=(new Date).getTime()+d.maxHideTime)}function h(){clearTimeout(r),d.hideEta=0,a.stop(!0,!0)[i.showMethod]({duration:i.showDuration,easing:i.showEasing})}function b(){var e=(d.hideEta-(new Date).getTime())/d.maxHideTime*100;l.width(e+"%")}}function x(){return _.extend({},{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1},e.options)}function k(e){v||(v=y()),e.is(":visible")||(e.remove(),e=null,0===v.children().length&&(v.remove(),g=void 0))}}()},void 0!==n&&n.exports?n.exports=t("undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null):window.toastr=t(window.jQuery)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],31:[function(e,t,n){"use strict";var I=e("punycode"),H=e("./util");function A(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}n.parse=r,n.resolve=function(e,t){return r(e,!1,!0).resolve(t)},n.resolveObject=function(e,t){return e?r(e,!1,!0).resolveObject(t):t},n.format=function(e){H.isString(e)&&(e=r(e));return e instanceof A?e.format():A.prototype.format.call(e)},n.Url=A;var B=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,D=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,i=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),P=["'"].concat(i),F=["%","/","?",";","#"].concat(P),N=["/","?","#"],z=/^[+a-z0-9A-Z_-]{0,63}$/,R=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,L={javascript:!0,"javascript:":!0},U={javascript:!0,"javascript:":!0},q={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},G=e("querystring");function r(e,t,n){if(e&&H.isObject(e)&&e instanceof A)return e;var o=new A;return o.parse(e,t,n),o}A.prototype.parse=function(e,t,n){if(!H.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),i=-1!==o&&o<e.indexOf("#")?"?":"#",r=e.split(i);r[0]=r[0].replace(/\\/g,"/");var a=e=r.join(i);if(a=a.trim(),!n&&1===e.split("#").length){var l=D.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],this.query=t?G.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var s=B.exec(a);if(s){var d=(s=s[0]).toLowerCase();this.protocol=d,a=a.substr(s.length)}if(n||s||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var u="//"===a.substr(0,2);!u||s&&U[s]||(a=a.substr(2),this.slashes=!0)}if(!U[s]&&(u||s&&!q[s])){for(var c,f,p=-1,h=0;h<N.length;h++){-1!==(b=a.indexOf(N[h]))&&(-1===p||b<p)&&(p=b)}-1!==(f=-1===p?a.lastIndexOf("@"):a.lastIndexOf("@",p))&&(c=a.slice(0,f),a=a.slice(f+1),this.auth=decodeURIComponent(c)),p=-1;for(h=0;h<F.length;h++){var b;-1!==(b=a.indexOf(F[h]))&&(-1===p||b<p)&&(p=b)}-1===p&&(p=a.length),this.host=a.slice(0,p),a=a.slice(p),this.parseHost(),this.hostname=this.hostname||"";var v="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!v)for(var g=this.hostname.split(/\./),m=(h=0,g.length);h<m;h++){var y=g[h];if(y&&!y.match(z)){for(var w="",x=0,k=y.length;x<k;x++)127<y.charCodeAt(x)?w+="x":w+=y[x];if(!w.match(z)){var _=g.slice(0,h),j=g.slice(h+1),O=y.match(R);O&&(_.push(O[1]),j.unshift(O[2])),j.length&&(a="/"+j.join(".")+a),this.hostname=_.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),v||(this.hostname=I.toASCII(this.hostname));var S=this.port?":"+this.port:"",A=this.hostname||"";this.host=A+S,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!L[d])for(h=0,m=P.length;h<m;h++){var $=P[h];if(-1!==a.indexOf($)){var C=encodeURIComponent($);C===$&&(C=escape($)),a=a.split($).join(C)}}var E=a.indexOf("#");-1!==E&&(this.hash=a.substr(E),a=a.slice(0,E));var T=a.indexOf("?");if(-1!==T?(this.search=a.substr(T),this.query=a.substr(T+1),t&&(this.query=G.parse(this.query)),a=a.slice(0,T)):t&&(this.search="",this.query={}),a&&(this.pathname=a),q[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){S=this.pathname||"";var M=this.search||"";this.path=S+M}return this.href=this.format(),this},A.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",o=this.hash||"",i=!1,r="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&H.isObject(this.query)&&Object.keys(this.query).length&&(r=G.stringify(this.query));var a=this.search||r&&"?"+r||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||q[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),o&&"#"!==o.charAt(0)&&(o="#"+o),a&&"?"!==a.charAt(0)&&(a="?"+a),t+i+(n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(a=a.replace("#","%23"))+o},A.prototype.resolve=function(e){return this.resolveObject(r(e,!1,!0)).format()},A.prototype.resolveObject=function(e){if(H.isString(e)){var t=new A;t.parse(e,!1,!0),e=t}for(var n=new A,o=Object.keys(this),i=0;i<o.length;i++){var r=o[i];n[r]=this[r]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),l=0;l<a.length;l++){var s=a[l];"protocol"!==s&&(n[s]=e[s])}return q[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!q[e.protocol]){for(var d=Object.keys(e),u=0;u<d.length;u++){var c=d[u];n[c]=e[c]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||U[e.protocol])n.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var p=n.pathname||"",h=n.search||"";n.path=p+h}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),v=e.host||e.pathname&&"/"===e.pathname.charAt(0),g=v||b||n.host&&e.pathname,m=g,y=n.pathname&&n.pathname.split("/")||[],w=(f=e.pathname&&e.pathname.split("/")||[],n.protocol&&!q[n.protocol]);if(w&&(n.hostname="",n.port=null,n.host&&(""===y[0]?y[0]=n.host:y.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),g=g&&(""===f[0]||""===y[0])),v)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,y=f;else if(f.length)y||(y=[]),y.pop(),y=y.concat(f),n.search=e.search,n.query=e.query;else if(!H.isNullOrUndefined(e.search)){if(w)n.hostname=n.host=y.shift(),(O=!!(n.host&&0<n.host.indexOf("@"))&&n.host.split("@"))&&(n.auth=O.shift(),n.host=n.hostname=O.shift());return n.search=e.search,n.query=e.query,H.isNull(n.pathname)&&H.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!y.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var x=y.slice(-1)[0],k=(n.host||e.host||1<y.length)&&("."===x||".."===x)||""===x,_=0,j=y.length;0<=j;j--)"."===(x=y[j])?y.splice(j,1):".."===x?(y.splice(j,1),_++):_&&(y.splice(j,1),_--);if(!g&&!m)for(;_--;_)y.unshift("..");!g||""===y[0]||y[0]&&"/"===y[0].charAt(0)||y.unshift(""),k&&"/"!==y.join("/").substr(-1)&&y.push("");var O,S=""===y[0]||y[0]&&"/"===y[0].charAt(0);w&&(n.hostname=n.host=S?"":y.length?y.shift():"",(O=!!(n.host&&0<n.host.indexOf("@"))&&n.host.split("@"))&&(n.auth=O.shift(),n.host=n.hostname=O.shift()));return(g=g||n.host&&y.length)&&!S&&y.unshift(""),y.length?n.pathname=y.join("/"):(n.pathname=null,n.path=null),H.isNull(n.pathname)&&H.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},A.prototype.parseHost=function(){var e=this.host,t=o.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":32,punycode:22,querystring:25}],32:[function(e,t,n){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],33:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],34:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],35:[function(e,t,A){(function(o,i){var l=/%[sdj%]/g;A.format=function(e){if(!w(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var o=arguments,i=o.length,r=String(e).replace(l,function(e){if("%%"===e)return"%";if(i<=n)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(e){return"[Circular]"}default:return e}}),a=o[n];n<i;a=o[++n])m(a)||!d(a)?r+=" "+a:r+=" "+s(a);return r},A.deprecate=function(e,t){if(x(i.process))return function(){return A.deprecate(e,t).apply(this,arguments)};if(!0===o.noDeprecation)return e;var n=!1;return function(){if(!n){if(o.throwDeprecation)throw new Error(t);o.traceDeprecation,n=!0}return e.apply(this,arguments)}};var t,n={};function s(e,t){var n={seen:[],stylize:a};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),g(t)?n.showHidden=t:t&&A._extend(n,t),x(n.showHidden)&&(n.showHidden=!1),x(n.depth)&&(n.depth=2),x(n.colors)&&(n.colors=!1),x(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=r),p(n,e,n.depth)}function r(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function a(e,t){return e}function p(t,n,o){if(t.customInspect&&n&&O(n.inspect)&&n.inspect!==A.inspect&&(!n.constructor||n.constructor.prototype!==n)){var e=n.inspect(o,t);return w(e)||(e=p(t,e,o)),e}var i=function(e,t){if(x(t))return e.stylize("undefined","undefined");if(w(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(y(t))return e.stylize(""+t,"number");if(g(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(t,n);if(i)return i;var r,a=Object.keys(n),l=(r={},a.forEach(function(e,t){r[e]=!0}),r);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),j(n)&&(0<=a.indexOf("message")||0<=a.indexOf("description")))return h(n);if(0===a.length){if(O(n)){var s=n.name?": "+n.name:"";return t.stylize("[Function"+s+"]","special")}if(k(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(_(n))return t.stylize(Date.prototype.toString.call(n),"date");if(j(n))return h(n)}var d,u="",c=!1,f=["{","}"];(v(n)&&(c=!0,f=["[","]"]),O(n))&&(u=" [Function"+(n.name?": "+n.name:"")+"]");return k(n)&&(u=" "+RegExp.prototype.toString.call(n)),_(n)&&(u=" "+Date.prototype.toUTCString.call(n)),j(n)&&(u=" "+h(n)),0!==a.length||c&&0!=n.length?o<0?k(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),d=c?function(t,n,o,i,e){for(var r=[],a=0,l=n.length;a<l;++a)S(n,String(a))?r.push(b(t,n,o,i,String(a),!0)):r.push("");return e.forEach(function(e){e.match(/^\d+$/)||r.push(b(t,n,o,i,e,!0))}),r}(t,n,o,l,a):a.map(function(e){return b(t,n,o,l,e,c)}),t.seen.pop(),function(e,t,n){if(60<e.reduce(function(e,t){return 0,0<=t.indexOf("\n")&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0))return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(d,u,f)):f[0]+u+f[1]}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function b(e,t,n,o,i,r){var a,l,s;if((s=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?l=s.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):s.set&&(l=e.stylize("[Setter]","special")),S(o,i)||(a="["+i+"]"),l||(e.seen.indexOf(s.value)<0?-1<(l=m(n)?p(e,s.value,null):p(e,s.value,n-1)).indexOf("\n")&&(l=r?l.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+l.split("\n").map(function(e){return"   "+e}).join("\n")):l=e.stylize("[Circular]","special")),x(a)){if(r&&i.match(/^\d+$/))return l;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+l}function v(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function m(e){return null===e}function y(e){return"number"==typeof e}function w(e){return"string"==typeof e}function x(e){return void 0===e}function k(e){return d(e)&&"[object RegExp]"===u(e)}function d(e){return"object"==typeof e&&null!==e}function _(e){return d(e)&&"[object Date]"===u(e)}function j(e){return d(e)&&("[object Error]"===u(e)||e instanceof Error)}function O(e){return"function"==typeof e}function u(e){return Object.prototype.toString.call(e)}A.debuglog=function(e){if(x(t)&&(t=o.env.NODE_DEBUG||""),e=e.toUpperCase(),!n[e])if(new RegExp("\\b"+e+"\\b","i").test(t)){o.pid;n[e]=function(){A.format.apply(A,arguments)}}else n[e]=function(){};return n[e]},(A.inspect=s).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},A.isArray=v,A.isBoolean=g,A.isNull=m,A.isNullOrUndefined=function(e){return null==e},A.isNumber=y,A.isString=w,A.isSymbol=function(e){return"symbol"==typeof e},A.isUndefined=x,A.isRegExp=k,A.isObject=d,A.isDate=_,A.isError=j,A.isFunction=O,A.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},A.isBuffer=e("./support/isBuffer");function S(e,t){return Object.prototype.hasOwnProperty.call(e,t)}A.log=function(){},A.inherits=e("inherits"),A._extend=function(e,t){if(!t||!d(t))return e;for(var n=Object.keys(t),o=n.length;o--;)e[n[o]]=t[n[o]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":34,_process:21,inherits:33}],36:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.default=function(e,t){(0,a.default)(e);var n=void 0,o=void 0;"object"===(void 0===t?"undefined":r(t))?(n=t.min||0,o=t.max):(n=t,o=arguments[2]);var i=encodeURI(e).split(/%..|./).length-1;return n<=i&&(void 0===o||i<=o)};var o,i=e("./util/assertString"),a=(o=i)&&o.__esModule?o:{default:o};t.exports=n.default},{"./util/assertString":40}],37:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){if((0,h.default)(e),(t=(0,b.default)(t,y)).require_display_name||t.allow_display_name){var n=e.match(w);if(n)e=n[1];else if(t.require_display_name)return!1}var o=e.split("@"),i=o.pop(),r=o.join("@"),a=i.toLowerCase();if(t.domain_specific_validation&&("gmail.com"===a||"googlemail.com"===a)){var l=(r=r.toLowerCase()).split("+")[0];if(!(0,v.default)(l.replace(".",""),{min:6,max:30}))return!1;for(var s=l.split("."),d=0;d<s.length;d++)if(!k.test(s[d]))return!1}if(!(0,v.default)(r,{max:64})||!(0,v.default)(i,{max:254}))return!1;if(!(0,g.default)(i,{require_tld:t.require_tld})){if(!t.allow_ip_domain)return!1;if(!(0,m.default)(i)){if(!i.startsWith("[")||!i.endsWith("]"))return!1;var u=i.substr(1,i.length-2);if(0===u.length||!(0,m.default)(u))return!1}}if('"'===r[0])return r=r.slice(1,r.length-1),t.allow_utf8_local_part?O.test(r):_.test(r);for(var c=t.allow_utf8_local_part?j:x,f=r.split("."),p=0;p<f.length;p++)if(!c.test(f[p]))return!1;return!0};var h=o(e("./util/assertString")),b=o(e("./util/merge")),v=o(e("./isByteLength")),g=o(e("./isFQDN")),m=o(e("./isIP"));function o(e){return e&&e.__esModule?e:{default:e}}var y={allow_display_name:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0},w=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\,\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\s]*<(.+)>$/i,x=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,k=/^[a-z\d]+$/,_=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,j=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,O=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i;t.exports=n.default},{"./isByteLength":36,"./isFQDN":38,"./isIP":39,"./util/assertString":40,"./util/merge":41}],38:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,l.default)(e),(t=(0,s.default)(t,d)).allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1));for(var n=e.split("."),o=0;o<n.length;o++)if(63<n[o].length)return!1;if(t.require_tld){var i=n.pop();if(!n.length||!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(i))return!1;if(/[\s\u2002-\u200B\u202F\u205F\u3000\uFEFF\uDB40\uDC20]/.test(i))return!1}for(var r,a=0;a<n.length;a++){if(r=n[a],t.allow_underscores&&(r=r.replace(/_/g,"")),!/^[a-z\u00a1-\uffff0-9-]+$/i.test(r))return!1;if(/[\uff01-\uff5e]/.test(r))return!1;if("-"===r[0]||"-"===r[r.length-1])return!1}return!0};var l=o(e("./util/assertString")),s=o(e("./util/merge"));function o(e){return e&&e.__esModule?e:{default:e}}var d={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1};t.exports=n.default},{"./util/assertString":40,"./util/merge":41}],39:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";(0,d.default)(t);n=String(n);{if(!n)return e(t,4)||e(t,6);if("4"===n){if(!u.test(t))return!1;var o=t.split(".").sort(function(e,t){return e-t});return o[3]<=255}if("6"===n){var i=t.split(":"),r=!1,a=e(i[i.length-1],4),l=a?7:8;if(i.length>l)return!1;if("::"===t)return!0;"::"===t.substr(0,2)?(i.shift(),i.shift(),r=!0):"::"===t.substr(t.length-2)&&(i.pop(),i.pop(),r=!0);for(var s=0;s<i.length;++s)if(""===i[s]&&0<s&&s<i.length-1){if(r)return!1;r=!0}else if(a&&s===i.length-1);else if(!c.test(i[s]))return!1;return r?1<=i.length:i.length===l}}return!1};var o,i=e("./util/assertString"),d=(o=i)&&o.__esModule?o:{default:o};var u=/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/,c=/^[0-9A-F]{1,4}$/i;t.exports=n.default},{"./util/assertString":40}],40:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if(!("string"==typeof e||e instanceof String))throw new TypeError("This library (validator.js) validates strings only")},t.exports=n.default},{}],41:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e},t.exports=n.default},{}],42:[function(e,t,n){"use strict";var o=e("speakingurl"),i=/\.[0-9a-z]+$/;t.exports=function(e){var t=e.toLowerCase().trim();if(!i.test(t))return!1;var n=i.exec(t)[0];return t=t.replace(n,""),o(t.trim())+n}},{speakingurl:27}],43:[function(e,t,n){(function(s){"use strict";e("url"),e("console-browserify");var d="undefined"!=typeof window?window.ko:void 0!==s?s.ko:null,u="undefined"!=typeof window?window.jQuery:void 0!==s?s.jQuery:null,c=e("./template-loader.js");e("./ko-bindings.js");var f=e("./timed-call.js").timedCall,p=e("./undomanager/undomain.js"),h=e("./ext/color.js"),b=e("./ext/util.js"),v=e("./ext/inliner.js");e("./ext/localstorage.js");if(void 0===d)throw"Cannot find knockout.js library!";if(void 0===u)throw"Cannot find jquery library!";var n=function(i,e,t,n,o){c.fixPageEvents();var r=[function(o){i&&i.strings&&(o.t=function(e,t){var n=i.strings[e];return void 0===n&&(n=e),o.tt(n,t)})},p(f),h,b,v];if(void 0!==o)for(var a=0;a<o.length;a++)r.push(o[a]);r.push(function(e){var t={messages:{unknownError:e.t("Unknown error"),uploadedBytes:e.t("Uploaded bytes exceed file size"),maxNumberOfFiles:e.t("Maximum number of files exceeded"),acceptFileTypes:e.t("File type not allowed"),maxFileSize:e.t("File is too large"),minFileSize:e.t("File is too small"),post_max_size:e.t("The uploaded file exceeds the post_max_size directive in php.ini"),max_file_size:e.t("File is too big"),min_file_size:e.t("File is too small"),accept_file_types:e.t("Filetype not allowed"),max_number_of_files:e.t("Maximum number of files exceeded"),max_width:e.t("Image exceeds maximum width"),min_width:e.t("Image requires a minimum width"),max_height:e.t("Image exceeds maximum height"),min_height:e.t("Image requires a minimum height"),abort:e.t("File upload aborted"),image_resize:e.t("Failed to resize image"),generic:e.t("Unexpected upload error")}};i&&i.fileuploadConfig&&(t=u.extend(!0,t,i.fileuploadConfig)),d.bindingHandlers.fileupload.extendOptions=t});var l=i.fileuploadConfig?i.fileuploadConfig.url:"/upload/";g(i,d),u("\x3c!-- ko template: 'main' --\x3e\x3c!-- /ko --\x3e").appendTo(s.document.body),void 0===e&&void 0!==t&&(e=t.template),c.load(f,e,t,n,r,l)},g=u.noop,o=e("./ext/custom-extensions");t.exports={isCompatible:c.isCompatible,init:function(e,t){return!!(e&&e.metadata&&e.data)&&(o.extendViewModel(e,t),o.extendKnockout(e),n(e,void 0,e.metadata,e.data,t),!0)},start:n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ext/color.js":76,"./ext/custom-extensions":78,"./ext/inliner.js":84,"./ext/localstorage.js":85,"./ext/util.js":86,"./ko-bindings.js":87,"./template-loader.js":88,"./timed-call.js":89,"./undomanager/undomain.js":90,"console-browserify":3,url:31}],44:[function(t,e,n){(function(e){"use strict";var f="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null;t("console-browserify");f.bindingHandlers.bindIframe={tpl:'<!DOCTYPE html>\r\n<html>\r\n<head>\r\n</head>\r\n<body><div data-bind="block: content"></div></body>\r\n</html>\r\n',init:function(u,c){!function(e){try{var t=u.contentDocument;t.open(),t.write(f.bindingHandlers.bindIframe.tpl),t.close();try{var n=t.body;if(n){for(var o=u.contentWindow.parent.document.getElementsByTagName("script"),i=0;i<o.length;i++)"text/html"==o[i].getAttribute("type")&&o[i].getAttribute("id")&&(a=t,l=o[i].getAttribute("id"),s=o[i].innerHTML,d=void 0,(d=a.createElement("script")).setAttribute("type","text/html"),d.setAttribute("id",l),d.text=s,a.body.appendChild(d));var r=t.getElementsByTagName("HTML");f.utils.domNodeDisposal.addDisposeCallback(u,function(){f.cleanNode(r[0]||n)}),f.applyBindings(c(),r[0]||n)}}catch(e){throw e}}catch(e){throw e}var a,l,s,d}()}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":3}],45:[function(e,t,n){(function(t){"use strict";var d="undefined"!=typeof window?window.ko:void 0!==t?t.ko:null;e("console-browserify");d.bindingHandlers.withProperties={init:function(e,t,n,o,i){var r=i.createChildContext(i.$rawData,null,function(e){d.utils.extend(e,t())});return d.applyBindingsToDescendants(r,e),{controlsDescendantBindings:!0}}},d.virtualElements.allowedBindings.withProperties=!0,d.bindingHandlers.log={init:function(e,t,n,o,i){}},d.bindingHandlers.block={templateExists:function(e){return!!t.document.getElementById(e)},_chooseTemplate:function(e,t,n,o){var i=t+"-"+n;if(d.bindingHandlers.block.templateExists(i))return i;if(null!=o)return d.bindingHandlers.block._chooseTemplate(e,t,o);var r=e?"array":"object-"+n;if(d.bindingHandlers.block.templateExists(r))return r;throw"cannot find template for "+i+"/"+r},_displayMode:function(e,t){var n=void 0!==e.type?d.utils.unwrapObservable(e.type):"notablock-"+typeof e,o=void 0!==e.splice,i=t.templateMode?t.templateMode:"show";return d.bindingHandlers.block._chooseTemplate(o,n,i,t.templateModeFallback)},_makeTemplateValueAccessor:function(l,s){return function(){var e,t,n=l(),o=d.utils.peekObservable(n);if(!o||"object"!=typeof o.data&&"function"!=typeof o.data)e=n;else if(e=o.data,void 0!==o.template){var i=d.utils.unwrapObservable(o.template),r=s.templateMode?s.templateMode:"show";t=d.bindingHandlers.block._chooseTemplate(!1,i,r,s.templateModeFallback)}var a=d.utils.unwrapObservable(e);if(d.isObservable(a),void 0===t)if(void 0===e)t="empty";else try{t=d.bindingHandlers.block._displayMode(a,s)}catch(e){throw e}return{name:t,data:e,templateEngine:d.nativeTemplateEngine.instance}}},init:function(e,t,n,o,i){t();var r=d.bindingHandlers.block._makeTemplateValueAccessor(t,i);return d.bindingHandlers.template.init(e,r)},update:function(e,t,n,o,i){var r=d.bindingHandlers.block._makeTemplateValueAccessor(t,i);return d.bindingHandlers.template.update(e,r,n,o,i)}},d.expressionRewriting.bindingRewriteValidators.block=!1,d.virtualElements.allowedBindings.block=!0}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":3}],46:[function(e,t,n){"use strict";t.exports=e("./string-template.js")},{"./string-template.js":61}],47:[function(o,e,t){(function(e){"use strict";o("evol-colorpicker");var l="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null,s="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,t="undefined"!=typeof window?window.kojqui:void 0!==e?e.kojqui:null,n=function(){t.BindingHandler.call(this,"colorpicker")};((n.prototype=t.utils.createObject(t.BindingHandler.prototype)).constructor=n).prototype.init=function(n,e,t){var o=e(),i=o.color,r=s.computed({read:i,write:i,disposeWhenNodeIsRemoved:n});s.bindingHandlers.value.init(n,function(){return r},t);var a=function(e,t){void 0!==t&&r(t)};l(n).on("change.color",a),s.computed({read:function(){var e={color:s.utils.unwrapObservable(r),showOn:"button"};for(var t in o)"color"!==t&&o.hasOwnProperty(t)&&(e[t]=s.utils.unwrapObservable(o[t]));l(n).colorpicker(e)},disposeWhenNodeIsRemoved:n}),s.utils.domNodeDisposal.addDisposeCallback(n,function(){l(n).off("change.color",a),l(n).colorpicker("destroy")})},t.utils.register(n)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"evol-colorpicker":5}],48:[function(e,t,n){(function(e){"use strict";var i="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null;i.bindingHandlers.cssText={update:function(e,t,n){var o=i.utils.unwrapObservable(t());try{e.innerText=o}catch(t){e.styleSheet||(e.innerHTML="a{}"),e.styleSheet.cssText=o}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],49:[function(o,e,t){(function(e){"use strict";var t="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,n="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null;o("console-browserify");t.bindingHandlers.focusable={focus:function(){},blur:function(){},init:function(e){t.utils.domNodeDisposal.addDisposeCallback(e,function(){n(e).off("focusin",t.bindingHandlers.focusable.focus),n(e).off("focusout",t.bindingHandlers.focusable.blur)}),n(e).on("focusin",t.bindingHandlers.focusable.focus),n(e).on("focusout",t.bindingHandlers.focusable.blur)}},t.bindingHandlers.scrollable={scroll:function(){},init:function(e){t.utils.domNodeDisposal.addDisposeCallback(e,function(){n(e).off("scroll",t.bindingHandlers.scrollable.scroll)}),n(e).on("scroll",t.bindingHandlers.scrollable.scroll)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":3}],50:[function(e,t,n){(function(e){"use strict";var t="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null;!function(d,u){d.utils.unwrapObservable;var c=d.utils.domData.get;d.utils.domData.set,d.bindingHandlers.extdroppable={init:function(e,t,n,o,i){var r,a=u(e),l=d.utils.unwrapObservable(t())||{},s={};u.extend(!0,s,d.bindingHandlers.extdroppable),l.data?(l.options&&s.options&&(d.utils.extend(s.options,l.options),delete l.options),d.utils.extend(s,l)):s.data=l,r=s.options.drop,a.droppable(d.utils.extend(s.options,{drop:function(e,t){var n=t.draggable[0],o=c(n,"ko_sortItem")||c(n,"ko_dragItem");o&&(o.clone&&(o=o.clone()),s.dragged&&(o=s.dragged.call(this,o,e,t)||o),s.data&&s.data(o)),r&&r.apply(this,arguments)}})),void 0!==s.isEnabled&&d.computed({read:function(){a.droppable(d.utils.unwrapObservable(s.isEnabled)?"enable":"disable")},disposeWhenNodeIsRemoved:e})},update:function(e,t,n,o,i){},targetIndex:null,afterMove:null,beforeMove:null,options:{}}}("undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,t)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],51:[function(e,t,n){(function(e){"use strict";var t="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null;t.extenders.paging=function(i,e){var r=t.observable(e||10),a=t.observable(1);return i.pageSize=t.computed({read:r,write:function(e){r(0<e?e:10)}}),i.currentPage=t.computed({read:a,write:function(e){e>i.pageCount()?a(i.pageCount()):a(e<=0?1:e)}}),i.pageCount=t.computed(function(){return Math.ceil(i().length/i.pageSize())||1}),i.currentPageData=t.computed(function(){var e=r(),t=a(),n=e*(t-1),o=e*t;return i().slice(n,o)}),i.moveFirst=function(){i.currentPage(1)},i.movePrevious=function(){i.currentPage(i.currentPage()-1)},i.moveNext=function(){i.currentPage(i.currentPage()+1)},i.moveLast=function(){i.currentPage(i.pageCount())},i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],52:[function(n,e,t){(function(a){"use strict";var l="undefined"!=typeof window?window.jQuery:void 0!==a?a.jQuery:null,s="undefined"!=typeof window?window.ko:void 0!==a?a.ko:null,e="undefined"!=typeof window?window.jQuery.ui.sortable:void 0!==a?a.jQuery.ui.sortable:null,t="undefined"!=typeof window?window.jQuery.ui.draggable:void 0!==a?a.jQuery.ui.draggable:null;n("console-browserify");if(n("knockout-sortable"),void 0===e)throw"Cannot find jquery-ui sortable widget dependency!";if(void 0===t)throw"Cannot find jquery-ui sortable widget dependency!";var d=function(e,t){e()?t.type==e()+"stop"&&e(!1):"dragstart"!=t.type&&"sortstart"!=t.type||e(t.type.substring(0,4))},r=function(e){return function(){var i=e();s.utils.peekObservable(i),s.utils.unwrapObservable(i),"undefined"==i.options&&(i.options={});var n=i.options.start;i.options.start=function(e,t){if(void 0!==i.dragging&&s.isWritableObservable(i.dragging)&&d(i.dragging,e),void 0!==i.dropContainer&&(i.scrollInterval=a.setInterval(function(){var e=l(i.dropContainer).scrollTop();l(i.dropContainer).scrollTop(e+i.adding)},20)),void 0!==n)return n(e,t)};var o=i.options.stop;i.options.stop=function(e,t){if(void 0!==i.dragging&&s.isWritableObservable(i.dragging)&&d(i.dragging,e),void 0!==i.dropContainer&&a.clearInterval(i.scrollInterval),void 0!==o)return o(e,t)};var r=i.options.drag;return i.options.drag=function(e,t){if(void 0!==i.dropContainer){var n=e.pageY-l(i.dropContainer).offset().top,o=n-l(i.dropContainer).height();i.adding=n<-20?-20:n<0?-10:n<10?-5:20<o?20:0<o?10:-10<o?5:0}if(void 0!==r)return r(e,t)},i}};s.bindingHandlers.extsortable={init:function(e,t,n,o,i){return s.bindingHandlers.sortable.init(e,r(t),n,o,i)},update:function(e,t,n,o,i){return s.bindingHandlers.sortable.update(e,r(t),n,o,i)}},s.bindingHandlers.extdraggable={init:function(e,t,n,o,i){return s.bindingHandlers.draggable.init(e,r(t),n,o,i)},update:function(e,t,n,o,i){return s.bindingHandlers.draggable.update(e,r(t),n,o,i)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":3,"knockout-sortable":11}],53:[function(e,t,n){(function(b){"use strict";var v="undefined"!=typeof window?window.jQuery:void 0!==b?b.jQuery:null,g="undefined"!=typeof window?window.ko:void 0!==b?b.ko:null;e("console-browserify");g.bindingHandlers.fudroppable={init:function(e,t){var n=t()||{},o={},i=function(e,t,n,o,i,r){e[t]?b.clearTimeout(e[t]):(void 0!==o&&n.classList.add(o),g.isWriteableObservable(i)&&!i()&&i(!0));var a=function(){e[t]=null,void 0!==o&&n.classList.remove(o),g.isWriteableObservable(i)&&i()&&i(!1)};"dragleave"==r.type?a():e[t]=b.setTimeout(a,500)};(n.active||n.activeClass)&&g.utils.registerEventHandler(b,"dragover",i.bind(void 0,o,"activeTimeout",e,n.activeClass,n.active)),n.hoverClass&&g.utils.registerEventHandler(e,"dragover dragenter dragleave",i.bind(void 0,o,"hoverTimeout",e,n.hoverClass,void 0))}},g.bindingHandlers.fileupload={extendOptions:{},init:function(e,t){g.utils.domNodeDisposal.addDisposeCallback(e,function(){v(e).fileupload("destroy")}),!("WebkitAppearance"in b.document.documentElement.style)||"webkitNbspMode"in b.document.documentElement.style||"StyleMedia"in b?v(e).attr("title",""):v(e).attr("title"," ")},update:function(e,t){var s=t()||{},n=v(e),d=n.parents(".uploadzone"),o=s.data;s.data=void 0;var u=s.canvasPreview;g.utils.extend(s,{url:"/upload/",dataType:"json",dropZone:d.find(".mo-uploadzone")[0],autoUpload:!0,acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,maxFileSize:1048576,disableImageResize:/Android(?!.*Chrome)|Opera/.test(b.navigator.userAgent),previewMaxWidth:200,previewMaxHeight:200,previewCrop:!1,replaceFileInput:!1,messages:{unknownError:"Unknown error",uploadedBytes:"Uploaded bytes exceed file size",maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small",post_max_size:"The uploaded file exceeds the post_max_size directive in php.ini",max_file_size:"File is too big",min_file_size:"File is too small",accept_file_types:"Filetype not allowed",max_number_of_files:"Maximum number of files exceeded",max_width:"Image exceeds maximum width",min_width:"Image requires a minimum width",max_height:"Image exceeds maximum height",min_height:"Image requires a minimum height",abort:"File upload aborted",image_resize:"Failed to resize image",generic:"Unexpected upload error"}}),g.utils.extend(s,g.bindingHandlers.fileupload.extendOptions);var c=0,f="",p=function(){0==--c&&(o&&o(f),f="",u&&(d.find("img").show(),d.find("canvas").remove()),d.removeClass("uploading"),d.find(".progress-bar").css("width",0))},h=function(e){if("object"==typeof s.messages&&null!==s.messages){var t=e.match(/^([^ ]+)(.*)$/);if(t&&void 0!==s.messages[t[1]])return s.messages[t[1]]+t[2]}return e};s.uploadToTemplate?s.url=g.bindingHandlers.fileupload.extendOptions.url.template:s.url=g.bindingHandlers.fileupload.extendOptions.url.mailing,n.fileupload(s);for(var i=["fileuploadadd","fileuploadprocessalways","fileuploadprogressall","fileuploaddone","fileuploadfail"],r=function(e,t){if("fileuploadadd"==e.type&&c++,"fileuploadfail"==e.type&&(s.onerror&&(""===t.errorThrown&&"error"==t.textStatus?s.onerror(h("generic")):s.onerror(h("generic ("+t.errorThrown+")"))),p()),"fileuploaddone"==e.type)if(void 0!==t.result.files[0].url){if(s.onfile)for(var n=0;n<t.result.files.length;n++)t.result.files[n]=g.bindingHandlers.fileupload.remoteFilePreprocessor(t.result.files[n]),s.onfile(t.result.files[n]);if(""===f&&(f=t.result.files[0].url),u){var o=new Image;o.onload=p,o.onerror=p,o.src=t.result.files[0].url}else p()}else void 0!==t.result.files[0].error?s.onerror&&s.onerror(h(t.result.files[0].error)):s.onerror&&s.onerror(h("generic (Unexpected Error retrieving uploaded file)")),p();if("fileuploadprocessalways"==e.type){var i=t.index,r=t.files[i];if(r.preview&&0===i&&0===d.find("canvas").length){if(u){var a=v(r.preview).css("width","100%");d.find("img").hide(),d.prepend(a)}d.addClass("uploading"),d.find(".progress-bar").css("width",0)}r.error&&(s.onerror&&s.onerror(h(r.error)),p())}if("fileuploadprogressall"==e.type){var l=parseInt(t.loaded/t.total*100,10);d.find(".progress-bar").css("width",l+"%")}},a=i.length-1;0<=a;a--){var l=i[a];n.on(l,r)}v.support.fileInput||n.prop("disabled",!0).parent().addClass("disabled")}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":3}],54:[function(n,e,t){(function(e){"use strict";var t,l,u="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null;n("console-browserify");if(u.bindingHandlers.ifSubs={cloneNodes:function(e,t){for(var n=0,o=e.length,i=[];n<o;n++){var r=e[n].cloneNode(!0);i.push(t?u.cleanNode(r):r)}return i},init:function(i,r,e,t,a){var l,s,d=r();return void 0===d.data.subsCount&&u.extenders.subscriptionsCount(d.data),u.computed(function(){var e,t,n=u.utils.unwrapObservable(r().data.subsCount),o=!s;t=-(void 0!==r().gutter?r().gutter:1),e=n+(l?t:0)>=u.utils.unwrapObservable(d.threshold),void 0!==r().not&&r().not&&(e=!e),(o||e!==l)&&(o&&u.computedContext.getDependenciesCount()&&(s=u.bindingHandlers.ifSubs.cloneNodes(u.virtualElements.childNodes(i),!0)),e?(o||u.virtualElements.setDomNodeChildren(i,u.bindingHandlers.ifSubs.cloneNodes(s)),u.applyBindingsToDescendants(a,i)):u.virtualElements.emptyNode(i),l=e)},null,{disposeWhenNodeIsRemoved:i}),{controlsDescendantBindings:!0}}},u.virtualElements.allowedBindings.ifSubs=!0,"function"==typeof u.subscription&&void 0!==u.isWritableObservable)t="beforeSubscriptionAdd",l="afterSubscriptionRemove";else if("3.2.0"==u.version)t="va",l="nb";else if("3.3.0"==u.version)t="ja",l="ua";else if("3.4.0"==u.version)t="sa",l="Ia";else if("3.4.1"==u.version)t="sa",l="Ia";else if("3.4.2"==u.version)t="ua",l="Ka";else{if("3.5.0-beta"!=u.version)throw"Unsupported minimized Knockout version "+u.version+" (supported DEBUG or minimized 3.2.0 ... 3.5.0-beta)";t="Pa",l="ab"}u.extenders.subscriptionsCount=function(n,o,i){if(void 0===n.subsCount){n.subsCount=u.observable(n.getSubscriptionsCount()).extend({notify:"always"});var r=n[t],a=n[l];n[t]=function(e){r&&r.call(n,e);var t=n.getSubscriptionsCount()+1;void 0!==o&&t!=o&&void 0!==i&&t!=i||n.subsCount(t)},n[l]=function(e){a&&a.call(n,e);var t=n.getSubscriptionsCount();void 0!==o&&t!=o&&void 0!==i&&t!=i||n.subsCount(t)}}return null}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":3}],55:[function(o,e,t){(function(e){"use strict";var t="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null,n="undefined"!=typeof window?window.jQuery.ui.spinner:void 0!==e?e.jQuery.ui.spinner:null;o("console-browserify");if(void 0===n)throw"Cannot find jquery-ui spinner widget dependency!";t.widget("ui.spinner",n,{_adjustValue:function(e){this._super(e);var t=this.options;return e=parseFloat(e.toFixed(this._precision())),null!==t.max&&e>t.max?t.max:null!==t.min&&e<t.min?t.min:e}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":3}],56:[function(o,e,t){(function(e){"use strict";var t="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null,n=(o("console-browserify"),"undefined"!=typeof window?window.jQuery.ui.tabs:void 0!==e?e.jQuery.ui.tabs:null);if(void 0===n)throw"Cannot find jquery-ui tabs widget dependency!";t.widget("ui.tabs",n,{_isLocal:function(e){return"true"==e.getAttribute("data-local")||this._superApply(arguments)}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":3}],57:[function(e,t,n){(function(e){"use strict";var i="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null;i.bindingHandlers.preloader={init:function(e,t){var n=t();if(void 0===n.preloaded){n.preloaded=i.observable("");var o=function(e){if(e!=n.preloaded())if(""!==e){var t=new Image;t.onload=function(){n.preloaded(e)},t.onerror=function(){n.preloaded(e)},t.src=e}else n.preloaded(e)};n.subscribe(o),o(n())}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],58:[function(e,t,n){(function(o){"use strict";t.exports={init:function(){},addTemplate:function(e,t){var n=o.document.createElement("script");n.setAttribute("type","text/html"),n.setAttribute("id",e),n.text=t,o.document.body.appendChild(n)},removeTemplate:function(e){var t=o.document.getElementById(e);t&&t.parentNode.removeChild(t)},getTemplateContent:function(e){var t=o.document.getElementById(e);return t?t.innerHTML:void 0}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],59:[function(e,t,n){(function(t){"use strict";var n,o="undefined"!=typeof window?window.ko:void 0!==t?t.ko:null,i="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null,r=(e("console-browserify"),"undefined"!=typeof window?window.tinymce:void 0!==t?t.tinymce:null),a=function(){if((n=void 0)!==r.activeEditor&&null!==r.activeEditor&&void 0!==r.activeEditor.theme&&null!==r.activeEditor.theme&&void 0!==r.activeEditor.theme.panel&&null!==r.activeEditor.theme.panel){(void 0!==r.activeEditor.theme.panel._visible&&r.activeEditor.theme.panel._visible&&r.activeEditor.theme.panel._fixed||void 0!==r.activeEditor.theme.panel.state&&r.activeEditor.theme.panel.state.get("visible")&&r.activeEditor.theme.panel.state.get("fixed"))&&r.activeEditor.theme.panel.fixed(!1);var e=void 0!==r.activeEditor.bodyElement?r.activeEditor.bodyElement:r.activeEditor.dom.settings.root_element;null!==e&&void 0!==e.classList&&e.classList.contains("mce-edit-focus")&&(r.activeEditor.nodeChanged(),r.activeEditor.theme.panel.visible(!0),r.activeEditor.theme.panel.layoutRect().y<=40&&r.activeEditor.theme.panel.moveBy(0,40-r.activeEditor.theme.panel.layoutRect().y))}};o.bindingHandlers.wysiwygScrollfix={scroll:function(e){n&&t.clearTimeout(n),n=t.setTimeout(a,50)},init:function(e){o.utils.domNodeDisposal.addDisposeCallback(e,function(){i(e).off("scroll",o.bindingHandlers.wysiwygScrollfix.scroll)}),i(e).on("scroll",o.bindingHandlers.wysiwygScrollfix.scroll)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":3}],60:[function(t,e,n){(function(e){"use strict";var b="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null,v="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,g=(t("console-browserify"),function(e,t,n,o){var i=n.scrollTop(),r=i-o-(t?20:-20);if(void 0!==n[0].nodeType){var a={scrollTop:Math.round(r)+"px"},l=Math.round(Math.abs(r-i));n.stop().animate(a,l)}else n.scrollTop(r)});v.bindingHandlers.scrollIntoView={update:function(e,t,n,o,i){if(v.utils.unwrapObservable(t()))try{for(;8===e.nodeType;)e=e.nextSibling;if(8!==e.nodeType){var r,a=b(e).scrollParent(),l=!1;9==a[0].nodeType?(a=b(a[0].defaultView),l=!(r=0)):r=a.offset().top;var s=a.height(),d=a.scrollTop(),u=r+s,c=b(e),f=c.offset().top;l&&(f-=d);var p=c.height(),h=f+p;r<f&&f+p<u||(p<s?(f<r&&g(0,!0,a,r-f),u<h&&g(0,!1,a,u-h)):(f<r&&h<u&&g(0,!1,a,u-h),r<f&&u<h&&g(0,!0,a,r-f)))}}catch(e){}}},v.virtualElements.allowedBindings.scrollIntoView=!0}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":3}],61:[function(i,r,e){(function(e){"use strict";var n="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,t=i("./script-template.js"),o={};n.templateSources.stringTemplate=function(e,t){this.templateName=e,this.template=t,this._data={}},n.utils.extend(n.templateSources.stringTemplate.prototype,{data:function(e,t){if(1===arguments.length)return this._data[e];this._data[e]=t},text:function(e){if(0===arguments.length)return this.template;this.template=e}}),r.exports={init:function(){var e,t;n.setTemplateEngine((e=new n.nativeTemplateEngine,t=e.makeTemplateSource,e.makeTemplateSource=function(e){return void 0!==o[e]?new n.templateSources.stringTemplate(e,o[e]):t(e)},e))},addTemplate:function(e,t){o[e]=t},removeTemplate:function(e){void 0!==o[e]?o[e]=void 0:t.removeTemplate(e)},getTemplateContent:function(e){return void 0!==o[e]?o[e]:t.getTemplateContent(e)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./script-template.js":58}],62:[function(t,e,n){(function(e){"use strict";var r="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,a="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null,l=("undefined"!=typeof window?window.kojqui:void 0!==e&&e.kojqui,t("console-browserify"),function(e,t){return function(){return r.utils.extend(t,e()),t}}),s={show:{delay:500},track:!0,items:'[title][title!=""][title!=" "]'};r.bindingHandlers.tooltips={init:function(e,t,n,o,i){if(void 0!==a.fn.tooltip&&void 0!==r.bindingHandlers.tooltip)return r.bindingHandlers.tooltip.init(e,l(t,s),n,o,i)},update:function(e,t,n,o,i){if(void 0!==a.fn.tooltip&&void 0!==r.bindingHandlers.tooltip)return r.bindingHandlers.tooltip.update(e,l(t,s),n,o,i)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":3}],63:[function(t,e,n){(function(e){"use strict";var a="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null;t("console-browserify");a.bindingHandlers.validatedValue={init:function(n,o,e){var t=o;if(void 0!==n.pattern){var i=new RegExp("^(?:"+n.pattern+")$"),r=a.computed({read:function(){var e=a.utils.unwrapObservable(o());return null===e||""===e||i.test(e)?n.classList.remove("invalid"):n.classList.add("invalid"),e},write:a.isWriteableObservable(o())&&function(e){a.selectExtensions.writeValue(n,e);var t=a.selectExtensions.readValue(n);o()(t)},disposeWhenNodeIsRemoved:n});t=function(){return r}}a.bindingHandlers.value.init(n,t,e)}},a.expressionRewriting._twoWayBindings.validatedValue=!0}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":3}],64:[function(e,t,n){(function(r){"use strict";var d="undefined"!=typeof window?window.ko:void 0!==r?r.ko:null;e("console-browserify");d.bindingHandlers.uniqueId={currentIndex:0,init:function(e,t){var n=d.utils.unwrapObservable(t())||{};if(""===n.id()){var o,i;for(i="ko_"+(void 0!==n.type?d.utils.unwrapObservable(n.type):"block");o=i+"_"+ ++d.bindingHandlers.uniqueId.currentIndex,r.document.getElementById(o););n.id(o)}}},d.virtualElements.allowedBindings.uniqueId=!0,d.bindingHandlers.virtualAttr={update:function(e,t){8!==e.nodeType&&d.bindingHandlers.attr.update(e,t)}},d.virtualElements.allowedBindings.virtualAttr=!0,d.bindingHandlers.virtualAttrStyle={update:function(e,t,n,o,i){if(8!==e.nodeType){var r=["style"];(void 0===i.templateMode||"wysiwyg"!=i.templateMode)&&r.push("replacedstyle");for(var a=d.utils.unwrapObservable(t()),l=0;l<r.length;l++){var s=r[l];!1===a||null==a?e.removeAttribute(s):e.setAttribute(s,a.toString())}}}},d.virtualElements.allowedBindings.virtualAttrStyle=!0,d.bindingHandlers.virtualStyle={update:function(e,t){8!==e.nodeType&&d.bindingHandlers.style.update(e,t)}},d.virtualElements.allowedBindings.virtualStyle=!0,d.bindingHandlers.virtualHtml={init:d.bindingHandlers.html.init,update:function(e,t){if(8===e.nodeType){var n=d.utils.unwrapObservable(t());if(d.virtualElements.emptyNode(e),null!=n){"string"!=typeof n&&(n=n.toString());var o=d.utils.parseHtmlFragment(n);if(o)for(var i=e.nextSibling,r=0,a=o.length;r<a;r++)i.parentNode.insertBefore(o[r],i)}}else d.bindingHandlers.html.update(e,t);return{controlsDescendantBindings:!0}}},d.virtualElements.allowedBindings.virtualHtml=!0}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":3}],65:[function(e,t,n){(function(f){"use strict";var p="undefined"!=typeof window?window.tinymce:void 0!==f?f.tinymce:null,h=("undefined"!=typeof window?window.jQuery:void 0!==f&&f.jQuery,"undefined"!=typeof window?window.ko:void 0!==f?f.ko:null),b=e("console-browserify");e("./eventable.js"),h.bindingHandlers.wysiwygOrHtml={init:function(e,t,n,o,i){return void 0===i.templateMode||"wysiwyg"!=i.templateMode?h.bindingHandlers.virtualHtml.init():h.bindingHandlers.wysiwyg.init(e,t,n,o,i)},update:function(e,t,n,o,i){if(void 0===i.templateMode||"wysiwyg"!=i.templateMode)return h.bindingHandlers.virtualHtml.update(e,t,n,o,i)}},h.virtualElements.allowedBindings.wysiwygOrHtml=!0,h.bindingHandlers.wysiwygHref={init:function(e,t,n,o,i){8!==e.nodeType&&(t(),void 0===i.templateMode||"wysiwyg"!=i.templateMode?e.setAttribute("target","_new"):void 0!==n().wysiwygOrHtml?e.setAttribute("href","javascript:void(0)"):(e.removeAttribute("href"),e.setAttribute("disabledhref","#")))},update:function(e,t,n,o,i){if(8!==e.nodeType){var r=void 0===i.templateMode||"wysiwyg"!=i.templateMode,a=h.utils.unwrapObservable(t());r&&(!1===a||null==a?e.removeAttribute("href"):e.setAttribute("href",a.toString()))}}},h.virtualElements.allowedBindings.wysiwygHref=!0,h.bindingHandlers.wysiwygSrc={convertedUrl:function(e,t,n,o){var i=-1==e.indexOf("?")?"?":"&";return e+i+"method="+t+"&width="+n+(null!==o?"&height="+o:"")},placeholderUrl:function(e,t,n){},update:function(e,t,n,o,i){var r=h.utils.unwrapObservable(t()),a=h.utils.unwrapObservable(r.src),l=h.utils.unwrapObservable(r.placeholder),s=h.utils.unwrapObservable(r.width),d=h.utils.unwrapObservable(r.height);if(!1===a||null==a||""===a)"object"==typeof l&&null!==l?e.setAttribute("src",h.bindingHandlers.wysiwygSrc.placeholderUrl(l.width,l.height,l.text)):e.removeAttribute("src");else{var u=h.utils.unwrapObservable(r.method);u||(u=0<s&&0<d?"cover":"resize");var c=h.bindingHandlers.wysiwygSrc.convertedUrl(a.toString(),u,s,d);e.setAttribute("src",c)}null!=s?e.setAttribute("width",s):e.removeAttribute("width"),null!=d?e.setAttribute("height",d):e.removeAttribute("height")}},h.bindingHandlers.wysiwygId={init:function(e,t,n,o,i){void 0===i.templateMode||"wysiwyg"!=i.templateMode||e.setAttribute("id",h.utils.unwrapObservable(t()))},update:function(e,t,n,o,i){void 0===i.templateMode||"wysiwyg"!=i.templateMode||e.setAttribute("id",h.utils.unwrapObservable(t()))}},h.virtualElements.allowedBindings.wysiwygId=!0,h.bindingHandlers.wysiwygClick={init:function(e,t,n,o,i){void 0===i.templateMode||"wysiwyg"!=i.templateMode||h.bindingHandlers.click.init(e,t,n,o,i)}},h.virtualElements.allowedBindings.wysiwygClick=!0,h.bindingHandlers.wysiwygCss={update:function(e,t,n,o,i){void 0===i.templateMode||"wysiwyg"!=i.templateMode||h.bindingHandlers.css.update(e,t,n,o,i)}},h.virtualElements.allowedBindings.wysiwygCss=!0,h.bindingHandlers.wysiwygImg={makeTemplateValueAccessor:function(o,i){return function(){var e=void 0!==i.templateMode&&"wysiwyg"==i.templateMode,t=o(),n=h.utils.peekObservable(t);return h.utils.unwrapObservable(t),{name:e?n._editTemplate:n._template,templateEngine:h.nativeTemplateEngine.instance}}},init:function(e,t,n,o,i){return h.bindingHandlers.template.init(e,h.bindingHandlers.wysiwygImg.makeTemplateValueAccessor(t,i))},update:function(e,t,n,o,i){return i=i.extend(t()),h.bindingHandlers.template.update(e,h.bindingHandlers.wysiwygImg.makeTemplateValueAccessor(t,i),n,o,i)}},h.virtualElements.allowedBindings.wysiwygImg=!0;var v=function(e,t){try{return this.originalFire.apply(this,arguments)}catch(t){}};h.bindingHandlers.wysiwyg={debug:!1,getContentOptions:{format:"raw"},useTarget:!1,currentIndex:0,standardOptions:{},initializingClass:"wysiwyg-loading",removeSelectionOnBlur:!0,emptyClass:void 0,fullOptions:{toolbar1:"bold italic forecolor backcolor hr styleselect removeformat | link unlink | pastetext code",plugins:["link hr paste lists textcolor code"]},init:function(n,t,e,o,i){h.bindingHandlers.focusable.init(n);var r;h.bindingHandlers.wysiwyg.debug&&b.debug;h.bindingHandlers.wysiwyg.useTarget?r="@target_"+ ++h.bindingHandlers.wysiwyg.currentIndex:(r=n.getAttribute("id"))||(r="wysiwyg_"+ ++h.bindingHandlers.wysiwyg.currentIndex,n.setAttribute("id",r)),h.bindingHandlers.wysiwyg.initializingClass&&n.classList.add(h.bindingHandlers.wysiwyg.initializingClass),h.utils.domNodeDisposal.addDisposeCallback(n,function(){p.remove("#"+n.getAttribute("id"))});var a=t();if(!h.isObservable(a))throw"Wysiwyg binding called with non observable";if(8===n.nodeType)throw"Wysiwyg binding called on virtual node, ignoring...."+n.innerHTML;var l,s="DIV"==n.tagName||"TD"==n.tagName,d=!1,u=!1,c={inline:!0,hidden_input:!1,plugins:["paste"],toolbar1:"bold italic",toolbar2:"",preview_styles:!1,paste_as_text:!0,language:"en",schema:"html5",extended_valid_elements:"strong/b,em/i,*[*]",menubar:!1,skin:"gray-flat",forced_root_block:s?"p":"",init_instance_callback:function(e){if(h.bindingHandlers.wysiwyg.initializingClass&&n.classList.remove(h.bindingHandlers.wysiwyg.initializingClass),"function"==typeof b.debug)n.currentStyle?n.currentStyle.display:f.getComputedStyle(n,null).display},setup:function(e){var t=function(){0==(n.textContent||n.innerText||"").trim().length?n.classList.add(h.bindingHandlers.wysiwyg.emptyClass):n.classList.remove(h.bindingHandlers.wysiwyg.emptyClass)};e.on("change redo undo",function(){if(!d)try{u=!0,a(e.getContent(h.bindingHandlers.wysiwyg.getContentOptions))}catch(e){}finally{u=!1}h.bindingHandlers.wysiwyg.emptyClass&&t()}),h.bindingHandlers.wysiwyg.emptyClass&&e.on("keyup",function(){t()}),e.on("focus",function(){e.nodeChanged(),e.getElement().click()}),h.bindingHandlers.wysiwyg.removeSelectionOnBlur&&e.on("blur",function(e){f.getSelection().removeAllRanges()}),e.on("BeforeSetContent",function(e){e.initial&&(e.format="raw")}),void 0===e.originalFire&&(e.originalFire=e.fire,e.fire=v),l=e}};return h.bindingHandlers.wysiwyg.useTarget?c.target=n:c.selector="#"+r,h.utils.extend(c,h.bindingHandlers.wysiwyg.standardOptions),s&&h.utils.extend(c,h.bindingHandlers.wysiwyg.fullOptions),f.setTimeout(function(){p.init(c).then(function(){},function(e){})}),h.computed(function(){var e=h.utils.unwrapObservable(t());if(!u){try{d=!0,void 0!==l?l.setContent(e,{format:"raw"}):h.utils.setHtml(n,e)}catch(e){}d=!1}},null,{disposeWhenNodeIsRemoved:n}),{controlsDescendantBindings:!0}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventable.js":49,"console-browserify":3}],66:[function(e,t,n){"use strict";e("console-browserify");var c=function(e,t,n,o,i){var r,a,l,s=0;if(void 0===i&&(i=!1),void 0!==t&&"function"==typeof t.splice)for(r={},a=0;a<t.length;a++)r[t[a].type]=t[a];else r=t;for(var d in e)if(e.hasOwnProperty(d))if(l=void 0!==o?o+"."+d:d,n.hasOwnProperty(d))if(typeof n[d]!=typeof e[d])null!==n[d]&&null!==e[d]&&("string"==typeof n[d]?String(e[d])!=e[d]&&(s=Math.max(s,2)):"number"==typeof n[d]?Number(e[d])!=e[d]&&(s=Math.max(s,2)):s=Math.max(s,2));else if("object"==typeof e[d])if(null!==e[d])if(void 0!==e[d].splice){if(0<e[d].length)if(0<n[d].length){var u=0;for(a=0;a<n[d].length;a++)if("string"==typeof n[d][a].type){for(;u<e[d].length&&e[d][u].type!==n[d][a].type;)u++;if(u>=e[d].length){s=Math.max(s,2);break}s=Math.max(s,c(e[d][u],void 0,n[d][a],l+"["+a+"."+n[d][a].type+"]"))}}else for(a=0;a<e[d].length;a++)"string"!=typeof e[d][a].type?s=Math.max(s,2):r.hasOwnProperty(e[d][a].type)?s=Math.max(s,c(r[e[d][a].type],r,e[d][a],l+"["+a+"."+e[d][a].type+"]")):(e[d].splice(a,1),a--,s=Math.max(s,2))}else null===n[d]?i?(s=Math.max(s,2),delete e[d]):(s=Math.max(s,1),n[d]=e[d]):s=Math.max(s,c(e[d],r,n[d],l,i));else null!==n[d]&&(s=Math.max(s,2));else"string"!=typeof e[d]&&"boolean"!=typeof e[d]&&"number"!=typeof e[d]&&(s=Math.max(s,2));else i?(s=Math.max(s,2),delete e[d]):(s=Math.max(s,1),n[d]=e[d]);return i||(s=Math.max(s,c(n,t,e,void 0!==o?o+"!R":"!R",!0))),s};t.exports=c},{"console-browserify":3}],67:[function(e,t,n){"use strict";var P=e("./utils.js"),F=e("mensch/lib/parser.js"),N=(e("console-browserify"),e("./domutils.js")),z=function(e,t,n){for(var o=e.length-1;0<=o;o--)if("property"==e[o].type&&e[o].name==t)return L(e[o].value,n);return null},R=function(e){return e.replace(/-([a-z])/g,function(e,t,n,o){return t.toUpperCase()})},L=function(e,l){return e.match(/url\(.*\)/)?e.replace(/(url\()([^\)]*)(\))/g,function(e,t,n,o){var i=n.trim(),r=n.trim().charAt(0);"'"==r||'"'==r?i=i.substr(1,i.length-2):r="";var a=l(i);return null!==a?t+r+a+r+o:e}):e},U=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&("object"==typeof e[n]?t.push(n+": { "+U(e[n])+" }"):t.push(n+": "+e[n]));return t.reverse().join(", ")};t.exports=function(e,t,n,o,i,r,a){var l="object"==typeof r&&null!==r?r:{},s=null,d=0;void 0===t&&(t=F("#{\n"+e+"}",{comments:!0,position:!0}).stylesheet.rules[0].declarations,d=1);for(var u=t.length-1;0<=u;u--)if("property"==t[u].type)if(!0===a&&"display"==t[u].name&&"none"==t[u].value)null===s&&(s=e),s=P.removeStyle(s,t[u].position.start,t[u].position.end,d,0,0,"");else{var c=t[u].name.match(/^-ko-(bind-|attr-)?([a-z0-9-]*?)(-if|-ifnot)?$/);if(null!==c){null===s&&void 0!==e&&(s=e);var f,p,h,b="attr-"==c[1],v="bind-"==c[1],g=c[2],m="-if"==c[3]||"-ifnot"==c[3];if(m){if(f=t[u].name.substr(0,t[u].name.length-c[3].length),null===z(t,f,n))throw"Unable to find declaration "+f+" for "+t[u].name}else{if((b||v)&&void 0===i&&void 0!==e)throw"Attributes and bind declarations are only allowed in inline styles!";var y,w=!0;if(b?(h=N.getAttribute(i,g),w=!1,y="virtualAttr"):v?(y=null,"text"==g?void 0!==i?h=N.getInnerText(i):w=!1:"html"==g&&void 0!==i?h=N.getInnerHtml(i):w=!1):((w=void 0!==e)&&(h=z(t,g,n)),y="virtualStyle"),w&&null===h)throw"Cannot find default value for "+t[u].name+": "+t[u].value+" in "+i+" ("+typeof e+"/"+g+")";var x=h,k=v||b?-1!=g.indexOf("-")?"'"+g+"'":g:R(g);try{p=P.expressionBinding(t[u].value,o,x)}catch(e){throw e}null!==y&&void 0===l[y]&&(l[y]={}),"virtualAttr"==y&&"href"==k&&(k="wysiwygHref",(y=null)!=i&&N.removeAttribute(i,"href"));var _=z(t,t[u].name+"-if",n),j=!1;if(null===_)_=z(t,t[u].name+"-ifnot",n),j=!0;else if(null!==z(t,t[u].name+"-ifnot",n))throw"Unexpected error: cannot use both -if and -ifnot property conditions";if(null!==_)try{p=(j?"!":"")+"("+P.conditionBinding(_,o)+") ? "+p+" : null"}catch(e){throw e}null!==y?l[y][k]=p:l[k]=p}if(null!==s)try{if(null!=i)s=P.removeStyle(s,t[u].position.start,t[u].position.end,d,0,0,"");else{var O="";m||(O=g+": \x3c!-- ko text: "+p+" --\x3e"+h+"\x3c!-- /ko --\x3e"),s=P.removeStyle(s,t[u].position.start,t[u].position.end,d,0,0,O)}}catch(e){throw e}}else{var S=L(t[u].value,n);if(S!=t[u].value&&(null===s&&void 0!==e&&(s=e),null!==s))try{s=P.removeStyle(s,t[u].position.start,t[u].position.end,d,0,0,t[u].name+": "+S)}catch(e){throw e}var A=R(t[u].name),$="virtualAttrStyle",C=void 0!==l.virtualStyle?l.virtualStyle[A]:void 0,E=" ";void 0===l[$]&&(l[$]="''",E=""),void 0!==C?(l[$]="'"+t[u].name+": '+("+C+")+';"+E+"'+"+l[$],delete l.virtualStyle[A]):l[$]="'"+t[u].name+": "+P.addSlashes(S)+";"+E+"'+"+l[$]}}if(null!=i){for(var T in l.virtualStyle)if(l.virtualStyle.hasOwnProperty(T))throw"Unexpected virtualStyle binding after conversion to virtualAttr.style for "+T;delete l.virtualStyle;var M=N.getAttribute(i,"data-bind"),I=(null!==M?M+", ":"")+U(l);N.setAttribute(i,"data-bind",I)}if(void 0===e){var H=!1;for(var B in l.virtualStyle)if(l.virtualStyle.hasOwnProperty(B)){H=!0;break}if(H){if(void 0!==l.virtualAttrStyle){var D=l.virtualAttrStyle;delete l.virtualAttrStyle,l.virtualAttrStyle=D}}else delete l.virtualStyle;return U(l)}return s}},{"./domutils.js":68,"./utils.js":74,"console-browserify":3,"mensch/lib/parser.js":19}],68:[function(e,t,n){(function(e){"use strict";var o="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null;t.exports={getAttribute:function(e,t){var n=o(e).attr(t);return void 0===n&&(n=null),n},setAttribute:function(e,t,n){o(e).attr(t,n)},removeAttribute:function(e,t){o(e).removeAttr(t)},getInnerText:function(e){return o(e).text()},getInnerHtml:function(e){return o(e).html()},getLowerTagName:function(e){return""===e.tagName&&"string"==typeof e.name?e.name.toLowerCase():""!==e.tagName?e.tagName.toLowerCase():o(e).prop("tagName").toLowerCase()},setContent:function(e,t){o(e).html(t)},replaceHtml:function(e,t){o(e).replaceWith(t)},removeElements:function(e,t){t&&void 0!==e.detach&&e.detach(),e.remove()},objExtend:function(e,t){return"function"==typeof o.extend?o.extend(!0,e,t):function(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(e,JSON.parse(JSON.stringify(t)))}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],69:[function(e,t,n){"use strict";var B=e("console-browserify"),D=e("./declarations.js"),P=e("./utils.js"),x=e("./model.js"),F=function(e,t,n,o,i){var r,a="";if(null!==e&&void 0!==e._widget&&(r=e._widget),void 0===r)throw"Unknown data type for "+t;var l="focusable: true";if("edit"==o&&(l+=", event: { focus: function(ui, event) { $($element).click(); } } "),a+='<label class="data-'+r+'"'+("boolean"==r?" data-bind=\"event: { mousedown: function(ui, evt) { if (evt.button == 0) { var input = $($element).find('input'); var ch = input.prop('checked'); setTimeout(function() { input.click(); input.prop('checked', !ch); input.trigger('change'); }, 0); } } }, click: function(ui, evt) { evt.preventDefault(); }, clickBubble: false\"":"")+">",void 0!==i&&void 0!==i[r]){var s=i[r],d={};if(void 0!==s.parameters)for(var u in s.parameters)s.parameters.hasOwnProperty(u)&&void 0!==e["_"+u]&&(d[u]=e["_"+u]);a+=s.html(n,l,d)}else if("boolean"==r)a+='<input type="checkbox" value="nothing" data-bind="checked: '+n+", "+l+'" />',a+='<span class="checkbox-replacer" ></span>';else if("color"==r)a+='<input size="7" type="text" data-bind="colorpicker: { color: '+n+", strings: $root.t('Theme Colors,Standard Colors,Web Colors,Theme Colors,Back to Palette,History,No history yet.') }, , "+l+'" />';else if("select"==r){if(void 0!==e._options){var c=function(e){for(var t=e.split("|"),n={},o=0;o<t.length;o++){var i=t[o].split("=");n[i[0].trim()]=1<i.length?i[1].trim():i[0].trim()}return n}(e._options);for(var f in a+='<select data-bind="value: '+n+", "+l+'">',c)c.hasOwnProperty(f)&&(a+='<option value="'+f+"\" data-bind=\"text: $root.ut('template', '"+P.addSlashes(c[f])+"')\">"+c[f]+"</option>");a+="</select>"}}else if("font"==r)a+='<select type="text" data-bind="value: '+n+", "+l+'">',a+='<optgroup label="Sans-Serif Fonts">',a+='<option value="Arial,Helvetica,sans-serif">Arial</option>',a+="<option value=\"'Comic Sans MS',cursive,sans-serif\">Comic Sans MS</option>",a+='<option value="Impact,Charcoal,sans-serif">Impact</option>',a+="<option value=\"'Trebuchet MS',Helvetica,sans-serif\">Trebuchet MS</option>",a+='<option value="Verdana,Geneva,sans-serif">Verdana</option>',a+="</optgroup>",a+='<optgroup label="Serif Fonts">',a+='<option value="Georgia,serif">Georgia</option>',a+="<option value=\"'Times New Roman',Times,serif\">Times New Roman</option>",a+="</optgroup>",a+='<optgroup label="Monospace Fonts">',a+="<option value=\"'Courier New',Courier,monospace\">Courier New</option>",a+="</optgroup>",a+="</select>";else if("url"==r)a+='<div class="ui-textbutton">',a+='<input class="ui-textbutton-input" size="7" type="url" pattern="(mailto:.+@.+|https?://.+\\..+|\\[.*\\].*)" value="nothing" data-bind="css: { withButton: typeof $root.linkDialog !== \'undefined\' }, validatedValue: '+n+", "+l+'" />',a+="<a class=\"ui-textbutton-button\" data-bind=\"visible: typeof $root.linkDialog !== 'undefined', click: typeof $root.linkDialog !== 'undefined' ? $root.linkDialog.bind($element.previousSibling) : false, button: { icons: { primary: 'fa fa-fw fa-ellipsis-h' }, label: 'Opzioni', text: false }\">Opzioni</a>",a+="</div>";else if("integer"==r){var p=0,h=1e3;null!==e&&void 0!==e._max&&(h=e._max),null!==e&&void 0!==e._min&&(p=e._min);var b=100<=h-p?10:1;a+='<input class="number-spinner" size="7" step="'+b+'" type="number" value="-1" data-bind="spinner: { min: '+p+", max: "+h+", page: "+5*b+", value: "+n+" }, valueUpdate: ['change', 'spin'], "+l+'" />'}else a+='<input size="7" type="text" value="nothing" data-bind="value: '+n+", "+l+'" />';return a+"</label>"},N=function(e,t,n,o){var i;return"object"==typeof t&&null!==t&&void 0===t._widget||void 0!==n&&void 0!==o&&0<o.length&&"object"==typeof e&&void 0!==e[o]&&(i=e[o]),i},z=function(e,t,n,o,i,r,a,l,s,d,u,c,f,p,h){if(void 0===s&&(s=0),void 0!==a&&"object"==typeof o&&null!==o&&void 0===o._usecount)return B.debug,"";var b,v=void 0!==c?a+"._defaultComputed":a,g="",m=v,y=1,w=1;if("object"==typeof o&&null!==o&&void 0===o._widget||void 0===c&&(y+=1),void 0===c&&void 0!==d&&(w+=d),void 0!==a&&f&&(g+="\x3c!-- ko ifSubs: { data: "+m+", threshold: "+w+", gutter: "+y+" } --\x3e"),void 0===a||null!==o&&o._name,void 0===a&&null!==o&&void 0===o._name&&o.type,"object"==typeof o&&null!==o&&void 0===o._widget){var x=function(e,t,n){var o=[];for(var i in e)if(!i.match(/^customStyle$/)&&!i.match(/^_/)&&e.hasOwnProperty(i)){var r=null!==e[i]&&void 0!==e[i]._category&&"style"==e[i]._category;"id"==i||"type"==i||i.match(/Blocks$/)||("styler"==t?(r||0<n)&&o.push(i):"edit"==t?null!==e[i]&&void 0!==e[i]._category&&"content"==e[i]._category&&(void 0===e[i]._context||"block"!=e[i]._context)&&o.push(i):void 0===t&&o.push(i))}return o}(o,l,s),k="styler"==l&&null!==o&&void 0!==o.customStyle&&void 0!==c,_="",j="";void 0!==a&&"edit"==l&&(_=", click: function(obj, evt) { $root.selectItem("+a+", $data); return false }, clickBubble: false, css: { selecteditem: $root.isSelectedItem("+a+") }, scrollIntoView: $root.isSelectedItem("+a+"), ",j+=" selectable"),k&&(j+=" supportsCustomStyles"),g+='<div class="objEdit level'+s+j+'" data-bind="tooltips: {}'+_+'">';var O,S,A,$=null!==o&&void 0!==o._name?o._name:void 0!==a?"["+a+"]":"";if(k){var C="Stile";null!=i&&void 0!==i._name&&(C=i._name),$="<span class=\"blockSelectionMethod\" data-bind=\"text: customStyle() ? $root.ut('template', '"+P.addSlashes($)+"') : $root.ut('template', '"+P.addSlashes(C)+"')\">Block</span>"}else $="<span data-bind=\"text: $root.ut('template', '"+P.addSlashes($)+"')\">"+$+"</span>";g+="<span"+(b=null!==o&&void 0!==o._help?' title="'+P.addSlashes(o._help)+"\" data-bind=\"attr: { title: $root.ut('template', '"+P.addSlashes(o._help)+"') }\"":"")+' class="objLabel level'+s+'">'+$+"</span>","edit"==l&&void 0!==o._blockDescription&&(g+="<div class=\"blockDescription\" data-bind=\"html: $root.ut('template', '"+P.addSlashes(o._blockDescription)+"')\">"+o._blockDescription+"</div>"),k&&(g+='<label class="data-boolean blockCheck" data-bind="tooltips: { }">',g+='<input type="checkbox" value="nothing" data-bind="focusable: true, checked: customStyle" />',g+='<span title="Switch between global and block level styles editing" data-bind="attr: { title: $root.t(\'Switch between global and block level styles editing\') }" class="checkbox-replacer checkbox-replacer-onoff"></span>',g+="</label>",g+="\x3c!-- ko template: { name: 'customstyle', if: customStyle } --\x3e\x3c!-- /ko --\x3e"),void 0!==a&&(g+="\x3c!-- ko with: "+a+" --\x3e",1==s&&void 0!==a&&void 0!==o._previewBindings&&void 0!==e&&(void 0!==p&&(g+='\x3c!-- ko with: $root.content() --\x3e<div class="objPreview" data-bind="'+p+'"></div>\x3c!-- /ko --\x3e'),void 0!==h&&(g+='\x3c!-- ko with: $parent --\x3e<div class="objPreview" data-bind="'+h+'"></div>\x3c!-- /ko --\x3e'),g+='<div class="objPreview"><div class="objPreviewInner" data-bind="'+D(void 0,o._previewBindings,n,e.bind(this,r+"."))+'"></div></div>')),0===s&&void 0!==o._previewBindings&&(O=D(void 0,o._previewBindings,n,e.bind(this,0<r.length?r+".":"")));var E,T=g.length;for(S=0;S<x.length;S++)A=0<r.length?r+"."+x[S]:x[S],"object"==typeof o[x[S]]&&null!==o[x[S]]&&void 0===o[x[S]]._widget||(E=void 0,0===s&&"theme"==x[S]?g+=z(e,t,n,o[x[S]],void 0,A,x[S],l,0,d,void 0,void 0,f,p):(E=N(u,o[x[S]],x[S],A),g+=z(e,t,n,o[x[S]],void 0,A,x[S],l,s+1,d,u,E,f,p,O)));for(S=0;S<x.length;S++)A=0<r.length?r+"."+x[S]:x[S],"object"==typeof o[x[S]]&&null!==o[x[S]]&&void 0===o[x[S]]._widget&&(E=void 0,0===s&&"theme"==x[S]?g+=z(e,t,n,o[x[S]],void 0,A,x[S],l,0,d,void 0,void 0,f,p):(E=N(u,o[x[S]],x[S],A),g+=z(e,t,n,o[x[S]],void 0,A,x[S],l,s+1,d,u,E,f,p,O)));if(0==g.length-T){if("object"==typeof o&&null!==o&&"template"==o._context)return"";g+='<div class="objEmpty" data-bind="html: $root.t(\'Selected element has no editable properties\')">Selected element has no editable properties</div>'}void 0!==a&&(g+="\x3c!-- /ko --\x3e"),g+="</div>"}else{var M=!0;if(void 0===u&&(M=!1),null===o||"object"!=typeof o||void 0!==o._widget){var I=[];void 0!==c&&I.push("css: { notnull: "+a+"() !== null }"),0<(b=null!==o&&void 0!==o._help?' title="'+P.addSlashes(o._help)+"\" data-bind=\"attr: { title: $root.ut('template', '"+P.addSlashes(o._help)+"') }\"":"").length&&I.push("tooltips: {}"),g+='<div class="propEditor '+(M?"checkboxes":"")+'"'+(0<I.length?'data-bind="'+P.addSlashes(I.join())+'"':"")+">";var H=null!==o&&void 0!==o._name?o._name:void 0!==a?"["+a+"]":"";g+="<span"+b+' class="propLabel">'+(H="<span data-bind=\"text: $root.ut('template', '"+P.addSlashes(H)+"')\">"+H+"</span>")+"</span>",g+='<div class="propInput '+(void 0!==u?"local":"")+'" data-bind="css: { default: '+a+'() === null }">',g+=F(o,a,v,l,t),g+="</div>",void 0!==c&&(g+='<div class="propInput global" data-bind="css: { overridden: '+a+'() !== null }">',g+=F(o,a,c,l,t),g+="</div>",M&&(g+='<div class="propCheck"><label data-bind="tooltips: {}"><input type="checkbox" data-bind="focusable: true, click: function(evt, obj) { $root.localGlobalSwitch('+a+", "+c+"); return true; }, checked: "+a+'() !== null">',g+='<span class="checkbox-replacer" data-bind="css: { checked: '+a+"() !== null }, attr: { title: $root.t('This style is specific for this block: click here to remove the custom style and revert to the theme value') }\"></span>",g+="</label></div>")),g+="</div>"}else g+=null===o||"object"!=typeof o?'<div class="propEditor unknown">[A|'+a+"|"+typeof o+"]</div>":'<div class="propEditor unknown">[B|'+a+"|"+typeof o+"]</div>"}return void 0!==a&&f&&(g+="\x3c!-- /ko --\x3e",g+="\x3c!-- ko ifSubs: { not: true, data: "+m+", threshold: "+w+", gutter: 0 } --\x3e",g+='<span class="label notused">('+a+")</span>",g+="\x3c!-- /ko --\x3e"),g},m=function(e,t,n,o,i,r,a,l,s,d,u,c){void 0===u&&(u=!0);var f,p=x.getDef(e,r),h=x.getDef(e,i);void 0!==h._previewBindings&&"thaeme"!=r&&"styler"==a&&(f=D(void 0,h._previewBindings,o,x.getBindValue.bind(void 0,e,n,i,i,"")));var b,v=void 0!==d&&d?e[r]._globalStyles:void 0,g=void 0!==d&&d?e[r]._globalStyle:void 0;void 0!==g&&(b=x.getDef(e,"theme")[g.replace(/^(\$theme|_theme_)\./,"")]);var m=x.getBindValue.bind(void 0,e,n,i,r);m._templateName=r;var y='<div class="editor">';y+='<div class="blockType'+(void 0!==v?" withdefaults":"")+'">'+p.type+"</div>";var w=z(m,t,o,p,b,"",void 0,a,c,s,v,g,u,f);0<w.length&&(y+=w),l(y+="</div>",r,a)};t.exports=function(e,t,n,o,i){var r,a,l,s,d,u,c,f,p,h=e._defs,b=e.templateName,v=e._blocks,g=[];for(r=0;r<v.length;r++)void 0!==v[r].container&&g.push(x.generateModel(h,v[r].block)),a=h,l=t,s=void 0,d=n,u=v[r].root,c=v[r].block,m(a,l,s,d,u,c,"edit",f=o,p=i),m(a,l,s,d,u,c,"styler",f,p,!0);return void 0!==h.theme&&m(h,t,void 0,n,b,"theme","styler",o,void 0,!1,!1,-1),g}},{"./declarations.js":67,"./model.js":71,"./utils.js":74,"console-browserify":3}],70:[function(r,e,t){"use strict";var a=r("./model.js");e.exports={translateTemplate:function(){var e=r("./parser.js");return e.apply(e,arguments)},wrappedResultModel:function(e){var t=e._defs,n=e.templateName,o=a.getDef(t,n),i=a.generateResultModel(e);return r("./wrapper.js")(i,o,t)},generateResultModel:a.generateResultModel,generateEditors:function(){var e=r("./editor.js");return e.apply(e,arguments)},checkModel:function(){var e=r("./checkmodel.js");return e.apply(e,arguments)}}},{"./checkmodel.js":66,"./editor.js":69,"./model.js":71,"./parser.js":72,"./wrapper.js":75}],71:[function(e,t,n){"use strict";var b=e("./domutils.js").objExtend,u=(e("console-browserify"),function(e,t,n,o){var i=n.indexOf(".");if(-1==i)if(void 0===t[n]);else if(null===t[n])"object"==typeof o&&null!==o&&o.push,t[n]=o;else if("object"==typeof t[n]&&"function"==typeof t[n].push){var r;if("string"==typeof o){var a=o.match(/^\[(.*)\]$/);if(null===a)throw"Unexpected default value for array property "+n+": "+o;r=a[1].split(",")}else{if("object"!=typeof o||void 0===o.push)throw"Unexpected default value for array property "+n+": "+o+" typeof "+typeof o;r=o}for(var l=[],s=0;s<r.length;s++)"@"==r[s].substr(0,1)?l.push(c(e,r[s].substr(1))):0<r[s].length&&l.push(r[s]);t[n]=l}else"string"==typeof t[n]||"boolean"==typeof t[n]?t[n]=o:"object"==typeof t[n]&&null!==t[n]&&void 0!==t[n]._widget&&(t[n]=o);else{var d=n.substr(0,i);u(e,t[d],n.substr(i+1),o)}}),S=function(e,t,n,o){if(void 0!==e[t]&&e[t]._initialized&&!e[t]._writeable)throw"Trying to alter non writeable model: "+t+" / "+n;if(void 0===e[t]&&(e[t]={_writeable:!0},void 0===o&&(o={}),void 0===o.category&&void 0===e[t]._category&&(t.match(/(^t|.T)heme$/)||t.match(/(^s|.S)tyle$/)||t.match(/(^c|.C)olor$/)||t.match(/(^r|.R)adius$/)?o.category="style":o.category="content")),void 0!==o){if(void 0!==o.name&&(e[t]._name=o.name),void 0!==o.themeOverride&&(e[t]._themeOverride=o.themeOverride),void 0!==o.globalStyle){e[t]._globalStyle=o.globalStyle;var i=o.globalStyle.replace(/^(\$theme|_theme_)\./,""),r=i.indexOf("."),a=-1!=r?i.substr(0,r):i;S(e,"theme",a),(void 0===e[t]._themeOverride||e[t]._themeOverride)&&S(e,t,"customStyle=false")}void 0!==o.contextName&&(e[t]._context=o.contextName,"block"==o.contextName&&void 0===e[t]._globalStyle&&(e[t]._globalStyle="_theme_.bodyTheme",S(e,"theme","bodyTheme"),(void 0===e[t]._themeOverride||e[t]._themeOverride)&&S(e,t,"customStyle=false"))),void 0!==o.extend&&(e[t].type=o.extend)}for(var l in o)o.hasOwnProperty(l)&&void 0!==o[l]&&-1==["name","extend","contextName","globalStyle","themeOverride"].indexOf(l)&&(e[t]["_"+l]=o[l]);void 0!==n&&0<n.length&&(e[t]._props=void 0!==e[t]._props&&0<e[t]._props.length?e[t]._props+" "+n:n)},l=function(e,t){var n={};for(var o in e)if(!o.match(/^_.*/)&&e.hasOwnProperty(o)){var i=e[o];if("object"==typeof i&&null!==i&&void 0!==i._complex&&i._complex)n[o]=l(i,t);else if("type"==o)n[o]=i;else{if("object"!=typeof i)throw"Unexpected model def ["+o+"]="+i;n[o]=null}}if(void 0!==e._defaultValues){var r=e._defaultValues;for(var a in r)r.hasOwnProperty(a)&&u(t,n,a,r[a])}return n},c=function(e,t){var n=A(e,t,!1,!0);return l(n,e)},A=function(e,t,n,o){if(void 0===e[t]){if(-1!=t.indexOf(" "))return null;var i=null!==(r=t.match(/^[^A-Z]+([A-Z])(.*)$/))?r[1].toLowerCase()+r[2]:null;return null!==i?A(e,i,n,o):null}var r,a=e[t];if("object"!=typeof a)throw"Block definition must be an object: found "+a+" for "+t;if(void 0===a._initialized){if(void 0===a.type&&(-1==t.indexOf(" ")?a.type=t:a.type=t.substr(t.indexOf(" ")+1)),a.type!=t&&void 0===a._widget){var l=A(e,a.type,!0);a=b(l,a),e[t]=a}else void 0===a._widget&&void 0===a._props&&a._complex;a._writeable=!0,a._initialized=!0}if(void 0!==a._props){var s=a._props;if(0<(s=s.split(" ")).length&&void 0===a._writeable)throw"Altering a non writable object: "+t+" def: "+s;void 0===a._processedDefs&&(a._processedDefs={}),void 0===a._globalStyles&&(a._globalStyles={}),void 0===a._defaultValues&&(a._defaultValues={});for(var d=0;d<s.length;d++){var u=s[d];if(0!==u.length){var c=u,f=null,p=u.match(/^([^=\[\]]+)(\[\])?(=?)(.*)$/);if(null!==p&&(u=p[1],"[]"==p[2]&&(void 0===a[u]&&(a[u]=[]),f=[]),"="==p[3]&&(f=u.match(/(^v|V)isible$/)?"true"==String(p[4]).toLowerCase():u.match(/^customStyle$/)?"true"==String(p[4]).toLowerCase():p[4])),null!==f&&void 0===a._defaultValues[u]&&(a._defaultValues[u]=f),void 0===a[u]){var h=A(e,t+" "+u,!0);null===h&&(h=A(e,u,!0)),a[u]=h}a._processedDefs[u]=c,a._complex=!0}}delete a._props}if(n)return a._writeable=!1,b({},a);if(o)return a._writeable=!1,a;if(void 0===a._writeable||!1===a._writeable)throw"Retrieving non writeable object definition: "+t;return a},$=function(e,t){if(e){if(void 0===t._usecount)throw"ERROR trying to bind an unused property"}else void 0===t._usecount&&(t._usecount=0),t._usecount++},C=function(e,t,n,o,i,r,a,l){var s=n(r,a,l);if(void 0===e[o]._globalStyles[i]){if(t)throw"Cannot find _globalStyle for "+i+" in "+o+"!";(-1!=i.indexOf(".")||"object"==typeof e[o][i]&&void 0!==e[o][i]._widget)&&(e[o]._globalStyles[i]=s)}else if(e[o]._globalStyles[i]!=s)throw"Unexpected conflicting globalStyle [2] for "+o+"/"+i+": old="+e[o]._globalStyles[i]+" new="+s},E=function(e,t,n,o,i,r,a,l,s,d){var u,c,f;if("$"==a.substr(0,1)){var p=a.indexOf(".");if(-1==p)throw"Unexpected fullPath: "+a+"/"+r+"/"+i+"/"+l+"/"+s;if(u=a.substr(1,p-1),f=a.substr(p+1),"theme"!=u)throw"Unexpected $ sequence: "+u+" in "+a;var h=f.indexOf(".");c="$root.content().theme()."+(u=f.substr(0,h))+"()."+(f=f.substr(h+1)).replace(new RegExp("\\.","g"),"().")}else if("#"==a.substr(0,1))u=o,c="$root.content()."+(f=a.substr(1)).replace(new RegExp("\\.","g"),"().");else if("_theme_."==a.substr(0,8)){var b=a.indexOf(".",8);c="$root.content().theme()."+(u=a.substr(8,b-8))+"()."+(f=a.substr(b+1)).replace(new RegExp("\\.","g"),"().")}else"_root_."==a.substr(0,7)?(u=o,c="$root.content()."+(f=a.substr(7)).replace(new RegExp("\\.","g"),"().")):(u=i,f=r+a,c=a.replace(new RegExp("\\.","g"),"()."));if(void 0===t[u])throw"Cannot find model def for ["+u+"]";var v,g=f.indexOf("."),m=-1==g?f:f.substr(0,g);if(-1!=u.indexOf("-"))throw"ERROR unexpected char in block name: "+u;if(-1!=m.indexOf("-"))throw"ERROR unexpected char in property name: "+u;if(e)return void 0!==t[u]._globalStyle&&void 0!==t[u][m]&&"style"==t[u][m]._category&&(c+="._defaultComputed"),c;if(e){if(void 0!==l)throw"Cannot use defaultValue in readonly mode!";if(s)throw"Cannot use overrideDefault in readonly mode for "+u+"/"+f+"/"+s+"!";if(void 0!==d)throw"Cannot set category for "+u+"/"+f+"/"+d+" in readonly mode!";v=A(t,u,!1,!0)}else t[u]._writeable,v=A(t,u,!1===t[u]._writeable);if(null===v)throw"Unexpected model for ["+u+"]";if(void 0===v[m]){if(e)throw"Cannot find path "+m+" for "+u+"!";S(t,u,m),v=A(t,u,!1)}void 0!==t[u]._globalStyle&&void 0!==t[u][m]&&null!==t[u][m]&&"style"==t[u][m]._category&&(c+="._defaultComputed");var y=v;try{if($(e,y),-1!=g){var w=f;do{var x=w.substr(0,g);if(void 0===y[x])throw"Found an unexpected prop "+x+" for model "+u+" for "+f;y=y[x],$(e,y),g=(w=w.substr(g+1)).indexOf(".")}while(-1!=g);if(void 0===y[w]||null===y[w])throw"Found an unexpected path termination "+w+" for model "+u+" for "+f;y=y[w]}else y=y[f];if(null==y)throw"Unexpected null model for "+u+"/"+r+"/"+a;void 0!==d&&(y._category=d),$(e,y)}catch(e){throw e}if(void 0!==t[u]._globalStyle&&"object"==typeof t[u][m]&&null!==t[u][m]&&void 0!==t[u][m]._category&&"style"==t[u][m]._category){var k=E.bind(void 0,e,t,n,o,i,""),_=-1!=f.indexOf(".")?f.substr(f.indexOf(".")):"";if(-1!=_.indexOf(".",1))throw"TODO unsupported object nesting! "+f;var j=t[u]._globalStyle+"."+m;"object"==typeof t[u][m]&&null!==t[u][m]&&void 0!==t[u][m]._globalStyle&&(j=t[u][m]._globalStyle),C(t,e,k,u,m,j,void 0,!1);var O=j+_;if(void 0===l&&null!==t[u]._defaultValues[f]&&(l=t[u]._defaultValues[f]),C(t,e,k,u,f,O,l,s),void 0!==l){if(e)throw"Cannot set a new theme default value ("+l+") for "+O.substr(7)+" while in readonly mode!";n("default",O.substr(7),l)}l=null}if(void 0!==l)if(void 0===t[u]._defaultValues[f]||void 0!==s&&s){if(e)throw"Cannot set new _defaultValues [1] for "+f+" in "+u+"!";t[u]._defaultValues[f]=l}else if(null===l){if(e&&null!==t[u]._defaultValues[f])throw"Cannot set new _defaultValues [2] for "+f+" in "+u+"!";t[u]._defaultValues[f]=null}else if(t[u]._defaultValues[f]!=l)throw"Trying to set a new default value for "+u+" "+f+" while it already exists (current: "+t[u].defaultValues[f]+", new: "+l+")";return c};t.exports={ensurePathAndGetBindValue:E.bind(void 0,!1),getBindValue:E.bind(void 0,!0),generateModel:c,generateResultModel:function(e){var t=e._defs,n=e.templateName,o=c(t,n);return void 0!==t.theme&&(o.theme=c(t,"theme")),o},getDef:function(e,t){return A(e,t,!1,!0)},createOrUpdateBlockDef:S}},{"./domutils.js":68,"console-browserify":3}],72:[function(t,n,e){(function(e){"use strict";var $="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null,C=t("console-browserify"),g=t("./utils.js"),s=t("./declarations.js"),m=t("./stylesheet.js"),y=t("./model.js"),E=t("./domutils.js"),w=function(e,t,n,o){var i,r=E.getAttribute(e,"replacedstyle"),a=null;o&&(i={uniqueId:"$data",attr:{id:"id"}});var l=null!==E.getAttribute(e,"data-ko-display");null===(a=s(r,void 0,t,n,e,i,l))?a=r:E.removeAttribute(e,"replacedstyle"),null!==a&&(0<a.trim().length?E.setAttribute(e,"style",a):E.removeAttribute(e,"style"))},x=function(e,t,n,o){var i=t(E.getAttribute(o,e));null!==i&&E.setAttribute(o,e,i)},k=function(e,l,s,r,d,t,u,a,n,S){try{var c;if("block"==t)c=E.getAttribute(e,"data-ko-block"),E.removeAttribute(e,"data-ko-block");else{if("template"!=t)throw"Unexpected context name while processing block: "+t;c=u}$("[data-ko-remove]",e).remove();for(var f=$("[data-ko-block]",e).replaceWith("<replacedblock>"),o=["href","src","data-ko-placeholder-src","background"],i=0;i<o.length;i++){var p=x.bind(void 0,o[i],d);$("["+o[i]+"]",e).each(p)}var h=E.getAttribute(e,"data-ko-properties");null===h&&(h=""),$("[data-ko-properties]",e).each(function(e,t){0<h.length&&(h+=" "),h+=E.getAttribute(t,"data-ko-properties"),E.removeAttribute(t,"data-ko-properties")}),y.createOrUpdateBlockDef(l,c,h,{contextName:t});var A=y.ensurePathAndGetBindValue.bind(void 0,l,s,u,c,"");"block"==t&&A("id",""),$("style",e).each(function(e,t){var n=E.getInnerHtml(t),o=y.createOrUpdateBlockDef.bind(void 0,l),i=y.ensurePathAndGetBindValue.bind(void 0,l,s,u),r=m(n,void 0,i,o,s,d,u,c);if(r!=n)if(""!==r.trim()){var a=S(r);E.setAttribute(t,"data-bind","template: { name: '"+a+"' }"),E.setContent(t,"")}else E.removeElements($(t))}),w(e,d,A,n);for(var b=["data-ko-display","data-ko-editable","data-ko-wrap","href"],v=0;v<b.length;v++)if(E.getAttribute(e,b[v]))throw"ERROR: Unsupported "+b[v]+" used together with data-ko-block";return $("[data-ko-link]",e).each(function(e,t){var n=E.getAttribute(t,"data-ko-link"),o=E.getAttribute(t,"replacedstyle");null==o&&(o=""),o=""!==o?"-ko-attr-href: @"+n+"; "+o:"-ko-attr-href: @"+n,E.setAttribute(t,"replacedstyle",o),E.setAttribute(t,"data-ko-wrap",n),E.removeAttribute(t,"data-ko-link")}),$("[replacedstyle]",e).each(function(e,t){w(t,d,A,!1)}),$("[replacedhttp-equiv]",e).each(function(e,t){var n,o;n=t,o="http-equiv",E.setAttribute(n,o,E.getAttribute(n,"replaced"+o))}),$("[data-ko-display]",e).each(function(e,t){!function(e,t,n){var o=E.getAttribute(t,e);try{var i=g.conditionBinding(o,n);$(t).before("\x3c!-- ko if: "+i+" --\x3e"),$(t).after("\x3c!-- /ko --\x3e"),E.removeAttribute(t,e)}catch(n){throw n}}("data-ko-display",t,A)}),$("[data-ko-editable]",e).each(function(e,t){var n,o,i,r,a,l,s=E.getAttribute(t,"data-ko-editable");if(0<s.lastIndexOf(".")){var d=s.substr(0,s.lastIndexOf("."));a=A(d)}else a=A(s);if(l="wysiwygClick: function(obj, evt) { $root.selectItem("+a+", $data); return false }, clickBubble: false, wysiwygCss: { selecteditem: $root.isSelectedItem("+a+") }, scrollIntoView: $root.isSelectedItem("+a+")","img"!=E.getLowerTagName(t)){o=E.getInnerHtml(t);var u=A(s,o,!0,"wysiwyg");if(n="",E.getAttribute(t,"id")||(n+="wysiwygId: id()+'_"+s.replace(".","_")+"', "),void 0!==l&&(n+=l+", "),n+="wysiwygOrHtml: "+u,"td"==E.getLowerTagName(t)){var c=$('<div data-ko-wrap="false" style="width: 100%; height: 100%"></div>')[0];E.setAttribute(c,"data-bind",n);var f=E.getInnerHtml($("<div></div>").append(c));E.setContent(t,f)}else r=(null!==(i=E.getAttribute(t,"data-bind"))?i+", ":"")+n,E.setAttribute(t,"data-bind",r),E.setContent(t,"");E.removeAttribute(t,"data-ko-editable")}else{var p=E.getAttribute(t,"width");if(""===p&&(p=null),null===p)throw"ERROR: data-ko-editable images must declare a WIDTH attribute!";var h=E.getAttribute(t,"height");""===h&&(h=null);var b=E.getAttribute(t,"align"),v=(i=E.getAttribute(t,"data-bind"))&&i.match(/virtualAttr: {[^}]* height: ([^,}]*)[,}]/);v&&(h=v[1]);var g=i&&i.match(/virtualAttr: {[^}]* width: ([^,}]*)[,}]/);g&&(p=g[1]);var m,y,w="";(o=E.getAttribute(t,"data-ko-placeholder-src"))?w=E.getAttribute(t,"src"):o=E.getAttribute(t,"src"),p&&h?m=p+"+'x'+"+h:h?p||(m="'h'+"+h+"+''"):m="'w'+"+p+"+''";var x=h||E.getAttribute(t,"data-ko-placeholder-height"),k=p||E.getAttribute(t,"data-ko-placeholder-width");if(E.removeAttribute(t,"src"),E.removeAttribute(t,"data-ko-editable"),E.removeAttribute(t,"data-ko-placeholder-height"),E.removeAttribute(t,"data-ko-placeholder-width"),E.removeAttribute(t,"data-ko-placeholder-src"),o&&(y="{ width: "+k+", height: "+x+", text: "+m+"}"),!k||!x)throw"ERROR: IMG data-ko-editable MUST declare width and height attributes, or their placeholder counterparts data-ko-placeholder-width/data-ko-placeholder-height";var _=A(s,w,!1,"wysiwyg");r=(null!==i?i+", ":"")+(n="wysiwygSrc: { width: "+p+", height: "+h+", src: "+_+", placeholder: "+y+" }"),E.setAttribute(t,"data-bind",r);var j=S(t),O="{ width: "+p;"left"==b?O+=", float: 'left'":"right"==b?O+=", float: 'right'":"center"==b&&("function"==typeof C.debug||("top"==b?O+=", verticalAlign: 'top'":"middle"==b?O+=", verticalAlign: 'middle'":"bottom"==b&&(O+=", verticalAlign: 'bottom'"))),O+="}",$(t).before("\x3c!-- ko wysiwygImg: { _data: $data, _item: "+a+", _template: '"+j+"', _editTemplate: 'img-wysiwyg', _src: "+_+", _width: "+p+", _height: "+h+", _align: "+(null===b?void 0:"'"+b+"'")+", _size: "+m+", _method: "+void 0+", _placeholdersrc: "+y+", _stylebind: "+O+" } --\x3e"),$(t).after("\x3c!-- /ko --\x3e")}}),$("[href]",e).each(function(e,t){var n=E.getAttribute(t,"href"),o="wysiwygHref: '"+g.addSlashes(n)+"'",i=E.getAttribute(t,"data-bind"),r=(null!==i?i+", ":"")+o;E.setAttribute(t,"data-bind",r)}),$("replacedblock",e).each(function(e,t){var n=f[e],o=k(n,l,s,r,d,"block",c,a,!0,S),i=y.ensurePathAndGetBindValue(l,s,u,c,"",o);$(t).before("\x3c!-- ko block: { data: "+g.addSlashes(i)+", template: 'block' } --\x3e"),$(t).after("\x3c!-- /ko --\x3e"),$(t).remove()}),$($("[data-ko-wrap]",e).get().reverse(),e).each(function(e,t){var n=E.getAttribute(t,"data-ko-wrap");if(void 0===n||""===n||"true"===n)throw"Unsupported empty value for data-ko-wrap: use false value if you want to always remove the tag";var o,i,r=g.conditionBinding(n,A),a=E.getAttribute(t,"data-bind");if(""!==a&&null!==a&&a.match(/(block|wysiwygOrHtml):/)){var l="\x3c!-- ko "+a+" --\x3e"+E.getInnerHtml(t)+"\x3c!-- /ko --\x3e";o=S(l),E.removeAttribute(t,"data-ko-wrap"),i=S(t),E.replaceHtml(t,"\x3c!-- ko template: /* special */ (typeof templateMode != 'undefined' && templateMode == 'wysiwyg') || "+r+" ? '"+i+"' : '"+o+"' --\x3e\x3c!-- /ko --\x3e")}else o=S(E.getInnerHtml(t)),E.removeAttribute(t,"data-ko-wrap"),E.setContent(t,"\x3c!-- ko template: '"+o+"' --\x3e\x3c!-- /ko --\x3e"),i=S(t),E.replaceHtml(t,"\x3c!-- ko template: (typeof templateMode != 'undefined' && templateMode == 'wysiwyg') || "+r+" ? '"+i+"' : '"+o+"' --\x3e\x3c!-- /ko --\x3e")}),S(e,c,"show"),r(u,c,t,a),c}catch(l){throw l}};n.exports=function(o,e,i,r){var a={},t=e.replace(/(<[^>]+\s)(style|http-equiv)(="[^"]*"[^>]*>)/gi,function(e,t,n,o){return t+"replaced"+n+o}).replace(/<!--\[if ([^\]]*)\]>((?:(?!--)[\s\S])*?)<!\[endif\]-->/g,function(e,t,n){var o="\x3c!-- cc:start --\x3e";o+=n.replace(/<([A-Za-z:]+)/g,"\x3c!-- cc:bo:$1 --\x3e<cc").replace(/<\/([A-Za-z:]+)>/g,"\x3c!-- cc:bc:$1 --\x3e</cc>\x3c!-- cc:ac:$1 --\x3e").replace(/\/>/g,"/>\x3c!-- cc:sc --\x3e"),o+="\x3c!-- cc:end --\x3e";var i='<replacedcc condition="'+t+'" style="display: none">';return(i+=$("<div>").append($(o)).html().replace(/^<!-- cc:start -->/,"").replace(/<!-- cc:end -->$/,""))+"</replacedcc>"}),n="function"==typeof $.parseHTML?$($.parseHTML(t,!1)):$(t),l=n[0],s=[],d=function(e,t,n,o){s.push({root:e,block:t,context:n,container:o})},u=function(e,t,n){void 0===a.themes&&(a.themes={}),void 0===a.themes[e]&&(a.themes[e]={}),void 0===a.themes[e][t]||null===a.themes[e][t]?a.themes[e][t]=n:null!=n&&a.themes[e][t]},c=$("[data-ko-container]",n),f={};c.each(function(e,t){var n=E.getAttribute(t,"data-ko-container")+"Blocks";E.removeAttribute(t,"data-ko-container"),E.setAttribute(t,"data-bind","block: "+n);var o=$("> [data-ko-block]",t);E.removeElements(o,!0),f[n]=o}),y.createOrUpdateBlockDef(a,"id"),y.createOrUpdateBlockDef(a,"bodyTheme"),y.createOrUpdateBlockDef(a,"blocks","blocks[]"),y.createOrUpdateBlockDef(a,"text"),k(l,a,u,d,i,"template",o,void 0,!1,r);var p=function(e,t,n){k(n,a,u,d,i,"block",o,e,!0,r)};for(var h in f)if(f.hasOwnProperty(h)){var b=f[h],v=h;y.ensurePathAndGetBindValue(a,u,o,o,"",v+".blocks","[]"),b.each(p.bind(void 0,v))}var g={_defs:a,templateName:o,_blocks:s};return void 0!==a[o]._version&&(g.version=a[o]._version),g}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./declarations.js":67,"./domutils.js":68,"./model.js":71,"./stylesheet.js":73,"./utils.js":74,"console-browserify":3}],73:[function(e,t,n){"use strict";var _=e("mensch/lib/parser.js"),j=(e("console-browserify"),e("./utils.js")),O=e("./declarations.js"),S=function(e,t){for(var n,o,i,r=0;r<t.length;r++)if("rule"==t[r].type){for(var a=t[r].selectors,l=!1,s=!1,d=0;d<a.length;d++)a[d].match(/:preview$/)?s=!0:l=!0;if(s&&l)throw"Cannot mix selectors type (:preview and declarations) in @supports -ko-blockdefs";if(!s&&!l)throw"Cannot find known selectors in @supports -ko-blockdefs";if(l){n="",o={},i=t[r].declarations;for(var u,c=0;c<i.length;c++)"property"==i[c].type&&(u="'"!=(h=i[c].value)[0]&&'"'!=h[0]||h[h.length-1]!=h[0]?h:h.substr(1,h.length-2).replace(/\\([\s\S])/gm,"$1"),"label"==i[c].name?o.name=u:"context"==i[c].name?o.contextName=u:"properties"==i[c].name?n=u:"theme"==i[c].name?o.globalStyle="_theme_."+u:"themeOverride"==i[c].name?o.themeOverride="true"==String(u).toLowerCase():o[i[c].name]=u);for(var f=0;f<a.length;f++)e(a[f],n,o)}if(s)for(var p=0;p<a.length;p++)e(a[p].substr(0,a[p].indexOf(":")),void 0,{previewBindings:t[r].declarations})}var h},A=function(e,t,n,o,i,r,a,l){var s,d=e,u=null;if(void 0===t){var c=_(e,{comments:!0,position:!0});if("stylesheet"!=c.type||void 0===c.stylesheet)throw"Unable to parse stylesheet";t=c.stylesheet.rules}for(var f=t.length-1;0<=f;f--){if("supports"==t[f].type&&"-ko-blockdefs"==t[f].name)S(o,t[f].rules),d=j.removeStyle(d,t[f].position.start,u,0,0,0,"");else if("media"==t[f].type||"supports"==t[f].type)d=A(d,t[f].rules,n,o,i,r,a,l);else if("comment"==t[f].type);else if("rule"==t[f].type){for(var p=t[f].selectors,h="",b=null,v=0;v<p.length;v++){0<h.length&&(h+=", ");var g=p[v].match(/\[data-ko-block=([^ ]*)\]/);if(null!==g){if(null!==b&&b!=g[1])throw"Found multiple block-match attribute selectors: cannot translate it ("+b+" vs "+g[1]+")";b=g[1]}h+="\x3c!-- ko text: templateMode =='wysiwyg' ? '#main-wysiwyg-area ' : '' --\x3e\x3c!-- /ko --\x3e"+p[v]}if(b){var m="\x3c!-- ko foreach: $root.findObjectsOfType($data, '"+b+"') --\x3e",y=u,w=" ";0<t[f].declarations.length&&(t[f].declarations[0].position.start.line!=t[f].position.end.line&&(w="\n"+new Array(t[f].position.start.col).join(" ")),y=t[f].declarations[t[f].declarations.length-1].position.end),null===y?d+=w+"\x3c!-- /ko --\x3e":d=y==u?j.removeStyle(d,y,u,0,0,0,w+"\x3c!-- /ko --\x3e"):j.removeStyle(d,y,u,0,0,0,w+"}"+w+"\x3c!-- /ko --\x3e"),h=m+w+h.replace(new RegExp("\\[data-ko-block="+b+"\\]","g"),"\x3c!-- ko text: '#'+id() --\x3e"+b+"\x3c!-- /ko --\x3e"),o(b,"",{contextName:"block"})}var x=b||l;s=n.bind(this,x,"");var k=O(d,t[f].declarations,r,s);null!==k&&(d=k),d=j.removeStyle(d,t[f].position.start,t[f].position.end,0,0,0,h)}u=t[f].position.start}return d};t.exports=A},{"./declarations.js":67,"./utils.js":74,"console-browserify":3,"mensch/lib/parser.js":19}],74:[function(e,t,n){"use strict";var s=e("console-browserify"),u=e("jsep");u.addBinaryOp("or",1),u.addBinaryOp("and",2),u.addBinaryOp("eq",6),u.addBinaryOp("neq",6),u.addBinaryOp("lt",7),u.addBinaryOp("lte",7),u.addBinaryOp("gt",7),u.addBinaryOp("gte",7);var c=function(e,t,n){return function t(e,n,o,i){if(void 0===o&&(o=!0),void 0!==i&&"Identifier"!==e.type&&"MemberExpression"!==e.type&&s.debug,"BinaryExpression"===e.type||"LogicalExpression"===e.type)return"("+t(e.left,n,o)+" "+function(e){switch(e){case"or":return"||";case"and":return"&&";case"lt":return"<";case"lte":return"<=";case"gt":return">";case"gte":return">=";case"eq":return"==";case"neq":return"!=";default:return e}}(e.operator)+" "+t(e.right,n,o)+")";if("CallExpression"===e.type){var r=e.arguments.map(function(e){return t(e,n,o)});return t(e.callee,n,o)+"("+r.join(", ")+")"}if("UnaryExpression"===e.type)return e.operator+t(e.argument,n,o);if("MemberExpression"==e.type&&e.computed)throw"Unexpected computed member expression";if("MemberExpression"!=e.type||e.computed){if("Literal"===e.type)return e.raw;if("Identifier"===e.type){var a=e.name;return o?n(a,i)+"()":a}if("ConditionalExpression"===e.type)return"("+t(e.test,n,o)+" ? "+t(e.consequent,n,o)+" : "+t(e.alternate,n,o)+")";throw"Compound"===e.type?"Syntax error in expression: operator expected after "+t(e.body[0],n,!1):"Found an unsupported expression type: "+e.type}var l=t(e.object,n,!1)+"."+t(e.property,n,!1);return o&&"Math"!==e.object.name&&"Color"!==e.object.name&&"Util"!==e.object.name?n(l,i)+"()":l}(e,t,void 0,n)};t.exports={addSlashes:function(e){return e.replace(/[\\"'\r\n\t\v\f\b]/g,"\\$&").replace(/\u0000/g,"\\0")},removeStyle:function(e,t,n,o,i,r,a){for(var l=e.split("\n"),s=i,d=r,u=1+o;u<t.line;u++)s+=l[u-1-o].length+1;if(s+=t.col,null!==n){for(var c=1+o;c<n.line;c++)d+=l[c-1-o].length+1;d+=n.col}else d+=e.length+1;return e.substr(0,s-1)+a+e.substr(d-1)},conditionBinding:function(e,t){var n=u(e);return c(n,t)},expressionBinding:function(e,l,t){var s;if(null!=t){var n=e.trim().replace(/@\[([^\]]+)\]|@([a-zA-Z0-9\._]+)\b/g,"###var###");if("###var###"==(n=n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")))s=[null,t];else if(n="^"+n.replace(/###var###/g,"(.+)")+"$",!(s=t.trim().match(new RegExp(n))))throw"Cannot find default value for "+e+" in "+t}try{var d=0,o="'"+e.replace(/@\[([^\]]+)\]|@([a-zA-Z0-9\._]+)\b|(')/g,function(e,t,n,o){if(o)return"\\"+o;d++;var i,r=t||n;if(s&&void 0!==s[d]&&(i=s[d].trim()),t){var a=u(t);return"'+"+c(a,l,i)+"+'"}return"'+"+l(r,i)+"()+'"})+"'";return o=o.replace(/(^|[^\\])''\+/g,"$1").replace(/\+''/g,"")}catch(l){throw"Exception parsing expression "+e+" "+l}}}},{"console-browserify":3,jsep:6}],75:[function(t,i,e){(function(e){"use strict";var u="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null;t("console-browserify");function d(e){var t=typeof e;if("object"===t&&(e?e.constructor==Date?t="date":"[object Array]"==Object.prototype.toString.call(e)&&(t="array"):t="null"),"array"==t){var n=u.observableArray();if(!e||0===e.length)return n;for(var o=0,i=e.length;o<i;++o)n.push(d(e[o]));return n}if("object"==t){var r={};for(var a in e){var l=e[a];r[a]=d(l)}return u.observable(r)}if("function"==t)return e;var s=u.observable();return s(e),s}var N=function(i,r,a,l,s,d){return u.computed({read:function(){var e=i();if(null===e){var t=u.utils.unwrapObservable(l);return void 0===t||"custom"==t?u.utils.unwrapObservable(r):d[t][s]}return e},write:function(e){var t,n=u.utils.unwrapObservable(l);if(t=void 0===n||"custom"==n?u.utils.peekObservable(r):d[n][s],a)i(e==t?null:e);else{var o=u.utils.peekObservable(i);e==t&&null===o||i(e)}}})},z=function(e,t,n,o,i,r,a){if(void 0===e){if(void 0===o.utils.unwrapObservable(a).type)throw"Found a non-typed def "+e;e=t[o.utils.unwrapObservable(o.utils.unwrapObservable(a).type)]}void 0===i&&void 0!==r&&r&&(i=a);var l="$root.content().",s=e._globalStyles;if(void 0!==s)for(var d in s)if(s.hasOwnProperty(d)){var u,c,f,p="$root.content().theme().scheme";if(s[d].substr(0,l.length)!=l)throw"UNEXPECTED globalStyle path ("+s[d]+") outside selfPath ("+l+")";f=s[d].substr(l.length),c=i,u=p.substr(0,l.length)==l?p.substr(l.length):p;for(var h=c,b=f.split("()."),v="",g=!0,m=0;m<b.length;m++)c=o.utils.unwrapObservable(c)[b[m]],g?"theme"==b[m]&&(g=!1):(0<v.length&&(v+="."),v+=b[m]);for(var y=u.split("()."),w=0;w<y.length;w++)h=o.utils.unwrapObservable(h)[y[w]];for(var x=d.split("."),k=a,_=0;_<x.length;_++)k=o.utils.unwrapObservable(k)[x[_]];if(!o.isObservable(k))throw"Unexpected non observable target "+d+"/"+v;k._defaultComputed=N(k,c,!0,h,v,n)}if(void 0!==e._variant){for(var j=e._variant.split("."),O=a,S=o.utils.unwrapObservable(a),A=0;A<j.length;A++)O=o.utils.unwrapObservable(O)[j[A]];if(void 0!==O._defaultComputed&&(O=O._defaultComputed),void 0===O)throw"ERROR looking for variant target "+e._variant;S._nextVariant=function(e,t,n){for(var o=e.utils.unwrapObservable(t),i=0;i<n.length&&e.utils.peekObservable(n[i])!=o;i++);i==n.length&&(i=n.length-1);var r=i+1;r==n.length&&(r=0),t(e.utils.peekObservable(n[r]))}.bind(O,o,O,function(e){var t=e._variant;if("object"!=typeof e[t]||void 0===e[t]._widget||"string"!=typeof e[t]._options&&"boolean"!==e[t]._widget)throw"Unexpected variant declaration: cannot find property "+t+" or its _options string and it is not a boolean";return"string"==typeof e[t]._options?function(e){for(var t=e.split("|"),n=[],o=0;o<t.length;o++){var i=t[o].split("=");n.push(i[0].trim())}return n}(e[t]._options):[!0,!1]}(e))}for(var $ in e)if(e.hasOwnProperty($)){var C=e[$];if("object"==typeof C&&null!==C&&void 0!==C._context&&"block"==C._context){var E=i[$](),T=z(t[$],t,n,o,i,r,E);a[$](T)}else if("object"==typeof C&&null!==C&&"blocks"==C.type){for(var M,I,H,B=i[$](),D=B.blocks(),P=0;P<D.length;P++)M=o.utils.unwrapObservable(D[P]),I=o.utils.unwrapObservable(M.type),H=z(t[I],t,n,o,i,r,M),D[P](H);var F=B.blocks;R(F,U.bind(B,void 0,t,n,o,void 0,i,r)),i[$]._wrap=L.bind(i[$],F._instrumentBlock),i[$]._unwrap=q.bind(i[$])}}return a},R=function(e,t){e._instrumentBlock=t,void 0===e.origPush&&(e.origPush=e.push,e.push=n.bind(e),e.origSplice=e.splice,e.splice=o.bind(e))},L=function(e,t){var n=u.toJS(t),o=n.blocks;n.blocks=[];var i=d(n)();R(i.blocks,e);for(var r=0;r<o.length;r++){var a=u.toJS(o[r]);a.id="block_"+r,i.blocks.push(a)}this(i)},n=function(){if(1<arguments.length)throw"Array push with multiple arguments not implemented";if(0<arguments.length&&u.isObservable(arguments[0])&&("function"==typeof arguments[0]._unwrap&&(arguments[0]=arguments[0]._unwrap())),u.isObservable(arguments[0]))return this.origPush.apply(this,arguments);var e=this._instrumentBlock(arguments[0]);return this.origPush.apply(this,[e])},o=function(){if(3<arguments.length)throw"Array splice with multiple objects not implemented";if(2<arguments.length&&u.isObservable(arguments[2])&&("function"==typeof arguments[2]._unwrap&&(arguments[2]=arguments[2]._unwrap())),2<arguments.length&&!u.isObservable(arguments[2])){var e=this._instrumentBlock(arguments[2]);return this.origSplice.apply(this,[arguments[0],arguments[1],e])}return this.origSplice.apply(this,arguments)},U=function(e,t,n,o,i,r,a,l){void 0===i&&(i=l);var s=d(i);return s(z(e,t,n,o,r,a,s())),s._unwrap=q.bind(s),s},q=function(){return u.toJS(this)};i.exports=function(e,t,n){var o=U.bind(void 0,t,n,n.themes),i=o(u,e,void 0,!0);return i._wrap=function(e,t){this(u.utils.unwrapObservable(e(u,t,void 0,!0)))}.bind(i,o),i._unwrap=q.bind(i),i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":3}],76:[function(e,i,t){(function(t){var n=e("tinycolor2");function o(n){this.getBrightness=function(e){return n(e).getBrightness()},this.isLight=function(e){return n(e).isLight()},this.isDark=function(e){return n(e).isDark()},this.getLuminance=function(e){return n(e).getLuminance()},this.lighten=function(e,t){return n(e).lighten(t).toHexString()},this.brighten=function(e,t){return n(e).brighten(t).toHexString()},this.darken=function(e,t){return n(e).darken(t).toHexString()},this.desaturate=function(e,t){return n(e).desaturate(t).toHexString()},this.saturate=function(e,t){return n(e).saturate(t).toHexString()},this.greyscale=function(e){return n(e).greyscale().toHexString()},this.spin=function(e,t){return n(e).spin(t).toHexString()},this.complement=function(e){return n(e).complement().toHexString()},this.mix=n.mix,this.readability=n.readability,this.isReadable=n.isReadable,this.mostReadable=n.mostReadable}i.exports=function(e){t.Color=new o(n)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{tinycolor2:29}],77:[function(n,o,e){(function(e){"use strict";var i="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null,t="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null;n("console-browserify");o.exports=function(n){var o;n.titleMode=t.observable("show"),n.metadata.name=t.observable(n.metadata.name),n.mailingName=t.computed(function(){return n.metadata.name()},n),n.enableEditMailingName=function(e,t){o=n.metadata.name(),n.titleMode("edit")},n.cancelEditMailingName=function(e,t){n.metadata.name(o),o="",n.titleMode("show")},n.saveEditMailingName=function(e,t){n.titleMode("saving"),n.notifier.info(n.t("edit-title-ajax-pending")),i.ajax({method:"POST",url:n.metadata.url.update,data:{name:n.metadata.name()},success:function(e){n.metadata.name(e.meta.name),n.notifier.success(n.t("edit-title-ajax-success"))},error:function(){n.notifier.error(n.t("edit-title-ajax-fail"))},complete:function(){o="",n.titleMode("show")}})}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":3}],78:[function(t,n,e){(function(e){"use strict";var i="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,l=t("url"),r=t("../../../shared/slug-filename.js"),o=t("./custom-server-storage"),a=t("./custom-edit-title"),s=t("./custom-text-editor"),d=t("./custom-gallery"),u=t("./custom-remove-gallery-image"),c=t("./custom-widget-bgimage");n.exports={extendViewModel:function(e,t){var n;t.push(o),t.push((n=e,function(e){e.logoPath=!1,e.logoUrl=!1,e.logoAlt=!1,e.brandName=n.brandName})),t.push(a),t.push(d(e)),t.push(u),t.push(c(e))},extendKnockout:function(a){var t,n;"fr"===a.lang&&(s.language_url="/tinymce-langs/fr_FR.js",s.language="fr_FR",tinymce.util.I18n.add("fr_FR",{Cancel:"Annuler","in pixel":"en pixel","Enter a font-size":"Entrez une taille de police","Letter spacing":"Interlettrage","Font size":"Taille de police","Font size: ":"Taille : ","minimum size: 8px":"taille minimum : 8px","no decimals":"pas de décimales"})),s=$.extend({convert_urls:!1},s,a.tinymce),i.bindingHandlers.wysiwyg.fullOptions=s,i.bindingHandlers.wysiwyg.standardOptions={convert_urls:!1,external_plugins:{paste:s.external_plugins.paste},theme_url:s.theme_url,skin_url:s.skin_url},i.bindingHandlers.wysiwygSrc.templateUrlConverter=(n=(t=a).metadata.assets||{},function(e){return e?/\]$/.test(e)?null:/^http/.test(e)?null:/<%/.test(e)?null:(e=/([^\/]*)$/.exec(e)[1],/\.[0-9a-z]+$/.test(e)?(e=r(e),e=n[e]?t.imgProcessorBackend+n[e]:null):null):null});var o=l.parse(a.imgProcessorBackend);i.bindingHandlers.fileupload.remoteFilePreprocessor=function(e){var t=l.format({protocol:o.protocol,host:o.host,pathname:o.pathname});return e.url=l.resolve(t,l.parse(e.url).pathname),e},i.bindingHandlers.wysiwygSrc.convertedUrl=function(e,t,n,o){var i=l.parse(e).pathname;i=i.replace("/img/","");var r=a.basePath+"/"+t;return r+"/"+n+"x"+o+"/"+i},i.bindingHandlers.wysiwygSrc.placeholderUrl=function(e,t,n){return a.basePath+"/placeholder/"+e+"x"+t+".png"}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../shared/slug-filename.js":42,"./custom-edit-title":77,"./custom-gallery":79,"./custom-remove-gallery-image":80,"./custom-server-storage":81,"./custom-text-editor":82,"./custom-widget-bgimage":83,url:31}],79:[function(t,n,e){(function(e){"use strict";t("console-browserify");var a="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null,l="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,s=t("lodash.find");n.exports=function(e){var r=e.fileuploadConfig.url;return function(i){function e(e){var t=r[e],n=i[e+"Gallery"],o=i[e+"GalleryStatus"];return function(){o("loading"),a.getJSON(t,function(e){for(var t=0;t<e.files.length;t++)e.files[t]=i.remoteFileProcessor(e.files[t]);o(e.files.length),n(e.files.reverse())}).fail(function(){o(!1),i.notifier.error(i.t("Unexpected error listing files"))})}}function t(e){var n=i[e+"Gallery"],o=i[e+"GalleryStatus"];return function(e){var t=e.name;s(n(),function(e){return e.name===t})||!1!==o()&&(n.unshift(e),o(n().length))}}i.mailingGallery=l.observableArray([]),i.templateGallery=l.observableArray([]),i.mailingGalleryStatus=l.observable(!1),i.templateGalleryStatus=l.observable(!1),i.loadMailingGallery=e("mailing"),i.loadTemplateGallery=e("template"),i.loadMailingImage=t("mailing"),i.loadTemplateImage=t("template");var n=i.showGallery.subscribe(function(e){!0===e&&!1===i.mailingGalleryStatus()&&(i.loadMailingGallery(),n.dispose())}),o=i.selectedImageTab.subscribe(function(e){1===e&&!1===i.templateGalleryStatus()&&(i.loadTemplateGallery(),o.dispose())},i,"change")}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":3,"lodash.find":14}],80:[function(t,n,e){(function(e){"use strict";t("console-browserify");var r="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null;"undefined"!=typeof window?window.ko:void 0!==e&&e.ko;n.exports=function(i){i.removeImage=function(e,n,t){var o=e.deleteUrl;r.ajax({url:o,method:"DELETE",type:"DELETE",success:function(e){i.notifier.success(i.t("gallery-remove-image-success"));var t=i[n+"Gallery"];(0,i[n+"GalleryStatus"])(e.files.length),t(e.files.reverse())},error:function(e){i.notifier.error(i.t("gallery-remove-image-fail"))}})}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":3}],81:[function(e,t,n){(function(r){"use strict";e("console-browserify");var a="undefined"!=typeof window?window.jQuery:void 0!==r?r.jQuery:null,l="undefined"!=typeof window?window.ko:void 0!==r?r.ko:null,s=e("lodash.omit"),d=e("validator/lib/isEmail");t.exports=function(o){var i={name:"Save",enabled:l.observable(!0),execute:function(){i.enabled(!1);var e,t,n=(e=o,(t=s(l.toJS(e.metadata),["urlConverter","template"])).data=e.exportJS(),t);a.ajax({url:window.location.href,method:"POST",contentType:"application/json",data:JSON.stringify(n),success:function(e,t,n){o.notifier.success(o.t("save-message-success"))},error:function(e,t,n){o.notifier.error(o.t("save-message-error"))},complete:function(){i.enabled(!0)}})}},n={name:"Test",enabled:l.observable(!0),execute:function(){n.enabled(!1);var e=o.t("Insert here the recipient email address");if(!(e=r.prompt(o.t("Test email address"),e)))return n.enabled(!0);if(!d(e))return r.alert(o.t("Invalid email address")),n.enabled(!0);l.toJS(o.metadata);var t={rcpt:e,html:o.exportHTML()};a.ajax({url:o.metadata.url.send,method:"POST",data:t,success:function(e,t,n){o.notifier.success(o.t("Test email sent..."))},error:function(e,t,n){o.notifier.error(o.t("Unexpected error talking to server: contact us!"))},complete:function(){n.enabled(!0)}})}},t={name:"Download",enabled:l.observable(!0),execute:function(e){t.enabled(!1),o.notifier.info(o.t("Downloading...")),o.exportHTMLtoTextarea("#downloadHtmlTextarea"),a("#downloadHtmlFilename").val(o.metadata.name()),a("#downloadForm").attr("action",o.metadata.url.zip+"?format="+e).submit(),t.enabled(!0)}};o.save=i,o.test=n,o.download=t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":3,"lodash.omit":15,"validator/lib/isEmail":37}],82:[function(e,t,n){"use strict";var r=e("lodash.debounce"),o=[0,1,2,3,5,8,13].map(function(e){return Math.round(.1*e*100)/100}).map(function(e){return e+"="+e+"em"}).join(" ");tinymce.PluginManager.add("spacing",function(e,t){e.addButton("letterspacingselect",function(){return{type:"listbox",text:"Letter spacing",tooltip:"Letter spacing",values:(e.settings.spacing_formats||o).split(" ").map(function(e){var t=e,n=e,o=e.split("=");return 1<o.length&&(t=o[0],n=o[1]),{text:t,value:n}}),fixedWidth:!0,onclick:function(e){e.control.settings.value&&(tinymce.activeEditor.formatter.register("letter-spacing",{inline:"span",styles:{"letter-spacing":e.control.settings.value}}),tinymce.activeEditor.formatter.apply("letter-spacing"))}}})}),tinymce.PluginManager.add("fontsizedialog",function(o,e){var i=!1,n=[tinymce.util.I18n.translate("minimum size: 8px"),tinymce.util.I18n.translate("no decimals")].map(function(e){return"• "+e}).join("<br>");o.addButton("fontsizedialogbutton",{text:"Font size",tooltip:"Font size",classes:"fontsizedialogbutton",icon:!1,onPostRender:function(e){var t=e.control;function n(e){if(e.style&&e.style.fontSize)return t.text(tinymce.util.I18n.translate("Font size: ")+e.style.fontSize),i=e.style.fontSize,!1;i=!1,t.text(tinymce.util.I18n.translate("Font size"))}o.on("nodeChange",r(function(e){(function(e,t,n){var o,i;if(e)if(n=n||e,void 0!==e.length){for(o=0,i=e.length;o<i;o++)if(!1===t.call(n,e[o],o,e))return}else for(o in e)if(e.hasOwnProperty(o)&&!1===t.call(n,e[o],o,e))return})(e.parents,n),i||(i=document.defaultView.getComputedStyle(e.parents[0]||e.element,null).getPropertyValue("font-size"))},150))},onclick:function(e){var t=i?/^(\d+)/.exec(i):null;t=Array.isArray(t)?t[0]:"",o.windowManager.open({title:"Enter a font-size",width:320,height:120,body:[{type:"label",multiline:!0,text:"",onPostRender:function(){this.getEl().innerHTML=n}},{type:"textbox",name:"bsdialogfontsize",label:"in pixel",autofocus:!0,value:t,onPostRender:function(){this.$el.attr({type:"number",min:8,step:1})}}],onsubmit:function(e){var t=~~e.data.bsdialogfontsize;8<=t&&t<=666&&o.execCommand("FontSize",!1,t+"px")}})}})});t.exports={toolbar1:"bold italic forecolor backcolor hr | fontsizedialogbutton styleselect letterspacingselect removeformat | link unlink | pastetext code",plugins:["link hr paste lists textcolor colorpicker code spacing fontsizedialog"],style_formats:[{title:"Inline",items:[{title:"Bold",icon:"bold",inline:"strong"},{title:"Italic",icon:"italic",inline:"em"},{title:"Underline",icon:"underline",inline:"span",styles:{"text-decoration":"underline"}},{title:"Strikethrough",icon:"strikethrough",inline:"span",styles:{"text-decoration":"line-through"}},{title:"Superscript",icon:"superscript",inline:"sup"},{title:"Subscript",icon:"subscript",inline:"sub"},{title:"Code",icon:"code",inline:"code"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",block:"div",styles:{"text-align":"left"}},{title:"Center",icon:"aligncenter",block:"div",styles:{"text-align":"center"}},{title:"Right",icon:"alignright",block:"div",styles:{"text-align":"right"}},{title:"Justify",icon:"alignjustify",block:"div",styles:{"text-align":"justify"}}]}]}},{"lodash.debounce":13}],83:[function(t,o,e){(function(e){"use strict";var n="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,i=(t("console-browserify"),Object.freeze({}));function r(e,t,n){return'\n    <input size="7" type="hidden" value="nothing" id="'+e+'" data-bind="value: '+e+", "+t+"\" />\n    <button data-bind=\"text: $root.t('widget-bgimage-button'), click: $root.openDialogGallery.bind($element, '"+e+"', '"+n+"');\">pick an image</button>\n    <button data-bind=\"click: $root.resetBgimage.bind($element, '"+e+"', '"+n+"'), button: {icons: {primary: 'fas fa-eraser'}, text: false, label: $root.t('widget-bgimage-reset') }\"></button>\n  "}o.exports=function(e){var o=e.basePath;return{widget:function(e,t,n){return{widget:"bgimage",defaultParameters:i,html:r}},viewModel:function(i){i.showDialogGallery=n.observable(!1),i.currentBgimage=n.observable(!1),i.setBgImage=function(e,t,n){i.currentBgimage()(o+"/img/"+e),i.closeDialogGallery()},i.resetBgimage=function(e,t,n,o){n[e]("data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==")},i.openDialogGallery=function(e,t,n,o){i.currentBgimage(n[e].bind(n)),i.showDialogGallery(!0)},i.closeDialogGallery=function(){i.currentBgimage(!1),i.showDialogGallery(!1)};var t=i.showDialogGallery.subscribe(function(e){!0===e&&!1===i.mailingGalleryStatus()&&(i.loadMailingGallery(),t.dispose())})}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":3}],84:[function(t,n,e){(function(e){"use strict";t("console-browserify");var i="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null,r=t("juice/lib/inline")({}).inlineDocument;n.exports=function(e){e.inline=function(n){i("[style]:not([replacedstyle])",n).each(function(e,t){var n=i(t);n.attr("replacedstyle",n.attr("style"))});var o=[];i('style[data-inline="true"]',n).each(function(e,t){var n=i(t).html();n=(n=n.replace(/<!-- ko ((?!--).)*? -->/g,"")).replace(/<!-- \/ko -->/g,""),o.push(n),i(t).removeAttr("data-inline")});var e=o.join("\n"),t=function(e,t){return void 0===t&&(t=n),i(e,t)};t.root=function(){return i(":root",n)},r(t,e,{styleAttributeName:"replacedstyle"})}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":3,"juice/lib/inline":7}],85:[function(t,n,e){(function(e){"use strict";t("console-browserify"),"undefined"!=typeof window?window.ko:void 0!==e&&e.ko,"undefined"!=typeof window?window.jQuery:void 0!==e&&e.jQuery;n.exports=function(){}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":3}],86:[function(e,n,t){(function(t){n.exports=function(e){t.Util={decodeURI:decodeURI,encodeURI:encodeURI,decodeURIComponent:decodeURIComponent,encodeURIComponent:encodeURIComponent}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],87:[function(e,t,n){"use strict";e("knockout-sortable"),e("./bindings/jqueryui-spinner.js"),e("./bindings/jqueryui-tabs.js"),e("./bindings/colorpicker.js"),e("./bindings/blocks.js"),e("./bindings/csstext.js"),e("./bindings/bind-iframe.js"),e("./bindings/extdroppable.js"),e("./bindings/preloader.js"),e("./bindings/fileupload.js"),e("./bindings/virtuals.js"),e("./bindings/wysiwygs.js"),e("./bindings/scrollfix.js"),e("./bindings/if-subs.js"),e("./bindings/extsortables.js"),e("./bindings/eventable.js"),e("./bindings/tooltips.js"),e("./bindings/extender-pagination.js"),e("./bindings/validated-value.js"),e("./bindings/scrollintoview.js")},{"./bindings/bind-iframe.js":44,"./bindings/blocks.js":45,"./bindings/colorpicker.js":47,"./bindings/csstext.js":48,"./bindings/eventable.js":49,"./bindings/extdroppable.js":50,"./bindings/extender-pagination.js":51,"./bindings/extsortables.js":52,"./bindings/fileupload.js":53,"./bindings/if-subs.js":54,"./bindings/jqueryui-spinner.js":55,"./bindings/jqueryui-tabs.js":56,"./bindings/preloader.js":57,"./bindings/scrollfix.js":59,"./bindings/scrollintoview.js":60,"./bindings/tooltips.js":62,"./bindings/validated-value.js":63,"./bindings/virtuals.js":64,"./bindings/wysiwygs.js":65,"knockout-sortable":11}],88:[function(i,r,e){(function(M){"use strict";var I="undefined"!=typeof window?window.jQuery:void 0!==M?M.jQuery:null,H="undefined"!=typeof window?window.ko:void 0!==M?M.ko:null,B="undefined"!=typeof window?window.kojqui:void 0!==M?M.kojqui:null,D=i("./converter/main.js"),n=i("console-browserify"),P=i("./viewmodel.js"),F=i("./bindings/choose-template.js");if(!I.ui.version.match(/^1\.11\..*$/))throw"Usupported jQuery UI version detected: "+I.ui.version+" (we only support 1.11.*)";var N=function(e,t,n,o){var i,r,a,l,s;s=[],void 0!==o&&o?(i=e.length-1,r=0,a=-1):(i=0,r=e.length-1,a=1);for(var d=i;d!=r+a;d+=a)void 0!==e[d][t]&&void 0!==(l=e[d][t].apply(e[d],n))&&s.push(l);return s},o=H.utils.domNodeDisposal.addDisposeCallback;H.utils.domNodeDisposal.addDisposeCallback=function(e,t){o(e,function(e){try{t(e)}catch(e){n.debug}})};function z(t){var n;return{viewModel:function(e){n=t(e)},init:function(){void 0!==n&&void 0!==n.init&&n.init()},dispose:function(){void 0!==n&&void 0!==n.dispose&&n.dispose()}}}var d=function(e,t,n,o,i,r,a,l){var s=o.match(/^([\S\s]*)([<]html[^>]*>[\S\s]*<\/html>)([\S\s]*)$/i);if(null===s)throw"Unable to find <html> opening and closing tags in the template";var d=s[1],u={"<html":0,"<head":0,"<body":0,"</html":0,"</body":0,"</head":0},c=s[2].replace(/(<\/?)(html|head|body)([^>]*>)/gi,function(e,t,n,o){return u[(t+n).toLowerCase()]+=1,t+"replaced"+n+o});for(var f in u)if(u.hasOwnProperty(f)&&1!=u[f]){if(0===u[f])throw"ERROR: missing mandatory element "+f+">";if(1<u[f])throw"ERROR: multiple element "+f+"> occourences are not supported (found "+u[f]+" occourences)"}var p=s[3],h=[],b=[];if(void 0!==a)for(var v=0;v<a.length;v++)"function"==typeof a[v]?b.push(z(a[v])):b.push(a[v]);var g=[],m={adder:function(e,t){if("string"!=typeof t)throw"Template system: cannot create new template "+e;t.match(/(data)?-ko-[^ =:]*/g);F.addTemplate(e,t),g.push(e)},exists:function(e){return void 0!==F.getTemplateContent(e)},dispose:function(){for(var e=g.length-1;0<=e;e--)F.removeTemplate(g[e])}};H.bindingHandlers.block.templateExists=m.exists;for(var y=function(e,t,n,o){var i=n;for(void 0!==n&&void 0!==o&&("object"==typeof t&&"replacedhtml"==t.tagName.toLowerCase()||(i+="-"+o));null==i||e.exists(i);)i="anonymous-"+Math.floor(1e5*Math.random()+1);if("object"==typeof t&&"replacedhtml"==t.tagName.toLowerCase()){var r=I(t),a=I("replacedhead",r),l=I("replacedbody",r);e.adder(i+"-head",a.html()||""),e.adder(i+"-show",l.html()||""),e.adder(i+"-preview",r.html()),e.adder(i+"-wysiwyg",r.html()),a.children().detach(),a.html("\x3c!-- ko block: content --\x3e\x3c!-- /ko --\x3e"),a.before("\x3c!-- ko withProperties: { templateMode: 'head' } --\x3e"),a.after("\x3c!-- /ko --\x3e"),l.html("\x3c!-- ko block: content --\x3e\x3c!-- /ko --\x3e"),e.adder(i+"-iframe",r[0].outerHTML)}else"object"==typeof t?e.adder(i,t.outerHTML):e.adder(i,t);return i}.bind(void 0,m),w=e("translateTemplate",D.translateTemplate.bind(void 0,n,c,t,y)),x=e("generateModel",D.wrappedResultModel.bind(void 0,w)),k={},_=N(b,"widget",[I,H,B]),j=0;j<_.length;j++)k[_[j].widget]=_[j];h.push.apply(h,e("generateEditors",D.generateEditors.bind(void 0,w,k,t,y,"+$root.contentListeners()")));var O=!1;if(null!=i){var S;S="string"==typeof i?H.utils.parseJson(i):i,2==e("checkModel",D.checkModel.bind(void 0,x._unwrap(),h,S))&&(O=!0);try{x._wrap(S)}catch(e){O=!0}}var A=d+F.getTemplateContent(n+"-iframe").replace(/(<\/?)replaced(html|head|body)([^>]*>)/gi,function(e,t,n,o){return t+n+o})+p,$=H.bindingHandlers.bindIframe.tpl;H.bindingHandlers.bindIframe.tpl=A;var C={dispose:function(){H.bindingHandlers.bindIframe.tpl=$}};b.push(C),b.push(m);var E,T=e("initializeViewmodel",P.bind(this,x,h,t,l));return T.metadata=r,void 0!==T.metadata.editorversion&&T.metadata.editorversion,T.metadata.editorversion="0.17.4",void 0!==w.version&&(void 0!==T.metadata.templateversion&&(T.metadata.templateversion,w.version),T.metadata.templateversion=w.version),F.init(),b.push((E=e,{viewModel:function(e){try{E("applyBindings",H.applyBindings.bind(void 0,e))}catch(e){throw e}},dispose:function(){try{E("unapplyBindings",H.cleanNode.bind(this,M.document.body))}catch(e){throw e}}})),N(b,"viewModel",[T]),O&&I("#incompatible-template").dialog({modal:!0,appendTo:"#mo-body",buttons:{Ok:function(){I(this).dialog("close")}}}),{model:T,init:function(){N(b,"init",void 0,!0)},dispose:function(){N(b,"dispose",void 0,!0)}}},e=function(e,t){if(!t())throw"Missing feature "+e},t=function(){var e="checkbadbrowsersframe",t=H.bindingHandlers.bindIframe.tpl;H.bindingHandlers.bindIframe.tpl='<!DOCTYPE html>\r\n<html>\r\n<head><title>A</title>\r\n</head>\r\n<body><p style="color: blue" align="right" data-bind="style: { color: \'red\' }">B</p><div data-bind="text: content"></div></body>\r\n</html>\r\n',I("body").append('<iframe id="'+e+'" data-bind="bindIframe: $data"></iframe>');var n=M.document.getElementById(e);H.applyBindings({content:"dummy content"},n);var o=n.contentWindow.document.doctype,i="<!DOCTYPE "+o.name+(o.publicId?' PUBLIC "'+o.publicId+'"':"")+(!o.publicId&&o.systemId?" SYSTEM":"")+(o.systemId?' "'+o.systemId+'"':"")+">\n"+n.contentWindow.document.documentElement.outerHTML;H.cleanNode(n),H.removeNode(n),H.bindingHandlers.bindIframe.tpl=t;var r='<!DOCTYPE html>\n<html><head><title>A</title>\n</head>\n<body><p align="right" style="color: red;" data-bind="style: { color: \'red\' }">B</p><div data-bind="text: content">dummy content</div>\n\n</body></html>',a='<!DOCTYPE html>\n<html><head><title>A</title>\n</head>\n<body><p style="color: red;" data-bind="style: { color: \'red\' }" align="right">B</p><div data-bind="text: content">dummy content</div>\n\n</body></html>',l='<!DOCTYPE html>\n<html><head><title>A</title>\n</head>\n<body><p style="color: red;" align="right" data-bind="style: { color: \'red\' }">B</p><div data-bind="text: content">dummy content</div>\n\n</body></html>';if(r!==i&&a!==i&&l!==i)throw"Unexpected frame content. Misbehaving browser: "+i.length+"/"+r.length+"/"+a.length+"/"+l.length};r.exports={compile:d,load:function(o,e,t,i,r,a){var l=H.bindingHandlers.wysiwygSrc.templateUrlConverter,s=t;I.ajax({url:e,method:"GET",success:function(e,t,n){d(o,l,"template",e,i,s,r,a).init()},error:function(e,t,n){I(".mo-standalone").html("<h1>error</h1><h2>"+n+"</h2>")}})},isCompatible:function(){try{return e("matchMedia",function(){return void 0!==M.matchMedia}),e("XMLHttpRequest 2",function(){return"XMLHttpRequest"in M&&"withCredentials"in new M.XMLHttpRequest}),e("ES5 strict",function(){return function(){return void 0===this}()}),e("CSS borderRadius",function(){return void 0!==M.document.body.style.borderRadius}),e("CSS boxShadow",function(){return void 0!==M.document.body.style.boxShadow}),e("CSS boxSizing",function(){return void 0!==M.document.body.style.boxSizing}),e("CSS backgroundSize",function(){return void 0!==M.document.body.style.backgroundSize}),e("CSS backgroundOrigin",function(){return void 0!==M.document.body.style.backgroundOrigin}),t(),!0}catch(e){return!1}},fixPageEvents:function(){M.addEventListener&&(M.addEventListener("drag",function(e){(e=e||M.event).preventDefault()},!1),M.addEventListener("dragstart",function(e){(e=e||M.event).preventDefault()},!1),M.addEventListener("dragover",function(e){(e=e||M.event).preventDefault()},!1),M.addEventListener("drop",function(e){(e=e||M.event).preventDefault()},!1),M.document.body.addEventListener("drop",function(e){e.preventDefault()},!1)),M.document.ondragstart&&(M.document.ondragstart=function(){return!1})}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./bindings/choose-template.js":46,"./converter/main.js":70,"./viewmodel.js":93,"console-browserify":3}],89:[function(e,t,n){"use strict";var r=e("console-browserify"),a=[];t.exports={timedCall:function(e,t){var n,o=(new Date).getTime();"object"==typeof r&&r.time,n=t(),"object"==typeof r&&r.time;var i=(new Date).getTime()-o;return"object"!=typeof r||r.time||r.debug,a.push({name:e,time:i}),100<a.length&&a.unshift(),n},logs:a}},{"console-browserify":3}],90:[function(t,n,e){(function(e){"use strict";var o="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,i=t("./undomanager.js"),r=t("./undoserializer.js");n.exports=function(n){return function(e){e.contentListeners(e.contentListeners()+2);var t=i(e.content,{levels:100,undoLabel:o.computed(function(){return e.t("Undo (#COUNT#)")}),redoLabel:o.computed(function(){return e.t("Redo")})});return e.undo=t.undoCommand,e.undo.execute=n.bind(e,"undo",e.undo.execute),e.redo=t.redoCommand,e.redo.execute=n.bind(e,"redo",e.redo.execute),e.undoReset=n.bind(e,"undoReset",t.reset),e.setUndoModeMerge=t.setModeMerge,e.setUndoModeOnce=t.setModeOnce,t.setModeIgnore(),t.setUndoActionMaker(r.makeUndoAction.bind(void 0,e.content)),r.watchEnabled(!0),{pause:function(){t.setModeIgnore()},run:function(){t.setModeOnce()},init:function(){t.setModeOnce()},dispose:function(){e.contentListeners(e.contentListeners()-2),r.watchEnabled(!1),t.dispose()}}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./undomanager.js":91,"./undoserializer.js":92}],91:[function(t,n,e){(function(e){"use strict";var v="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,g=t("ko-reactor/dist/ko-reactor.min.js");t("console-browserify");n.exports=function(e,r){var a,t=v.observableArray(),n=v.observableArray(),l=0,s=0,o={levels:100,undoLabel:"undo (#COUNT#)",redoLabel:"redo (#COUNT#)"};r="object"==typeof r?v.utils.extend(o,r):o;var d=function(e){1==l?i(e,n):2==l?i(e,t):0==l&&(i(e,t),n.removeAll())},i=function(e,t){if(0<t().length){var n=(i=e,void 0!==(o=t()[t().length-1]).mergedAction?o.mergedAction(i):null);if(null!==n)return void(t()[t().length-1]=n)}var o,i;t().length>=r.levels&&t.shift(),(a=t).push(e)},u=function(e,o,i){return{name:v.computed(function(){return v.utils.unwrapObservable(e).replace(/#COUNT#/,i().length)}),enabled:v.computed(function(){return 0!==i().length}),execute:function(){var e=i.pop();if(e){var t=l;l=o;var n=s;s=3,e(),c(a),s=n,l=t}return!0}}},c=function(e){if(void 0===e)throw"Unexpected operation: stack cleaner called with undefined stack";0<e().length&&void 0!==e()[e().length-1].mergedAction&&delete e()[e().length-1].mergedAction},f=function(e,t){var n=function(e,t){e(),t()}.bind(void 0,e,t);return void 0!==e.mergedAction&&(n.mergedAction=e.mergedAction),n},p=function(e,t,n){if(void 0!==t)e(t);else{if(!n)throw"Unexpected condition: no item and no child.oldValues!";if("deleted"==n.status)e.splice(n.index,0,n.value);else{if("added"!=n.status)throw"Unsupported item.status: "+n.status;e.splice(n.index,1)}}},h=function(e,t,n,o,i){return e.bind(void 0,n,o,i)},b=("function"==typeof g?g:v.watch)(e,{depth:-1,oldValues:1,mutable:!0,tagFields:!0},function(e,t,n){var o=void 0!==t.oldValues?t.oldValues[0]:void 0,i=h(p,e,t,o,n);1!=s&&(3==s?void 0!==i&&(i.mergedAction=function(e){return void 0!==e.mergeMe&&e.mergeMe?f(e,this):null},i.mergeMe=!0):void 0!==i&&(t.oldValues&&2==s&&(i.mergedAction=function(e,t,n){return"object"==typeof n.mergeableAction&&e==n.mergeableAction.child?this:null}.bind(i,t,n),i.mergeableAction={child:t,item:n}),n&&"deleted"==n.status?i.mergedAction=function(e,t,n){return"object"==typeof n.mergeableMove&&t.value==n.mergeableMove.item.value?f(n,this):null}.bind(i,t,n):n&&"added"==n.status&&(i.mergeableMove={child:t,item:n})),void 0!==i&&d(i))},{});return{push:d,undoCommand:u(r.undoLabel,1,t),redoCommand:u(r.redoLabel,2,n),reset:function(){t.removeAll(),n.removeAll()},setModeOnce:function(){s=2,c(t)},setModeMerge:function(){s=3,c(t)},setModeNormal:function(){s=0,c(t)},setModeIgnore:function(){s=1,c(t)},setUndoActionMaker:function(e){h=e},dispose:function(){b.dispose()}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":3,"ko-reactor/dist/ko-reactor.min.js":12}],92:[function(n,o,e){(function(e){"use strict";var l,t,s="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,d=(n("console-browserify"),function(e,t){for(var n,o,i=0,r=e;i<t.length;)switch(t.charAt(i)){case"(":")"==t.charAt(i+1)&&(r=r()),i+=2;break;case"[":o=t.indexOf("]",i),r=r[t.substring(i+1,o)],i=o+1;break;case".":-1==(n=t.indexOf("(",i))&&(n=t.length),-1==(o=t.indexOf("[",i))&&(o=t.length),o=Math.min(n,o),r=r[t.substring(i+1,o)],i=o}return r}),u=function(e,t){for(var n,o="",i=0;i<=e.length;i++)if(n=i<e.length?e[i]:t,s.isObservable(n)&&(o+="()"),void 0!==n._fieldName)o+="."+n._fieldName;else{if(!(0<i&&"function"==typeof e[i-1].pop))throw"Unexpected parent with no _fieldName and no parent array";var r=s.isObservable(e[i-1])?s.utils.peekObservable(e[i-1]):e[i-1],a=s.utils.arrayIndexOf(r,n);if(-1==a)throw"Unexpected object not found in parent array";o+="["+a+"]"}return o};o.exports={dereference:u,reference:d,makeUndoAction:function(e,t,n,o,i,r){try{var a=u(n,o);if("object"!=typeof i&&"function"!=typeof i||(i=s.toJS(i)),void 0===r||"object"!=typeof r.value&&"function"!=typeof r.value||(r=s.toJS(r)),void 0!==l)try{l(a,o,i,r)}catch(e){}return function(e,t,n,o,i){e(d(t,n),o,i)}.bind(void 0,t,e,a,i,r)}catch(e){}},setListener:function(e){l=e},watchEnabled:function(e){if(void 0===e)return t;t=e}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":3}],93:[function(e,t,n){(function(i){"use strict";var r="undefined"!=typeof window?window.jQuery:void 0!==i?i.jQuery:null,d="undefined"!=typeof window?window.ko:void 0!==i?i.ko:null,a=(e("console-browserify"),e("./timed-call.js").timedCall),s=e("toastr");s.options={closeButton:!1,debug:!1,positionClass:"toast-bottom-full-width",target:"#mo-body",onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},t.exports=function(e,t,n,o){var l={galleryRecent:d.observableArray([]),galleryRemote:d.observableArray([]),selectedBlock:d.observable(null),selectedItem:d.observable(null),selectedTool:d.observable(0),selectedImageTab:d.observable(0),dragging:d.observable(!1),draggingImage:d.observable(!1),galleryLoaded:d.observable(!1),showPreviewFrame:d.observable(!1),previewMode:d.observable("mobile"),showToolbox:d.observable(!0),showTheme:d.observable(!1),showGallery:d.observable(!1),debug:d.observable(!1),contentListeners:d.observable(0),logoPath:"rs/img/mosaico32.png",logoUrl:".",logoAlt:"mosaico"};return l.content=e,l.blockDefs=t,l.notifier=s,l.tt=function(e,t){if(void 0!==t)for(var n in t)t.hasOwnProperty(n)&&(e=e.replace(new RegExp("__"+n+"__","g"),t[n]));return e},l.t=l.tt,l.ut=function(e,t){return t},l.templatePath=n,l.remoteUrlProcessor=function(e){return e},l.remoteFileProcessor=function(e){return void 0!==e.url&&(e.url=l.remoteUrlProcessor(e.url)),void 0!==e.thumbnailUrl&&(e.thumbnailUrl=l.remoteUrlProcessor(e.thumbnailUrl)),e},l.loadGallery=function(){l.galleryLoaded("loading");var e=o||"/upload/";r.getJSON(e,function(e){for(var t=0;t<e.files.length;t++)e.files[t]=l.remoteFileProcessor(e.files[t]);l.galleryLoaded(e.files.length),l.galleryRemote(e.files.reverse())}).fail(function(){l.galleryLoaded(!1),l.notifier.error(l.t("Unexpected error listing files"))})},l.fileToImage=function(e,t,n){return e.url},l.removeBlock=function(e,t){d.utils.unwrapObservable(l.selectedBlock)==d.utils.unwrapObservable(e)&&l.selectBlock(null,!0);var n=t.blocks.remove(e);return l.notifier.info(l.t("Block removed: use undo button to restore it...")),n},l.duplicateBlock=function(e,t){var n=d.utils.unwrapObservable(e),o=d.toJS(d.utils.unwrapObservable(t.blocks)[n]);void 0!==o.id&&(o.id=""),t.blocks.splice(n+1,0,o)},l.moveBlock=function(e,t,n){var o=d.utils.unwrapObservable(e),i=d.utils.unwrapObservable(t.blocks);if(n&&0<o||!n&&o<i.length-1){var r=o+(n?-1:1),a=i[r];l.startMultiple(),t.blocks.splice(r,1),t.blocks.splice(o,0,a),l.stopMultiple()}},l.loadDefaultBlocks=function(){var e=d.toJS(l.content().mainBlocks);e.blocks=[];for(var t=d.utils.unwrapObservable(l.blockDefs),n=0;n<t.length;n++){var o=d.toJS(t[n]);o.id="block_"+n,e.blocks.push(o)}a("setMainBlocks",l.content().mainBlocks._wrap.bind(l.content().mainBlocks,e))},l.addImage=function(e){var t=r("#main-wysiwyg-area .selectable-img.selecteditem");return 1==t.length&&"object"==typeof e&&void 0!==e.url&&(d.contextFor(t[0])._src(e.url),!0)},l.addBlock=function(e,t){var n,o,i=l.selectedBlock();if(null!==i)for(var r=l.content().mainBlocks().blocks().length-1;0<=r;r--)if(l.content().mainBlocks().blocks()[r]()==i){n=r;break}void 0!==n?(o=n+1,l.content().mainBlocks().blocks.splice(o,0,e),l.notifier.info(l.t("New block added after the selected one (__pos__)",{pos:o}))):(l.content().mainBlocks().blocks.push(e),o=l.content().mainBlocks().blocks().length-1,l.notifier.info(l.t("New block added at the model bottom (__pos__)",{pos:o})));var a=l.content().mainBlocks().blocks()[o]();return l.selectBlock(a,!0),!1},l.findObjectsOfType=function(e,t){var n=[],o=d.utils.unwrapObservable(e);for(var i in o)if(o.hasOwnProperty(i)){var r=d.utils.unwrapObservable(o[i]);if(i.match(/Blocks$/))for(var a=d.utils.unwrapObservable(r.blocks),l=0;l<a.length;l++){var s=d.utils.unwrapObservable(a[l]);null!==t&&d.utils.unwrapObservable(s.type)!=t||n.push(s)}else"object"==typeof r&&null!==r&&(null!==t&&d.utils.unwrapObservable(r.type)!=t||n.push(r))}return n},l.placeholderHelper={element:function(e){return r(e[0].outerHTML).removeClass("ui-draggable").addClass("sortable-placeholder").css("display","block").css("position","relative").css("width","100%").css("height","auto").css("opacity",".8")[0]},update:function(e,t){}},l.startMultiple=function(){void 0!==l.setUndoModeMerge&&l.setUndoModeMerge()},l.stopMultiple=function(){void 0!==l.setUndoModeOnce&&l.setUndoModeOnce()},l.localGlobalSwitch=function(e,t){return e(null===e()?t():null),!1},l.selectItem=function(e,t,n){var o=d.utils.peekObservable(e);return void 0!==n&&l.selectBlock(n,!1,!0),o!=t&&(e(t),null!==t&&0===l.selectedTool()&&l.selectedTool(1)),!1}.bind(l,l.selectedItem),l.isSelectedItem=function(e){return l.selectedItem()==e},l.selectBlock=function(e,t,n,o){var i=d.utils.peekObservable(e);o||l.selectItem(null),i!=t&&(e(t),l.showGallery(!1),null===t||n||0!==l.selectedTool()||l.selectedTool(1))}.bind(l,l.selectedBlock),l.countSubscriptions=function(e,t){var n=0;for(var o in e)if(e.hasOwnProperty(o)){var i=e[o];d.isObservable(i)&&(void 0!==i._defaultComputed&&(n+=i._defaultComputed.getSubscriptionsCount()),n+=i.getSubscriptionsCount(),i=d.utils.unwrapObservable(i)),"object"==typeof i&&null!==i&&(n+=l.countSubscriptions(i,void 0!==t?t+"/"+o+"@":void 0))}return n},l.loopSubscriptionsCount=function(){var e=l.countSubscriptions(l.content());i.document.getElementById("subscriptionsCount").innerHTML=e,i.setTimeout(l.loopSubscriptionsCount,1e3)},l.export=function(){return a("exportHTML",l.exportHTML)},l.exportHTML=function(){var e="exportframe";r("body").append('<iframe id="'+e+'" data-bind="bindIframe: $data"></iframe>');var t=i.document.getElementById(e);d.applyBindings(l,t),d.cleanNode(t),l.inline&&l.inline(t.contentWindow.document);var n=t.contentWindow.document.doctype,o="<!DOCTYPE "+n.name+(n.publicId?' PUBLIC "'+n.publicId+'"':"")+(!n.publicId&&n.systemId?" SYSTEM":"")+(n.systemId?' "'+n.systemId+'"':"")+">\n"+t.contentWindow.document.documentElement.outerHTML;return d.removeNode(t),(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=o.replace(/<script ([^>]* )?type="text\/html"[^>]*>[\s\S]*?<\/script>/gm,"")).replace(/<!-- ko ((?!--).)*? -->/g,"")).replace(/<!-- \/ko -->/g,"")).replace(/ data-bind="[^"]*"/gm,"")).replace(/ data-mce-(href|src|style)="[^"]*"/gm,"")).replace(/ style="[^"]*"([^>]*) replaced(style="[^"]*")/gm,"$1 $2")).replace(/ replaced(style="[^"]*")([^>]*) style="[^"]*"/gm," $1$2")).replace(/ replaced(style="[^"]*")/gm," $1")).replace(/ http-equiv="[^"]*"([^>]*) replaced(http-equiv="[^"]*")/gm,"$1 $2")).replace(/ replaced(http-equiv="[^"]*")([^>]*) http-equiv="[^"]*"/gm," $1$2")).replace(/ replaced(http-equiv="[^"]*")/gm," $1")).replace(/&lt;%/g,"<%")).replace(/%&gt;/g,"%>")).replace(/<replacedcc[^>]* condition="([^"]*)"[^>]*>([\s\S]*?)<\/replacedcc>/g,function(e,t,n){var o="\x3c!--[if "+t.replace(/&amp;/,"&")+"]>";return(o+=n.replace(/<!-- cc:bc:([A-Za-z:]*) -->(<\/cc>)?<!-- cc:ac:\1 -->/g,"</$1>").replace(/><\/cc><!-- cc:sc -->/g,"/>").replace(/<!-- cc:bo:([A-Za-z:]*) --><cc/g,"<$1").replace(/^.*<!-- cc:start -->/,"").replace(/<!-- cc:end -->.*$/,""))+"<![endif]--\x3e"})).match(/ data-[^ =]+(="[^"]+")? /)||o.match(/ replaced([^= ]*=)/),o},l.exportHTMLtoTextarea=function(e){r(e).val(l.exportHTML())},l.exportJSONtoTextarea=function(e){r(e).val(l.exportJSON())},l.importJSONfromTextarea=function(e){l.importJSON(r(e).val())},l.exportMetadata=function(){return d.toJSON(l.metadata)},l.exportJSON=function(){return d.toJSON(l.content)},l.exportJS=function(){return d.toJS(l.content)},l.importJSON=function(e){var t=d.utils.parseJson(e);l.content._wrap(t)},l.exportTheme=function(){var e={},t=l.content().theme(),r=function(e,t,n){for(var o in n)if(n.hasOwnProperty(o)){var i=d.utils.unwrapObservable(n[o]);null!==i&&"object"==typeof i?r(o+".",t,i):t[e+o]=i}};r("",e,t);var n="";for(var o in e)e.hasOwnProperty(o)&&"type"!=o&&(n+=o+": "+e[o]+";\n");return n},l.loadImage=function(e){l.galleryRecent.unshift(e),l.selectedImageTab(0)},l.selectImage=function(e){l.showGallery(!0)},l.dialog=function(e,t){r(e).dialog(t)},l.log=function(e,t){},l}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./timed-call.js":89,"console-browserify":3,toastr:30}]},{},[43,1])(43)});